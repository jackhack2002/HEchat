var gF=Object.defineProperty,mF=Object.defineProperties;var yF=Object.getOwnPropertyDescriptors;var hd=Object.getOwnPropertySymbols,_F=Object.getPrototypeOf,pD=Object.prototype.hasOwnProperty,gD=Object.prototype.propertyIsEnumerable,vF=Reflect.get;var fD=(n,e,t)=>e in n?gF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,F=(n,e)=>{for(var t in e||={})pD.call(e,t)&&fD(n,t,e[t]);if(hd)for(var t of hd(e))gD.call(e,t)&&fD(n,t,e[t]);return n},me=(n,e)=>mF(n,yF(e));var mD=(n,e)=>{var t={};for(var r in n)pD.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&hd)for(var r of hd(n))e.indexOf(r)<0&&gD.call(n,r)&&(t[r]=n[r]);return t};var ai=(n,e,t)=>vF(_F(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});function yD(n,e){return Object.is(n,e)}var ot=null,fd=!1,pd=1,Cr=Symbol("SIGNAL");function Ie(n){let e=ot;return ot=n,e}function _D(){return ot}var Pc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xm(n){if(fd)throw new Error("");if(ot===null)return;ot.consumerOnSignalRead(n);let e=ot.nextProducerIndex++;if(_d(ot),e<ot.producerNode.length&&ot.producerNode[e]!==n&&xc(ot)){let t=ot.producerNode[e];yd(t,ot.producerIndexOfThis[e])}ot.producerNode[e]!==n&&(ot.producerNode[e]=n,ot.producerIndexOfThis[e]=xc(ot)?ED(n,ot,e):0),ot.producerLastReadVersion[e]=n.version}function wF(){pd++}function vD(n){if(!(xc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===pd)){if(!n.producerMustRecompute(n)&&!km(n)){n.dirty=!1,n.lastCleanEpoch=pd;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=pd}}function wD(n){if(n.liveConsumerNode===void 0)return;let e=fd;fd=!0;try{for(let t of n.liveConsumerNode)t.dirty||IF(t)}finally{fd=e}}function ID(){return ot?.consumerAllowSignalWrites!==!1}function IF(n){n.dirty=!0,wD(n),n.consumerMarkedDirty?.(n)}function md(n){return n&&(n.nextProducerIndex=0),Ie(n)}function Pm(n,e){if(Ie(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(xc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)yd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function km(n){_d(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(vD(t),r!==t.version))return!0}return!1}function Om(n){if(_d(n),xc(n))for(let e=0;e<n.producerNode.length;e++)yd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ED(n,e,t){if(CD(n),n.liveConsumerNode.length===0&&TD(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=ED(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function yd(n,e){if(CD(n),n.liveConsumerNode.length===1&&TD(n))for(let r=0;r<n.producerNode.length;r++)yd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];_d(i),i.producerIndexOfThis[r]=e}}function xc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function _d(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function CD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function TD(n){return n.producerNode!==void 0}function bD(n){let e=Object.create(EF);e.computation=n;let t=()=>{if(vD(e),xm(e),e.value===gd)throw e.error;return e.value};return t[Cr]=e,t}var Nm=Symbol("UNSET"),Mm=Symbol("COMPUTING"),gd=Symbol("ERRORED"),EF=me(F({},Pc),{value:Nm,dirty:!0,error:null,equal:yD,producerMustRecompute(n){return n.value===Nm||n.value===Mm},producerRecomputeValue(n){if(n.value===Mm)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Mm;let t=md(n),r;try{r=n.computation()}catch(i){r=gd,n.error=i}finally{Pm(n,t)}if(e!==Nm&&e!==gd&&r!==gd&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function CF(){throw new Error}var DD=CF;function SD(){DD()}function AD(n){DD=n}var TF=null;function RD(n){let e=Object.create(MD);e.value=n;let t=()=>(xm(e),e.value);return t[Cr]=e,t}function Fm(n,e){ID()||SD(),n.equal(n.value,e)||(n.value=e,bF(n))}function ND(n,e){ID()||SD(),Fm(n,e(n.value))}var MD=me(F({},Pc),{equal:yD,value:void 0});function bF(n){n.version++,wF(),wD(n),TF?.()}function ne(n){return typeof n=="function"}function vo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var vd=vo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ss(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ge=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(s){e=s instanceof vd?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{xD(s)}catch(o){e=e??[],o instanceof vd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new vd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)xD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ss(t,e)}remove(e){let{_finalizers:t}=this;t&&ss(t,e),e instanceof n&&e._removeParent(this)}};Ge.EMPTY=(()=>{let n=new Ge;return n.closed=!0,n})();var Lm=Ge.EMPTY;function wd(n){return n instanceof Ge||n&&"closed"in n&&ne(n.remove)&&ne(n.add)&&ne(n.unsubscribe)}function xD(n){ne(n)?n():n.unsubscribe()}var Dn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var wo={setTimeout(n,e,...t){let{delegate:r}=wo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=wo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Id(n){wo.setTimeout(()=>{let{onUnhandledError:e}=Dn;if(e)e(n);else throw n})}function kc(){}var PD=Vm("C",void 0,void 0);function kD(n){return Vm("E",void 0,n)}function OD(n){return Vm("N",n,void 0)}function Vm(n,e,t){return{kind:n,value:e,error:t}}var os=null;function Io(n){if(Dn.useDeprecatedSynchronousErrorHandling){let e=!os;if(e&&(os={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=os;if(os=null,t)throw r}}else n()}function FD(n){Dn.useDeprecatedSynchronousErrorHandling&&os&&(os.errorThrown=!0,os.error=n)}var as=class extends Ge{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wd(e)&&e.add(this)):this.destination=AF}static create(e,t,r){return new Eo(e,t,r)}next(e){this.isStopped?jm(OD(e),this):this._next(e)}error(e){this.isStopped?jm(kD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?jm(PD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},DF=Function.prototype.bind;function Um(n,e){return DF.call(n,e)}var Bm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ed(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ed(r)}else Ed(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ed(t)}}},Eo=class extends as{constructor(e,t,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Dn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Um(e.next,s),error:e.error&&Um(e.error,s),complete:e.complete&&Um(e.complete,s)}):i=e}this.destination=new Bm(i)}};function Ed(n){Dn.useDeprecatedSynchronousErrorHandling?FD(n):Id(n)}function SF(n){throw n}function jm(n,e){let{onStoppedNotification:t}=Dn;t&&wo.setTimeout(()=>t(n,e))}var AF={closed:!0,next:kc,error:SF,complete:kc};var Co=typeof Symbol=="function"&&Symbol.observable||"@@observable";function en(n){return n}function $m(...n){return Hm(n)}function Hm(n){return n.length===0?en:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ue=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=NF(t)?t:new Eo(t,r,i);return Io(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=LD(r),new r((i,s)=>{let o=new Eo({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Co](){return this}pipe(...t){return Hm(t)(this)}toPromise(t){return t=LD(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function LD(n){var e;return(e=n??Dn.Promise)!==null&&e!==void 0?e:Promise}function RF(n){return n&&ne(n.next)&&ne(n.error)&&ne(n.complete)}function NF(n){return n&&n instanceof as||RF(n)&&wd(n)}function zm(n){return ne(n?.lift)}function ve(n){return e=>{if(zm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(n,e,t,r,i){return new qm(n,e,t,r,i)}var qm=class extends as{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function To(){return ve((n,e)=>{let t=null;n._refCount++;let r=ye(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var bo=class extends ue{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,zm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ge;let t=this.getSubject();e.add(this.source.subscribe(ye(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ge.EMPTY)}return e}refCount(){return To()(this)}};var VD=vo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ht=(()=>{class n extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Cd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new VD}next(t){Io(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Io(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Io(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Lm:(this.currentObservers=null,s.push(t),new Ge(()=>{this.currentObservers=null,ss(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ue;return t.source=this,t}}return n.create=(e,t)=>new Cd(e,t),n})(),Cd=class extends ht{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Lm}};var at=class extends ht{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Gm={now(){return(Gm.delegate||Date).now()},delegate:void 0};var Td=class extends Ge{constructor(e,t){super()}schedule(e,t=0){return this}};var Oc={setInterval(n,e,...t){let{delegate:r}=Oc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Oc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Do=class extends Td{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Oc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Oc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ss(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var So=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};So.now=Gm.now;var Ao=class extends So{constructor(e,t=So.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Wm=new Ao(Do);var bd=class extends Do{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Dd=class extends Ao{};var Km=new Dd(bd);var tn=new ue(n=>n.complete());function UD(n){return n&&ne(n.schedule)}function jD(n){return n[n.length-1]}function Sd(n){return ne(jD(n))?n.pop():void 0}function ci(n){return UD(jD(n))?n.pop():void 0}function Ad(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function $D(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(f){o(f)}}function c(d){try{l(r.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function BD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cs(n){return this instanceof cs?(this.v=n,this):new cs(n)}function HD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(E){return Promise.resolve(E).then(y,f)}}function a(y,E){r[y]&&(i[y]=function(R){return new Promise(function(N,L){s.push([y,R,N,L])>1||c(y,R)})},E&&(i[y]=E(i[y])))}function c(y,E){try{l(r[y](E))}catch(R){g(s[0][3],R)}}function l(y){y.value instanceof cs?Promise.resolve(y.value.v).then(d,f):g(s[0][2],y)}function d(y){c("next",y)}function f(y){c("throw",y)}function g(y,E){y(E),s.shift(),s.length&&c(s[0][0],s[0][1])}}function zD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof BD=="function"?BD(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Rd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Nd(n){return ne(n?.then)}function Md(n){return ne(n[Co])}function xd(n){return Symbol.asyncIterator&&ne(n?.[Symbol.asyncIterator])}function Pd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function MF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var kd=MF();function Od(n){return ne(n?.[kd])}function Fd(n){return HD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield cs(t.read());if(i)return yield cs(void 0);yield yield cs(r)}}finally{t.releaseLock()}})}function Ld(n){return ne(n?.getReader)}function tt(n){if(n instanceof ue)return n;if(n!=null){if(Md(n))return xF(n);if(Rd(n))return PF(n);if(Nd(n))return kF(n);if(xd(n))return qD(n);if(Od(n))return OF(n);if(Ld(n))return FF(n)}throw Pd(n)}function xF(n){return new ue(e=>{let t=n[Co]();if(ne(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function PF(n){return new ue(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function kF(n){return new ue(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Id)})}function OF(n){return new ue(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function qD(n){return new ue(e=>{LF(n,e).catch(t=>e.error(t))})}function FF(n){return qD(Fd(n))}function LF(n,e){var t,r,i,s;return $D(this,void 0,void 0,function*(){try{for(t=zD(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function zt(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function ui(n,e=0){return ve((t,r)=>{t.subscribe(ye(r,i=>zt(r,n,()=>r.next(i),e),()=>zt(r,n,()=>r.complete(),e),i=>zt(r,n,()=>r.error(i),e)))})}function li(n,e=0){return ve((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function GD(n,e){return tt(n).pipe(li(e),ui(e))}function WD(n,e){return tt(n).pipe(li(e),ui(e))}function KD(n,e){return new ue(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function QD(n,e){return new ue(t=>{let r;return zt(t,e,()=>{r=n[kd](),zt(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function Vd(n,e){if(!n)throw new Error("Iterable cannot be null");return new ue(t=>{zt(t,e,()=>{let r=n[Symbol.asyncIterator]();zt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function YD(n,e){return Vd(Fd(n),e)}function JD(n,e){if(n!=null){if(Md(n))return GD(n,e);if(Rd(n))return KD(n,e);if(Nd(n))return WD(n,e);if(xd(n))return Vd(n,e);if(Od(n))return QD(n,e);if(Ld(n))return YD(n,e)}throw Pd(n)}function We(n,e){return e?JD(n,e):tt(n)}function Z(...n){let e=ci(n);return We(n,e)}function Ro(n,e){let t=ne(n)?n:()=>n,r=i=>i.error(t());return new ue(e?i=>e.schedule(r,0,i):r)}function Qm(n){return!!n&&(n instanceof ue||ne(n.lift)&&ne(n.subscribe))}var Tr=vo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function de(n,e){return ve((t,r)=>{let i=0;t.subscribe(ye(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:VF}=Array;function UF(n,e){return VF(e)?n(...e):n(e)}function Ud(n){return de(e=>UF(n,e))}var{isArray:jF}=Array,{getPrototypeOf:BF,prototype:$F,keys:HF}=Object;function jd(n){if(n.length===1){let e=n[0];if(jF(e))return{args:e,keys:null};if(zF(e)){let t=HF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function zF(n){return n&&typeof n=="object"&&BF(n)===$F}function Bd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function $d(...n){let e=ci(n),t=Sd(n),{args:r,keys:i}=jd(n);if(r.length===0)return We([],e);let s=new ue(qF(r,e,i?o=>Bd(i,o):en));return t?s.pipe(Ud(t)):s}function qF(n,e,t=en){return r=>{ZD(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)ZD(e,()=>{let l=We(n[c],e),d=!1;l.subscribe(ye(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function ZD(n,e,t){n?zt(t,n,e):e()}function XD(n,e,t,r,i,s,o,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},y=R=>l<r?E(R):c.push(R),E=R=>{s&&e.next(R),l++;let N=!1;tt(t(R,d++)).subscribe(ye(e,L=>{i?.(L),s?y(L):e.next(L)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let L=c.shift();o?zt(e,o,()=>E(L)):E(L)}g()}catch(L){e.error(L)}}))};return n.subscribe(ye(e,y,()=>{f=!0,g()})),()=>{a?.()}}function ct(n,e,t=1/0){return ne(e)?ct((r,i)=>de((s,o)=>e(r,s,i,o))(tt(n(r,i))),t):(typeof e=="number"&&(t=e),ve((r,i)=>XD(r,i,n,t)))}function Ym(n=1/0){return ct(en,n)}function e0(){return Ym(1)}function No(...n){return e0()(We(n,ci(n)))}function Hd(n){return new ue(e=>{tt(n()).subscribe(e)})}function Jm(...n){let e=Sd(n),{args:t,keys:r}=jd(n),i=new ue(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;tt(t[d]).subscribe(ye(s,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?Bd(r,a):a),s.complete())}))}});return e?i.pipe(Ud(e)):i}function hn(n,e){return ve((t,r)=>{let i=0;t.subscribe(ye(r,s=>n.call(e,s,i++)&&r.next(s)))})}function di(n){return ve((e,t)=>{let r=null,i=!1,s;r=e.subscribe(ye(t,void 0,void 0,o=>{s=tt(n(o,di(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function t0(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(ye(o,d=>{let f=l++;c=a?n(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function us(n,e){return ne(e)?ct(n,e,1):ct(n,1)}function hi(n){return ve((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function br(n){return n<=0?()=>tn:ve((e,t)=>{let r=0;e.subscribe(ye(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Zm(n){return de(()=>n)}function zd(n=GF){return ve((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function GF(){return new Tr}function Mo(n){return ve((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Sn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?hn((i,s)=>n(i,s,r)):en,br(1),t?hi(e):zd(()=>new Tr))}function xo(n){return n<=0?()=>tn:ve((e,t)=>{let r=[];e.subscribe(ye(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Xm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?hn((i,s)=>n(i,s,r)):en,xo(1),t?hi(e):zd(()=>new Tr))}function ey(n,e){return ve(t0(n,e,arguments.length>=2,!0))}function ty(...n){let e=ci(n);return ve((t,r)=>{(e?No(n,t,e):No(n,t)).subscribe(r)})}function fn(n,e){return ve((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(ye(r,c=>{i?.unsubscribe();let l=0,d=s++;tt(n(c,d)).subscribe(i=ye(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function ny(n){return ve((e,t)=>{tt(n).subscribe(ye(t,()=>t.complete(),kc)),!t.closed&&e.subscribe(t)})}function Ze(n,e,t){let r=ne(n)||e||t?{next:n,error:e,complete:t}:n;return r?ve((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ye(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):en}var H0="https://g.co/ng/security#xss",j=class extends Error{constructor(e,t){super(xh(e,t)),this.code=e}};function xh(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Wc(n){return{toString:n}.toString()}var qd="__parameters__";function WF(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function z0(n,e,t){return Wc(()=>{let r=WF(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(qd)?c[qd]:Object.defineProperty(c,qd,{value:[]})[qd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var ds=globalThis;function Pe(n){for(let e in n)if(n[e]===Pe)return e;throw Error("Could not find renamed property on target object.")}function KF(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Vt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Vt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function n0(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var QF=Pe({__forward_ref__:Pe});function bs(n){return n.__forward_ref__=bs,n.toString=function(){return Vt(this())},n}function Lt(n){return q0(n)?n():n}function q0(n){return typeof n=="function"&&n.hasOwnProperty(QF)&&n.__forward_ref__===bs}function z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ds(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ph(n){return r0(n,W0)||r0(n,K0)}function G0(n){return Ph(n)!==null}function r0(n,e){return n.hasOwnProperty(e)?n[e]:null}function YF(n){let e=n&&(n[W0]||n[K0]);return e||null}function i0(n){return n&&(n.hasOwnProperty(s0)||n.hasOwnProperty(JF))?n[s0]:null}var W0=Pe({\u0275prov:Pe}),s0=Pe({\u0275inj:Pe}),K0=Pe({ngInjectableDef:Pe}),JF=Pe({ngInjectorDef:Pe}),V=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Q0(n){return n&&!!n.\u0275providers}var ZF=Pe({\u0275cmp:Pe}),XF=Pe({\u0275dir:Pe}),eL=Pe({\u0275pipe:Pe}),tL=Pe({\u0275mod:Pe}),sh=Pe({\u0275fac:Pe}),Vc=Pe({__NG_ELEMENT_ID__:Pe}),o0=Pe({__NG_ENV_ID__:Pe});function kh(n){return typeof n=="string"?n:n==null?"":String(n)}function nL(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():kh(n)}function rL(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new j(-200,n)}function p_(n,e){throw new j(-201,!1)}var le=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(le||{}),vy;function Y0(){return vy}function qt(n){let e=vy;return vy=n,e}function J0(n,e,t){let r=Ph(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&le.Optional)return null;if(e!==void 0)return e;p_(n,"Injector")}var iL={},Uc=iL,wy="__NG_DI_FLAG__",oh="ngTempTokenPath",sL="ngTokenPath",oL=/\n/gm,aL="\u0275",a0="__source",Fo;function cL(){return Fo}function fi(n){let e=Fo;return Fo=n,e}function uL(n,e=le.Default){if(Fo===void 0)throw new j(-203,!1);return Fo===null?J0(n,void 0,e):Fo.get(n,e&le.Optional?null:void 0,e)}function ie(n,e=le.Default){return(Y0()||uL)(Lt(n),e)}function x(n,e=le.Default){return ie(n,Oh(e))}function Oh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Iy(n){let e=[];for(let t=0;t<n.length;t++){let r=Lt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,s=le.Default;for(let o=0;o<r.length;o++){let a=r[o],c=lL(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(ie(i,s))}else e.push(ie(r))}return e}function Z0(n,e){return n[wy]=e,n.prototype[wy]=e,n}function lL(n){return n[wy]}function dL(n,e,t,r){let i=n[oh];throw e[a0]&&i.unshift(e[a0]),n.message=hL(`
`+n.message,i,t,r),n[sL]=i,n[oh]=null,n}function hL(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==aL?n.slice(2):n;let i=Vt(e);if(Array.isArray(e))i=e.map(Vt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Vt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(oL,`
  `)}`}var nt=Z0(z0("Optional"),8);var X0=Z0(z0("SkipSelf"),4);function fs(n,e){let t=n.hasOwnProperty(sh);return t?n[sh]:null}function fL(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function pL(n){return n.flat(Number.POSITIVE_INFINITY)}function g_(n,e){n.forEach(t=>Array.isArray(t)?g_(t,e):e(t))}function eS(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ah(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function gL(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function mL(n,e,t){let r=Kc(n,e);return r>=0?n[r|1]=t:(r=~r,gL(n,r,e,t)),r}function ry(n,e){let t=Kc(n,e);if(t>=0)return n[t|1]}function Kc(n,e){return yL(n,e,1)}function yL(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Vo={},nn=[],ps=new V(""),tS=new V("",-1),nS=new V(""),ch=class{get(e,t=Uc){if(t===Uc){let r=new Error(`NullInjectorError: No provider for ${Vt(e)}!`);throw r.name="NullInjectorError",r}return t}},rS=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(rS||{}),Yn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Yn||{}),gi=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(gi||{});function _L(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Ey(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];vL(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function iS(n){return n===3||n===4||n===6}function vL(n){return n.charCodeAt(0)===64}function jc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?c0(n,t,i,null,e[++r]):c0(n,t,i,null,null))}}return n}function c0(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var sS="ng-template";function wL(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&_L(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(m_(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function m_(n){return n.type===4&&n.value!==sS}function IL(n,e,t){let r=n.type===4&&!t?sS:n.value;return e===r}function EL(n,e,t){let r=4,i=n.attrs,s=i!==null?bL(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!An(r)&&!An(c))return!1;if(o&&An(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!IL(n,c,t)||c===""&&e.length===1){if(An(r))return!1;o=!0}}else if(r&8){if(i===null||!wL(n,i,c,t)){if(An(r))return!1;o=!0}}else{let l=e[++a],d=CL(c,i,m_(n),t);if(d===-1){if(An(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(An(r))return!1;o=!0}}}}return An(r)||o}function An(n){return(n&1)===0}function CL(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return DL(e,n)}function TL(n,e,t=!1){for(let r=0;r<e.length;r++)if(EL(n,e[r],t))return!0;return!1}function bL(n){for(let e=0;e<n.length;e++){let t=n[e];if(iS(t))return e}return n.length}function DL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function u0(n,e){return n?":not("+e.trim()+")":e}function SL(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!An(o)&&(e+=u0(s,i),i=""),r=o,s=s||!An(r);t++}return i!==""&&(e+=u0(s,i)),e}function AL(n){return n.map(SL).join(",")}function RL(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!An(i))break;i=s}r++}return{attrs:e,classes:t}}function pt(n){return Wc(()=>{let e=lS(n),t=me(F({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===rS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Yn.Emulated,styles:n.styles||nn,_:null,schemas:n.schemas||null,tView:null,id:""});dS(t);let r=n.dependencies;return t.directiveDefs=d0(r,!1),t.pipeDefs=d0(r,!0),t.id=xL(t),t})}function NL(n){return gs(n)||oS(n)}function ML(n){return n!==null}function Ss(n){return Wc(()=>({type:n.type,bootstrap:n.bootstrap||nn,declarations:n.declarations||nn,imports:n.imports||nn,exports:n.exports||nn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function l0(n,e){if(n==null)return Vo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=gi.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==gi.None?[r,a]:r,e[s]=o):t[s]=r}return t}function It(n){return Wc(()=>{let e=lS(n);return dS(e),e})}function y_(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function gs(n){return n[ZF]||null}function oS(n){return n[XF]||null}function aS(n){return n[eL]||null}function cS(n){let e=gs(n)||oS(n)||aS(n);return e!==null?e.standalone:!1}function uS(n,e){let t=n[tL]||null;if(!t&&e===!0)throw new Error(`Type ${Vt(n)} does not have '\u0275mod' property.`);return t}function lS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Vo,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||nn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:l0(n.inputs,e),outputs:l0(n.outputs),debugInfo:null}}function dS(n){n.features?.forEach(e=>e(n))}function d0(n,e){if(!n)return null;let t=e?aS:NL;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(ML)}function xL(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ut(n){return{\u0275providers:n}}function PL(...n){return{\u0275providers:hS(!0,n),\u0275fromNgModule:!0}}function hS(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return g_(e,o=>{let a=o;Cy(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&fS(i,s),t}function fS(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];__(i,s=>{e(s,r)})}}function Cy(n,e,t,r){if(n=Lt(n),!n)return!1;let i=null,s=i0(n),o=!s&&gs(n);if(!s&&!o){let c=n.ngModule;if(s=i0(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Cy(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{g_(s.imports,d=>{Cy(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&fS(l,e)}if(!a){let l=fs(i)||(()=>new i);e({provide:i,useFactory:l,deps:nn},i),e({provide:nS,useValue:i,multi:!0},i),e({provide:ps,useValue:()=>ie(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;__(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function __(n,e){for(let t of n)Q0(t)&&(t=t.\u0275providers),Array.isArray(t)?__(t,e):e(t)}var kL=Pe({provide:String,useValue:Pe});function pS(n){return n!==null&&typeof n=="object"&&kL in n}function OL(n){return!!(n&&n.useExisting)}function FL(n){return!!(n&&n.useFactory)}function Uo(n){return typeof n=="function"}function LL(n){return!!n.useClass}var Fh=new V(""),Xd={},VL={},iy;function v_(){return iy===void 0&&(iy=new ch),iy}var gn=class{},Bc=class extends gn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,by(e,o=>this.processProvider(o)),this.records.set(tS,Po(void 0,this)),i.has("environment")&&this.records.set(gn,Po(void 0,this));let s=this.records.get(Fh);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(nS,nn,le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ie(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=fi(this),r=qt(void 0),i;try{return e()}finally{fi(t),qt(r)}}get(e,t=Uc,r=le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(o0))return e[o0](this);r=Oh(r);let i,s=fi(this),o=qt(void 0);try{if(!(r&le.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=HL(e)&&Ph(e);l&&this.injectableDefInScope(l)?c=Po(Ty(e),Xd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&le.Self?v_():this.parent;return t=r&le.Optional&&t===Uc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[oh]=a[oh]||[]).unshift(Vt(e)),s)throw a;return dL(a,e,"R3InjectorError",this.source)}else throw a}finally{qt(o),fi(s)}}resolveInjectorInitializers(){let e=Ie(null),t=fi(this),r=qt(void 0),i;try{let s=this.get(ps,nn,le.Self);for(let o of s)o()}finally{fi(t),qt(r),Ie(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Vt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){e=Lt(e);let t=Uo(e)?e:Lt(e&&e.provide),r=jL(e);if(!Uo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Po(void 0,Xd,!0),i.factory=()=>Iy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ie(null);try{return t.value===Xd&&(t.value=VL,t.value=t.factory()),typeof t.value=="object"&&t.value&&$L(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ie(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Lt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ty(n){let e=Ph(n),t=e!==null?e.factory:fs(n);if(t!==null)return t;if(n instanceof V)throw new j(204,!1);if(n instanceof Function)return UL(n);throw new j(204,!1)}function UL(n){if(n.length>0)throw new j(204,!1);let t=YF(n);return t!==null?()=>t.factory(n):()=>new n}function jL(n){if(pS(n))return Po(void 0,n.useValue);{let e=gS(n);return Po(e,Xd)}}function gS(n,e,t){let r;if(Uo(n)){let i=Lt(n);return fs(i)||Ty(i)}else if(pS(n))r=()=>Lt(n.useValue);else if(FL(n))r=()=>n.useFactory(...Iy(n.deps||[]));else if(OL(n))r=()=>ie(Lt(n.useExisting));else{let i=Lt(n&&(n.useClass||n.provide));if(BL(n))r=()=>new i(...Iy(n.deps));else return fs(i)||Ty(i)}return r}function Po(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function BL(n){return!!n.deps}function $L(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function HL(n){return typeof n=="function"||typeof n=="object"&&n instanceof V}function by(n,e){for(let t of n)Array.isArray(t)?by(t,e):t&&Q0(t)?by(t.\u0275providers,e):e(t)}function Xn(n,e){n instanceof Bc&&n.assertNotDestroyed();let t,r=fi(n),i=qt(void 0);try{return e()}finally{fi(r),qt(i)}}function zL(){return Y0()!==void 0||cL()!=null}function qL(n){return typeof n=="function"}var rn=0,re=1,J=2,vt=3,Rn=4,Pn=5,Jn=6,uh=7,Mn=8,jo=9,Zn=10,je=11,$c=12,h0=13,Go=14,mn=15,ms=16,ko=17,Dr=18,Lh=19,mS=20,pi=21,sy=22,pn=23,wt=25,yS=1,Hc=6,Sr=7,lh=8,Bo=9,Gt=10,dh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(dh||{});function Nn(n){return Array.isArray(n)&&typeof n[yS]=="object"}function er(n){return Array.isArray(n)&&n[yS]===!0}function _S(n){return(n.flags&4)!==0}function Qc(n){return n.componentOffset>-1}function w_(n){return(n.flags&1)===1}function mi(n){return!!n.template}function hh(n){return(n[J]&512)!==0}var Dy=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function vS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function vi(){return wS}function wS(n){return n.type.prototype.ngOnChanges&&(n.setInput=WL),GL}vi.ngInherit=!0;function GL(){let n=ES(this),e=n?.current;if(e){let t=n.previous;if(t===Vo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function WL(n,e,t,r,i){let s=this.declaredInputs[r],o=ES(n)||KL(n,{previous:Vo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Dy(l&&l.currentValue,t,c===Vo),vS(n,e,i,t)}var IS="__ngSimpleChanges__";function ES(n){return n[IS]||null}function KL(n,e){return n[IS]=e}var f0=null;var Kn=function(n,e,t){f0?.(n,e,t)},CS="svg",QL="math";function xn(n){for(;Array.isArray(n);)n=n[rn];return n}function TS(n,e){return xn(e[n])}function sn(n,e){return xn(e[n.index])}function bS(n,e){return n.data[e]}function DS(n,e){return n[e]}function wi(n,e){let t=e[n];return Nn(t)?t:t[rn]}function YL(n){return(n[J]&4)===4}function I_(n){return(n[J]&128)===128}function JL(n){return er(n[vt])}function fh(n,e){return e==null?null:n[e]}function SS(n){n[ko]=0}function AS(n){n[J]&1024||(n[J]|=1024,I_(n)&&Uh(n))}function ZL(n,e){for(;n>0;)e=e[Go],n--;return e}function Vh(n){return!!(n[J]&9216||n[pn]?.dirty)}function Sy(n){n[Zn].changeDetectionScheduler?.notify(8),n[J]&64&&(n[J]|=1024),Vh(n)&&Uh(n)}function Uh(n){n[Zn].changeDetectionScheduler?.notify(0);let e=ys(n);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!I_(e)));)e=ys(e)}function RS(n,e){if((n[J]&256)===256)throw new j(911,!1);n[pi]===null&&(n[pi]=[]),n[pi].push(e)}function XL(n,e){if(n[pi]===null)return;let t=n[pi].indexOf(e);t!==-1&&n[pi].splice(t,1)}function ys(n){let e=n[vt];return er(e)?e[vt]:e}var oe={lFrame:US(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var NS=!1;function eV(){return oe.lFrame.elementDepthCount}function tV(){oe.lFrame.elementDepthCount++}function nV(){oe.lFrame.elementDepthCount--}function MS(){return oe.bindingsEnabled}function Yc(){return oe.skipHydrationRootTNode!==null}function rV(n){return oe.skipHydrationRootTNode===n}function iV(n){oe.skipHydrationRootTNode=n}function sV(){oe.skipHydrationRootTNode=null}function be(){return oe.lFrame.lView}function Nt(){return oe.lFrame.tView}function Ii(n){return oe.lFrame.contextLView=n,n[Mn]}function Ei(n){return oe.lFrame.contextLView=null,n}function jt(){let n=xS();for(;n!==null&&n.type===64;)n=n.parent;return n}function xS(){return oe.lFrame.currentTNode}function oV(){let n=oe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Jc(n,e){let t=oe.lFrame;t.currentTNode=n,t.isParent=e}function PS(){return oe.lFrame.isParent}function aV(){oe.lFrame.isParent=!1}function kS(){return NS}function p0(n){NS=n}function OS(){let n=oe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function cV(n){return oe.lFrame.bindingIndex=n}function jh(){return oe.lFrame.bindingIndex++}function uV(n){let e=oe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function lV(){return oe.lFrame.inI18n}function dV(n,e){let t=oe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ay(e)}function hV(){return oe.lFrame.currentDirectiveIndex}function Ay(n){oe.lFrame.currentDirectiveIndex=n}function fV(n){let e=oe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function FS(){return oe.lFrame.currentQueryIndex}function E_(n){oe.lFrame.currentQueryIndex=n}function pV(n){let e=n[re];return e.type===2?e.declTNode:e.type===1?n[Pn]:null}function LS(n,e,t){if(t&le.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&le.Host);)if(i=pV(s),i===null||(s=s[Go],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=oe.lFrame=VS();return r.currentTNode=e,r.lView=n,!0}function C_(n){let e=VS(),t=n[re];oe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function VS(){let n=oe.lFrame,e=n===null?null:n.child;return e===null?US(n):e}function US(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function jS(){let n=oe.lFrame;return oe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var BS=jS;function T_(){let n=jS();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function gV(n){return(oe.lFrame.contextLView=ZL(n,oe.lFrame.contextLView))[Mn]}function Wo(){return oe.lFrame.selectedIndex}function _s(n){oe.lFrame.selectedIndex=n}function b_(){let n=oe.lFrame;return bS(n.tView,n.selectedIndex)}function Ci(){oe.lFrame.currentNamespace=CS}function Bh(){mV()}function mV(){oe.lFrame.currentNamespace=null}function $S(){return oe.lFrame.currentNamespace}var HS=!0;function D_(){return HS}function Ti(n){HS=n}function yV(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=wS(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function S_(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function eh(n,e,t){zS(n,e,3,t)}function th(n,e,t,r){(n[J]&3)===t&&zS(n,e,t,r)}function oy(n,e){let t=n[J];(t&3)===e&&(t&=16383,t+=1,n[J]=t)}function zS(n,e,t,r){let i=r!==void 0?n[ko]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[ko]+=65536),(a<s||s==-1)&&(_V(n,t,e,c),n[ko]=(n[ko]&4294901760)+c+2),c++}function g0(n,e){Kn(4,n,e);let t=Ie(null);try{e.call(n)}finally{Ie(t),Kn(5,n,e)}}function _V(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[J]>>14<n[ko]>>16&&(n[J]&3)===e&&(n[J]+=16384,g0(a,s)):g0(a,s)}var Lo=-1,vs=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function vV(n){return n instanceof vs}function wV(n){return(n.flags&8)!==0}function IV(n){return(n.flags&16)!==0}var ay={},Ry=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Oh(r);let i=this.injector.get(e,ay,r);return i!==ay||t===ay?i:this.parentInjector.get(e,t,r)}};function qS(n){return n!==Lo}function ph(n){return n&32767}function EV(n){return n>>16}function gh(n,e){let t=EV(n),r=e;for(;t>0;)r=r[Go],t--;return r}var Ny=!0;function mh(n){let e=Ny;return Ny=n,e}var CV=256,GS=CV-1,WS=5,TV=0,Qn={};function bV(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Vc)&&(r=t[Vc]),r==null&&(r=t[Vc]=TV++);let i=r&GS,s=1<<i;e.data[n+(i>>WS)]|=s}function yh(n,e){let t=KS(n,e);if(t!==-1)return t;let r=e[re];r.firstCreatePass&&(n.injectorIndex=e.length,cy(r.data,n),cy(e,null),cy(r.blueprint,null));let i=A_(n,e),s=n.injectorIndex;if(qS(i)){let o=ph(i),a=gh(i,e),c=a[re].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function cy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function KS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function A_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=XS(i),r===null)return Lo;if(t++,i=i[Go],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Lo}function My(n,e,t){bV(n,e,t)}function DV(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(iS(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function QS(n,e,t){if(t&le.Optional||n!==void 0)return n;p_(e,"NodeInjector")}function YS(n,e,t,r){if(t&le.Optional&&r===void 0&&(r=null),!(t&(le.Self|le.Host))){let i=n[jo],s=qt(void 0);try{return i?i.get(e,r,t&le.Optional):J0(e,r,t&le.Optional)}finally{qt(s)}}return QS(r,e,t)}function JS(n,e,t,r=le.Default,i){if(n!==null){if(e[J]&2048&&!(r&le.Self)){let o=NV(n,e,t,r,Qn);if(o!==Qn)return o}let s=ZS(n,e,t,r,Qn);if(s!==Qn)return s}return YS(e,t,r,i)}function ZS(n,e,t,r,i){let s=AV(t);if(typeof s=="function"){if(!LS(e,n,r))return r&le.Host?QS(i,t,r):YS(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&le.Optional))p_(t);else return o}finally{BS()}}else if(typeof s=="number"){let o=null,a=KS(n,e),c=Lo,l=r&le.Host?e[mn][Pn]:null;for((a===-1||r&le.SkipSelf)&&(c=a===-1?A_(n,e):e[a+8],c===Lo||!y0(r,!1)?a=-1:(o=e[re],a=ph(c),e=gh(c,e)));a!==-1;){let d=e[re];if(m0(s,a,d.data)){let f=SV(a,e,t,o,r,l);if(f!==Qn)return f}c=e[a+8],c!==Lo&&y0(r,e[re].data[a+8]===l)&&m0(s,a,e)?(o=d,a=ph(c),e=gh(c,e)):a=-1}}return i}function SV(n,e,t,r,i,s){let o=e[re],a=o.data[n+8],c=r==null?Qc(a)&&Ny:r!=o&&(a.type&3)!==0,l=i&le.Host&&s===a,d=nh(a,o,t,c,l);return d!==null?ws(e,o,d,a):Qn}function nh(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let E=o[y];if(y<c&&t===E||y>=c&&E.type===t)return y}if(i){let y=o[c];if(y&&mi(y)&&y.type===t)return c}return null}function ws(n,e,t,r){let i=n[t],s=e.data;if(vV(i)){let o=i;o.resolving&&rL(nL(s[t]));let a=mh(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?qt(o.injectImpl):null,d=LS(n,r,le.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&yV(t,s[t],e)}finally{l!==null&&qt(l),mh(a),o.resolving=!1,BS()}}return i}function AV(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Vc)?n[Vc]:void 0;return typeof e=="number"?e>=0?e&GS:RV:e}function m0(n,e,t){let r=1<<n;return!!(t[e+(n>>WS)]&r)}function y0(n,e){return!(n&le.Self)&&!(n&le.Host&&e)}var hs=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return JS(this._tNode,this._lView,e,Oh(r),t)}};function RV(){return new hs(jt(),be())}function Ko(n){return Wc(()=>{let e=n.prototype.constructor,t=e[sh]||xy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[sh]||xy(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function xy(n){return q0(n)?()=>{let e=xy(Lt(n));return e&&e()}:fs(n)}function NV(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[J]&2048&&!(o[J]&512);){let a=ZS(s,o,t,r|le.Self,Qn);if(a!==Qn)return a;let c=s.parent;if(!c){let l=o[mS];if(l){let d=l.get(t,Qn,r);if(d!==Qn)return d}c=XS(o),o=o[Go]}s=c}return i}function XS(n){let e=n[re],t=e.type;return t===2?e.declTNode:t===1?n[Pn]:null}function R_(n){return DV(jt(),n)}function _0(n,e=null,t=null,r){let i=eA(n,e,t,r);return i.resolveInjectorInitializers(),i}function eA(n,e=null,t=null,r,i=new Set){let s=[t||nn,PL(n)];return r=r||(typeof n=="object"?void 0:Vt(n)),new Bc(s,e||v_(),r||null,i)}var ft=class n{static{this.THROW_IF_NOT_FOUND=Uc}static{this.NULL=new ch}static create(e,t){if(Array.isArray(e))return _0({name:""},t,e,"");{let r=e.name??"";return _0({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=z({token:n,providedIn:"any",factory:()=>ie(tS)})}static{this.__NG_ELEMENT_ID__=-1}};var MV=new V("");MV.__NG_ELEMENT_ID__=n=>{let e=jt();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(n&le.Optional)return null;throw new j(204,!1)};var xV="ngOriginalError";function uy(n){return n[xV]}var tA=!0,nA=(()=>{class n{static{this.__NG_ELEMENT_ID__=PV}static{this.__NG_ENV_ID__=t=>t}}return n})(),Py=class extends nA{constructor(e){super(),this._lView=e}onDestroy(e){return RS(this._lView,e),()=>XL(this._lView,e)}};function PV(){return new Py(be())}var As=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new at(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})();var ky=class extends ht{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,zL()&&(this.destroyRef=x(nA,{optional:!0})??void 0,this.pendingTasks=x(As,{optional:!0})??void 0)}emit(e){let t=Ie(null);try{super.next(e)}finally{Ie(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ge&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Xe=ky;function _h(...n){}function rA(n){let e,t;function r(){n=_h;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function v0(n){return queueMicrotask(()=>n()),()=>{n=_h}}var N_="isAngularZone",vh=N_+"_ID",kV=0,Te=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=tA}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,LV(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(N_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new j(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,OV,_h,_h);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},OV={};function M_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function FV(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){rA(()=>{n.callbackScheduled=!1,Oy(n),n.isCheckStableRunning=!0,M_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Oy(n)}function LV(n){let e=()=>{FV(n)},t=kV++;n._inner=n._inner.fork({name:"angular",properties:{[N_]:!0,[vh]:t,[vh+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(VV(c))return r.invokeTask(s,o,a,c);try{return w0(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),I0(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return w0(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!UV(c)&&e(),I0(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Oy(n),M_(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Oy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function w0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function I0(n){n._nesting--,M_(n)}var Fy=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function VV(n){return iA(n,"__ignore_ng_zone__")}function UV(n){return iA(n,"__scheduler_tick__")}function iA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Ar=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&uy(e);for(;t&&uy(t);)t=uy(t);return t||null}},jV=new V("",{providedIn:"root",factory:()=>{let n=x(Te),e=x(Ar);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function BV(){return Qo(jt(),be())}function Qo(n,e){return new kn(sn(n,e))}var kn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=BV}}return n})();function $V(n){return n instanceof kn?n.nativeElement:n}function HV(){return this._results[Symbol.iterator]()}var Ly=class n{get changes(){return this._changes??=new Xe}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=HV)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=pL(e);(this._changesDetected=!fL(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},zV="ngSkipHydration",qV="ngskiphydration";function sA(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===qV)return!0}return!1}function oA(n){return n.hasAttribute(zV)}function wh(n){return(n.flags&128)===128}function GV(n){if(wh(n))return!0;let e=n.parent;for(;e;){if(wh(n)||sA(e))return!0;e=e.parent}return!1}var aA=new Map,WV=0;function KV(){return WV++}function QV(n){aA.set(n[Lh],n)}function Vy(n){aA.delete(n[Lh])}var E0="__ngContext__";function Is(n,e){Nn(e)?(n[E0]=e[Lh],QV(e)):n[E0]=e}function cA(n){return lA(n[$c])}function uA(n){return lA(n[Rn])}function lA(n){for(;n!==null&&!er(n);)n=n[Rn];return n}var Uy;function dA(n){Uy=n}function $h(){if(Uy!==void 0)return Uy;if(typeof document<"u")return document;throw new j(210,!1)}var Hh=new V("",{providedIn:"root",factory:()=>YV}),YV="ng",x_=new V(""),yn=new V("",{providedIn:"platform",factory:()=>"unknown"});var P_=new V("",{providedIn:"root",factory:()=>$h().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function JV(){let n=new Yo;return x(yn)==="browser"&&(n.store=ZV($h(),x(Hh))),n}var Yo=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=z({token:n,providedIn:"root",factory:JV})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function ZV(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var hA="h",fA="b",jy=function(n){return n.FirstChild="f",n.NextSibling="n",n}(jy||{}),XV="e",e2="t",k_="c",pA="x",Ih="r",t2="i",n2="n",gA="d";var r2="__nghData__",mA=r2,ly="ngh",i2="nghm",yA=()=>null;function s2(n,e,t=!1){let r=n.getAttribute(ly);if(r==null)return null;let[i,s]=r.split("|");if(r=t?s:i,!r)return null;let o=s?`|${s}`:"",a=t?i:o,c={};if(r!==""){let d=e.get(Yo,null,{optional:!0});d!==null&&(c=d.get(mA,[])[Number(r)])}let l={data:c,firstChild:n.firstChild??null};return t&&(l.firstChild=n,zh(l,0,n.nextSibling)),a?n.setAttribute(ly,a):n.removeAttribute(ly),l}function o2(){yA=s2}function O_(n,e,t=!1){return yA(n,e,t)}function a2(n){let e=n._lView;return e[re].type===2?null:(hh(e)&&(e=e[wt]),e)}function c2(n){return n.textContent?.replace(/\s/gm,"")}function u2(n){let e=$h(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=c2(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function zh(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function By(n,e){return n.segmentHeads?.[e]??null}function l2(n,e){let t=n.data,r=t[XV]?.[e]??null;return r===null&&t[k_]?.[e]&&(r=F_(n,e)),r}function _A(n,e){return n.data[k_]?.[e]??null}function F_(n,e){let t=_A(n,e)??[],r=0;for(let i of t)r+=i[Ih]*(i[pA]??1);return r}function d2(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[gA];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Zc(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[gA];n.disconnectedNodes=t?new Set(t):null}return!!d2(n)?.has(e)}var Gd=new V(""),vA=!1,wA=new V("",{providedIn:"root",factory:()=>vA});var Wd;function h2(){if(Wd===void 0&&(Wd=null,ds.trustedTypes))try{Wd=ds.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Wd}function C0(n){return h2()?.createScriptURL(n)||n}var Eh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${H0})`}};function Xc(n){return n instanceof Eh?n.changingThisBreaksApplicationSecurity:n}function L_(n,e){let t=f2(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${H0})`)}return t===e}function f2(n){return n instanceof Eh&&n.getTypeName()||null}var p2=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function IA(n){return n=String(n),n.match(p2)?n:"unsafe:"+n}var qh=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(qh||{});function g2(n){let e=CA();return e?e.sanitize(qh.URL,n)||"":L_(n,"URL")?Xc(n):IA(kh(n))}function m2(n){let e=CA();if(e)return C0(e.sanitize(qh.RESOURCE_URL,n)||"");if(L_(n,"ResourceURL"))return C0(Xc(n));throw new j(904,!1)}function y2(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?m2:g2}function EA(n,e,t){return y2(e,t)(n)}function CA(){let n=be();return n&&n[Zn].sanitizer}var _2=/^>|^->|<!--|-->|--!>|<!-$/g,v2=/(<|>)/g,w2="\u200B$1\u200B";function I2(n){return n.replace(_2,e=>e.replace(v2,w2))}function E2(n){return n.ownerDocument.body}function TA(n){return n instanceof Function?n():n}function Kd(n){return(n??x(ft)).get(yn)==="browser"}var Rr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Rr||{}),C2;function V_(n,e){return C2(n,e)}function Oo(n,e,t,r,i){if(r!=null){let s,o=!1;er(r)?s=r:Nn(r)&&(o=!0,r=r[rn]);let a=xn(r);n===0&&t!==null?i==null?NA(e,t,a):Ch(e,t,a,i||null,!0):n===1&&t!==null?Ch(e,t,a,i||null,!0):n===2?$_(e,a,o):n===3&&e.destroyNode(a),s!=null&&V2(e,n,s,t,i)}}function bA(n,e){return n.createText(e)}function T2(n,e,t){n.setValue(e,t)}function DA(n,e){return n.createComment(I2(e))}function U_(n,e,t){return n.createElement(e,t)}function b2(n,e){SA(n,e),e[rn]=null,e[Pn]=null}function D2(n,e,t,r,i,s){r[rn]=i,r[Pn]=e,Gh(n,r,t,1,i,s)}function SA(n,e){e[Zn].changeDetectionScheduler?.notify(9),Gh(n,e,e[je],2,null,null)}function S2(n){let e=n[$c];if(!e)return dy(n[re],n);for(;e;){let t=null;if(Nn(e))t=e[$c];else{let r=e[Gt];r&&(t=r)}if(!t){for(;e&&!e[Rn]&&e!==n;)Nn(e)&&dy(e[re],e),e=e[vt];e===null&&(e=n),Nn(e)&&dy(e[re],e),t=e&&e[Rn]}e=t}}function A2(n,e,t,r){let i=Gt+r,s=t.length;r>0&&(t[i-1][Rn]=e),r<s-Gt?(e[Rn]=t[i],eS(t,Gt+r,e)):(t.push(e),e[Rn]=null),e[vt]=t;let o=e[ms];o!==null&&t!==o&&AA(o,e);let a=e[Dr];a!==null&&a.insertView(n),Sy(e),e[J]|=128}function AA(n,e){let t=n[Bo],r=e[vt];if(Nn(r))n[J]|=dh.HasTransplantedViews;else{let i=r[vt][mn];e[mn]!==i&&(n[J]|=dh.HasTransplantedViews)}t===null?n[Bo]=[e]:t.push(e)}function j_(n,e){let t=n[Bo],r=t.indexOf(e);t.splice(r,1)}function $y(n,e){if(n.length<=Gt)return;let t=Gt+e,r=n[t];if(r){let i=r[ms];i!==null&&i!==n&&j_(i,r),e>0&&(n[t-1][Rn]=r[Rn]);let s=ah(n,Gt+e);b2(r[re],r);let o=s[Dr];o!==null&&o.detachView(s[re]),r[vt]=null,r[Rn]=null,r[J]&=-129}return r}function RA(n,e){if(!(e[J]&256)){let t=e[je];t.destroyNode&&Gh(n,e,t,3,null,null),S2(e)}}function dy(n,e){if(e[J]&256)return;let t=Ie(null);try{e[J]&=-129,e[J]|=256,e[pn]&&Om(e[pn]),N2(n,e),R2(n,e),e[re].type===1&&e[je].destroy();let r=e[ms];if(r!==null&&er(e[vt])){r!==e[vt]&&j_(r,e);let i=e[Dr];i!==null&&i.detachView(n)}Vy(e)}finally{Ie(t)}}function R2(n,e){let t=n.cleanup,r=e[uh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[uh]=null);let i=e[pi];if(i!==null){e[pi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function N2(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof vs)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Kn(4,a,c);try{c.call(a)}finally{Kn(5,a,c)}}else{Kn(4,i,s);try{s.call(i)}finally{Kn(5,i,s)}}}}}function M2(n,e,t){return x2(n,e.parent,t)}function x2(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[rn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Yn.None||s===Yn.Emulated)return null}return sn(r,t)}}function Ch(n,e,t,r,i){n.insertBefore(e,t,r,i)}function NA(n,e,t){n.appendChild(e,t)}function T0(n,e,t,r,i){r!==null?Ch(n,e,t,r,i):NA(n,e,t)}function MA(n,e){return n.parentNode(e)}function P2(n,e){return n.nextSibling(e)}function k2(n,e,t){return F2(n,e,t)}function O2(n,e,t){return n.type&40?sn(n,t):null}var F2=O2,b0;function B_(n,e,t,r){let i=M2(n,r,e),s=e[je],o=r.parent||e[Pn],a=k2(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)T0(s,i,t[c],a,!1);else T0(s,i,t,a,!1);b0!==void 0&&b0(s,r,e,t,i)}function Fc(n,e){if(e!==null){let t=e.type;if(t&3)return sn(e,n);if(t&4)return Hy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Fc(n,r);{let i=n[e.index];return er(i)?Hy(-1,i):xn(i)}}else{if(t&128)return Fc(n,e.next);if(t&32)return V_(e,n)()||xn(n[e.index]);{let r=xA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ys(n[mn]);return Fc(i,r)}else return Fc(n,e.next)}}}return null}function xA(n,e){if(e!==null){let r=n[mn][Pn],i=e.projection;return r.projection[i]}return null}function Hy(n,e){let t=Gt+n+1;if(t<e.length){let r=e[t],i=r[re].firstChild;if(i!==null)return Fc(r,i)}return e[Sr]}function $_(n,e,t){n.removeChild(null,e,t)}function PA(n){n.textContent=""}function H_(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Is(xn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)H_(n,e,t.child,r,i,s,!1),Oo(e,n,i,a,s);else if(c&32){let l=V_(t,r),d;for(;d=l();)Oo(e,n,i,d,s);Oo(e,n,i,a,s)}else c&16?L2(n,e,r,t,i,s):Oo(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Gh(n,e,t,r,i,s){H_(t,r,n.firstChild,e,i,s,!1)}function L2(n,e,t,r,i,s){let o=t[mn],c=o[Pn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Oo(e,n,i,d,s)}else{let l=c,d=o[vt];wh(r)&&(l.flags|=128),H_(n,e,l,d,i,s,!0)}}function V2(n,e,t,r,i){let s=t[Sr],o=xn(t);s!==o&&Oo(e,n,r,s,i);for(let a=Gt;a<t.length;a++){let c=t[a];Gh(c[re],c,n,e,r,s)}}function U2(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Rr.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Rr.Important),n.setStyle(t,r,i,s))}}function j2(n,e,t){n.setAttribute(e,"style",t)}function kA(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function OA(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Ey(n,e,r),i!==null&&kA(n,e,i),s!==null&&j2(n,e,s)}var Rs={};function ze(n=1){FA(Nt(),be(),Wo()+n,!1)}function FA(n,e,t,r){if(!r)if((e[J]&3)===3){let s=n.preOrderCheckHooks;s!==null&&eh(e,s,t)}else{let s=n.preOrderHooks;s!==null&&th(e,s,0,t)}_s(t)}function q(n,e=le.Default){let t=be();if(t===null)return ie(n,e);let r=jt();return JS(r,t,Lt(n),e)}function LA(n,e,t,r,i,s){let o=Ie(null);try{let a=null;i&gi.SignalBased&&(a=e[r][Cr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&gi.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):vS(e,a,r,s)}finally{Ie(o)}}function B2(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)_s(~i);else{let s=i,o=t[++r],a=t[++r];dV(o,s);let c=e[s];a(2,c)}}}finally{_s(-1)}}function Wh(n,e,t,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[rn]=i,f[J]=r|4|128|8|64,(l!==null||n&&n[J]&2048)&&(f[J]|=2048),SS(f),f[vt]=f[Go]=n,f[Mn]=t,f[Zn]=o||n&&n[Zn],f[je]=a||n&&n[je],f[jo]=c||n&&n[jo]||null,f[Pn]=s,f[Lh]=KV(),f[Jn]=d,f[mS]=l,f[mn]=e.type==2?n[mn]:f,f}function Kh(n,e,t,r,i){let s=n.data[e];if(s===null)s=$2(n,e,t,r,i),lV()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=oV();s.injectorIndex=o===null?-1:o.injectorIndex}return Jc(s,!0),s}function $2(n,e,t,r,i){let s=xS(),o=PS(),a=o?s:s&&s.parent,c=n.data[e]=Q2(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function VA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function UA(n,e,t,r,i){let s=Wo(),o=r&2;try{_s(-1),o&&e.length>wt&&FA(n,e,wt,!1),Kn(o?2:0,i),t(r,i)}finally{_s(s),Kn(o?3:1,i)}}function jA(n,e,t){if(_S(e)){let r=Ie(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Ie(r)}}}function BA(n,e,t){MS()&&(tU(n,e,t,sn(t,e)),(t.flags&64)===64&&KA(n,e,t))}function $A(n,e,t=sn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function HA(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=z_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function z_(n,e,t,r,i,s,o,a,c,l,d){let f=wt+r,g=f+i,y=H2(f,g),E=typeof l=="function"?l():l;return y[re]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:d}}function H2(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Rs);return t}function z2(n,e,t,r){let s=r.get(wA,vA)||t===Yn.ShadowDom,o=n.selectRootElement(e,s);return q2(o),o}function q2(n){zA(n)}var zA=()=>null;function G2(n){oA(n)?PA(n):u2(n)}function W2(){zA=G2}function K2(n,e,t,r){let i=JA(e);i.push(t),n.firstCreatePass&&ZA(n).push(r,i.length-1)}function Q2(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Yc()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function D0(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=gi.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?S0(r,t,l,a,c):S0(r,t,l,a)}return r}function S0(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function Y2(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],g=t?t.get(f):null,y=g?g.inputs:null,E=g?g.outputs:null;c=D0(0,f.inputs,d,c,y),l=D0(1,f.outputs,d,l,E);let R=c!==null&&o!==null&&!m_(e)?hU(c,d,o):null;a.push(R)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function J2(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function qA(n,e,t,r,i,s,o,a){let c=sn(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(q_(n,t,d,r,i),Qc(e)&&Z2(t,e.index)):e.type&3?(r=J2(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function Z2(n,e){let t=wi(e,n);t[J]&16||(t[J]|=64)}function GA(n,e,t,r){if(MS()){let i=r===null?null:{"":-1},s=rU(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&WA(n,e,t,o,i,a),i&&iU(t,r,i)}t.mergedAttrs=jc(t.mergedAttrs,t.attrs)}function WA(n,e,t,r,i,s){for(let l=0;l<r.length;l++)My(yh(t,e),n,r[l].type);oU(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=VA(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=jc(t.mergedAttrs,d.hostAttrs),aU(n,t,e,c,d),sU(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}Y2(n,t,s)}function X2(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;eU(o)!=a&&o.push(a),o.push(t,r,s)}}function eU(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function tU(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;Qc(t)&&cU(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||yh(t,e),Is(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=ws(e,n,a,t);if(Is(l,e),o!==null&&dU(e,a-i,l,c,t,o),mi(c)){let d=wi(t.index,e);d[Mn]=ws(e,n,a,t)}}}function KA(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=hV();try{_s(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Ay(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&nU(c,l)}}finally{_s(-1),Ay(o)}}function nU(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function rU(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(TL(e,o.selectors,!1))if(r||(r=[]),mi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;zy(n,e,c)}else r.unshift(o),zy(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function zy(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function iU(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new j(-301,!1);r.push(e[i],s)}}}function sU(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;mi(e)&&(t[""]=n)}}function oU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function aU(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=fs(i.type,!0)),o=new vs(s,mi(i),q);n.blueprint[r]=o,t[r]=o,X2(n,e,r,VA(n,t,i.hostVars,Rs),i)}function cU(n,e,t){let r=sn(e,n),i=HA(t),s=n[Zn].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Qh(n,Wh(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function uU(n,e,t,r,i,s){let o=sn(n,e);lU(e[je],o,s,n.value,t,r,i)}function lU(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?kh(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function dU(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];LA(r,t,c,l,d,f)}}function hU(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function QA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function YA(n,e){let t=n.contentQueries;if(t!==null){let r=Ie(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];E_(s),a.contentQueries(2,e[o],o)}}}finally{Ie(r)}}}function Qh(n,e){return n[$c]?n[h0][Rn]=e:n[$c]=e,n[h0]=e,e}function qy(n,e,t){E_(0);let r=Ie(null);try{e(n,t)}finally{Ie(r)}}function JA(n){return n[uh]??=[]}function ZA(n){return n.cleanup??=[]}function XA(n,e){let t=n[jo],r=t?t.get(Ar,null):null;r&&r.handleError(e)}function q_(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],d=n.data[o];LA(d,l,r,a,c,i)}}function fU(n,e,t){let r=TS(e,n);T2(n[je],r,t)}function pU(n,e){let t=wi(e,n),r=t[re];gU(r,t);let i=t[rn];i!==null&&t[Jn]===null&&(t[Jn]=O_(i,t[jo])),G_(r,t,t[Mn])}function gU(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function G_(n,e,t){C_(e);try{let r=n.viewQuery;r!==null&&qy(1,r,t);let i=n.template;i!==null&&UA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Dr]?.finishViewCreation(n),n.staticContentQueries&&YA(n,e),n.staticViewQueries&&qy(2,n.viewQuery,t);let s=n.components;s!==null&&mU(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[J]&=-5,T_()}}function mU(n,e){for(let t=0;t<e.length;t++)pU(n,e[t])}function yU(n,e,t,r){let i=Ie(null);try{let s=e.tView,a=n[J]&4096?4096:16,c=Wh(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[ms]=l;let d=n[Dr];return d!==null&&(c[Dr]=d.createEmbeddedView(s)),G_(s,c,t),c}finally{Ie(i)}}function A0(n,e){return!e||e.firstChild===null||wh(n)}function _U(n,e,t,r=!0){let i=e[re];if(A2(i,e,n,t),r){let o=Hy(t,n),a=e[je],c=MA(a,n[Sr]);c!==null&&D2(i,n[Pn],a,e,c,o)}let s=e[Jn];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Th(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(xn(s)),er(s)&&vU(s,r);let o=t.type;if(o&8)Th(n,e,t.child,r);else if(o&32){let a=V_(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=xA(e,t);if(Array.isArray(a))r.push(...a);else{let c=ys(e[mn]);Th(c[re],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function vU(n,e){for(let t=Gt;t<n.length;t++){let r=n[t],i=r[re].firstChild;i!==null&&Th(r[re],r,i,e)}n[Sr]!==n[rn]&&e.push(n[Sr])}var eR=[];function wU(n){return n[pn]??IU(n)}function IU(n){let e=eR.pop()??Object.create(CU);return e.lView=n,e}function EU(n){n.lView[pn]!==n&&(n.lView=null,eR.push(n))}var CU=me(F({},Pc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Uh(n.lView)},consumerOnSignalRead(){this.lView[pn]=this}});function TU(n){let e=n[pn]??Object.create(bU);return e.lView=n,e}var bU=me(F({},Pc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ys(n.lView);for(;e&&!tR(e[re]);)e=ys(e);e&&AS(e)},consumerOnSignalRead(){this.lView[pn]=this}});function tR(n){return n.type!==2}var DU=100;function nR(n,e=!0,t=0){let r=n[Zn],i=r.rendererFactory,s=!1;s||i.begin?.();try{SU(n,t)}catch(o){throw e&&XA(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function SU(n,e){let t=kS();try{p0(!0),Gy(n,e);let r=0;for(;Vh(n);){if(r===DU)throw new j(103,!1);r++,Gy(n,1)}}finally{p0(t)}}function AU(n,e,t,r){let i=e[J];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Zn].inlineEffectRunner?.flush(),C_(e);let a=!0,c=null,l=null;s||(tR(n)?(l=wU(e),c=md(l)):_D()===null?(a=!1,l=TU(e),c=md(l)):e[pn]&&(Om(e[pn]),e[pn]=null));try{SS(e),cV(n.bindingStartIndex),t!==null&&UA(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let y=n.preOrderCheckHooks;y!==null&&eh(e,y,null)}else{let y=n.preOrderHooks;y!==null&&th(e,y,0,null),oy(e,0)}if(o||RU(e),rR(e,0),n.contentQueries!==null&&YA(n,e),!s)if(d){let y=n.contentCheckHooks;y!==null&&eh(e,y)}else{let y=n.contentHooks;y!==null&&th(e,y,1),oy(e,1)}B2(n,e);let f=n.components;f!==null&&sR(e,f,0);let g=n.viewQuery;if(g!==null&&qy(2,g,r),!s)if(d){let y=n.viewCheckHooks;y!==null&&eh(e,y)}else{let y=n.viewHooks;y!==null&&th(e,y,2),oy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[sy]){for(let y of e[sy])y();e[sy]=null}s||(e[J]&=-73)}catch(d){throw s||Uh(e),d}finally{l!==null&&(Pm(l,c),a&&EU(l)),T_()}}function rR(n,e){for(let t=cA(n);t!==null;t=uA(t))for(let r=Gt;r<t.length;r++){let i=t[r];iR(i,e)}}function RU(n){for(let e=cA(n);e!==null;e=uA(e)){if(!(e[J]&dh.HasTransplantedViews))continue;let t=e[Bo];for(let r=0;r<t.length;r++){let i=t[r];AS(i)}}}function NU(n,e,t){let r=wi(e,n);iR(r,t)}function iR(n,e){I_(n)&&Gy(n,e)}function Gy(n,e){let r=n[re],i=n[J],s=n[pn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&km(s)),o||=!1,s&&(s.dirty=!1),n[J]&=-9217,o)AU(r,n,r.template,n[Mn]);else if(i&8192){rR(n,1);let a=r.components;a!==null&&sR(n,a,1)}}function sR(n,e,t){for(let r=0;r<e.length;r++)NU(n,e[r],t)}function W_(n,e){let t=kS()?64:1088;for(n[Zn].changeDetectionScheduler?.notify(e);n;){n[J]|=t;let r=ys(n);if(hh(n)&&!r)return n;n=r}return null}var Es=class{get rootNodes(){let e=this._lView,t=e[re];return Th(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Mn]}set context(e){this._lView[Mn]=e}get destroyed(){return(this._lView[J]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[vt];if(er(e)){let t=e[lh],r=t?t.indexOf(this):-1;r>-1&&($y(e,r),ah(t,r))}this._attachedToViewContainer=!1}RA(this._lView[re],this._lView)}onDestroy(e){RS(this._lView,e)}markForCheck(){W_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){Sy(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,nR(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=hh(this._lView),t=this._lView[ms];t!==null&&!e&&j_(t,this._lView),SA(this._lView[re],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let t=hh(this._lView),r=this._lView[ms];r!==null&&!t&&AA(r,this._lView),Sy(this._lView)}},Cs=(()=>{class n{static{this.__NG_ELEMENT_ID__=PU}}return n})(),MU=Cs,xU=class extends MU{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=yU(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Es(i)}};function PU(){return K_(jt(),be())}function K_(n,e){return n.type&4?new xU(e,n,Qo(n,e)):null}var kU=new RegExp(`^(\\d+)*(${fA}|${hA})*(.*)`);function OU(n){let e=n.match(kU),[t,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(let[c,l,d]of s.matchAll(/(f|n)(\d*)/g)){let f=parseInt(d,10)||1;a.push(l,f)}return[o,...a]}function FU(n){return!n.prev&&n.parent?.type===8}function hy(n){return n.index-wt}function LU(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Yh(n,e,t,r){let i=hy(r),s=LU(n,i);if(s===void 0){let o=n.data[n2];if(o?.[i])s=UU(o[i],t);else if(e.firstChild===r)s=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(FU(r)){let l=hy(r.parent);s=By(n,l)}else{let l=sn(c,t);if(a)s=l.firstChild;else{let d=hy(c),f=By(n,d);if(c.type===2&&f){let y=F_(n,d)+1;s=Jh(y,f)}else s=l.nextSibling}}}}return s}function Jh(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function VU(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case jy.FirstChild:t=t.firstChild;break;case jy.NextSibling:t=t.nextSibling;break}}return t}function UU(n,e){let[t,...r]=OU(n),i;if(t===hA)i=e[mn][rn];else if(t===fA)i=E2(e[mn][rn]);else{let s=Number(t);i=xn(e[s+wt])}return VU(i,r)}var jU=!1;function BU(n){jU=n}function $U(n){let e=n[Jn];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[je];for(let s of r.values())HU(i,t,s)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function HU(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-wt);i&&$_(n,i,!1)}}function oR(n){let e=n[Hc]??[],r=n[vt][je];for(let i of e)zU(i,r);n[Hc]=nn}function zU(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Ih];for(;t<i;){let s=r.nextSibling;$_(e,r,!1),r=s,t++}}}function aR(n){oR(n);let e=n[rn];Nn(e)&&bh(e);for(let t=Gt;t<n.length;t++)bh(n[t])}function bh(n){$U(n);let e=n[re];for(let t=wt;t<e.bindingStartIndex;t++)if(er(n[t])){let r=n[t];aR(r)}else Nn(n[t])&&bh(n[t])}function qU(n){let e=n._views;for(let t of e){let r=a2(t);r!==null&&r[rn]!==null&&(Nn(r)?bh(r):aR(r))}}function GU(n,e){let t=[];for(let r of e)for(let i=0;i<(r[pA]??1);i++){let s={data:r,firstChild:null};r[Ih]>0&&(s.firstChild=n,n=Jh(r[Ih],n)),t.push(s)}return[n,t]}var cR=()=>null;function WU(n,e){let t=n[Hc];return!e||t===null||t.length===0?null:t[0].data[t2]===e?t.shift():(oR(n),null)}function KU(){cR=WU}function R0(n,e){return cR(n,e)}var $o=class{},Zh=new V("",{providedIn:"root",factory:()=>!1});var uR=new V(""),lR=new V(""),Wy=class{},Dh=class{};function QU(n){let e=Error(`No component factory found for ${Vt(n)}.`);return e[YU]=n,e}var YU="ngComponent";var Ky=class{resolveComponentFactory(e){throw QU(e)}},Ho=class{static{this.NULL=new Ky}},zo=class{},Ns=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>JU()}}return n})();function JU(){let n=be(),e=jt(),t=wi(e.index,n);return(Nn(t)?t:n)[je]}var ZU=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>null})}}return n})();function Qy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=n0(i,a);else if(s==2){let c=a,l=e[++o];r=n0(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Sh=class extends Ho{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=gs(e);return new zc(t,this.ngModule)}};function N0(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:gi.None;e?t.push({propName:o,templateName:r,isSignal:(a&gi.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function XU(n){let e=n.toLowerCase();return e==="svg"?CS:e==="math"?QL:null}var zc=class extends Dh{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=N0(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return N0(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=AL(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Ie(null);try{i=i||this.ngModule;let o=i instanceof gn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Ry(e,o):e,c=a.get(zo,null);if(c===null)throw new j(407,!1);let l=a.get(ZU,null),d=a.get($o,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",E=r?z2(g,r,this.componentDef.encapsulation,a):U_(g,y,XU(y)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let N=null;E!==null&&(N=O_(E,a,!0));let L=z_(0,null,null,1,0,null,null,null,null,null,null),$=Wh(null,L,null,R,null,null,f,g,a,null,N);C_($);let H,ee,Ue=null;try{let te=this.componentDef,T,_=null;te.findHostDirectiveDefs?(T=[],_=new Map,te.findHostDirectiveDefs(te,T,_),T.push(te)):T=[te];let w=ej($,E);Ue=tj(w,E,te,T,$,f,g),ee=bS(L,wt),E&&ij(g,te,E,r),t!==void 0&&sj(ee,this.ngContentSelectors,t),H=rj(Ue,te,T,_,$,[oj]),G_(L,$,null)}catch(te){throw Ue!==null&&Vy(Ue),Vy($),te}finally{T_()}return new Yy(this.componentType,H,Qo(ee,$),$,ee)}finally{Ie(s)}}},Yy=class extends Wy{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Es(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;q_(s[re],s,i,e,t),this.previousInputValues.set(e,t);let o=wi(this._tNode.index,s);W_(o,1)}}get injector(){return new hs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ej(n,e){let t=n[re],r=wt;return n[r]=e,Kh(t,r,2,"#host",null)}function tj(n,e,t,r,i,s,o){let a=i[re];nj(r,n,e,o);let c=null;e!==null&&(c=O_(e,i[jo]));let l=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=Wh(i,HA(t),null,d,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&zy(a,n,r.length-1),Qh(i,f),i[n.index]=f}function nj(n,e,t,r){for(let i of n)e.mergedAttrs=jc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Qy(e,e.mergedAttrs,!0),t!==null&&OA(r,t,e))}function rj(n,e,t,r,i,s){let o=jt(),a=i[re],c=sn(o,i);WA(a,i,o,t,null,r);for(let d=0;d<t.length;d++){let f=o.directiveStart+d,g=ws(i,a,f,o);Is(g,i)}KA(a,i,o),c&&Is(c,i);let l=ws(i,a,o.directiveStart+o.componentOffset,o);if(n[Mn]=i[Mn]=l,s!==null)for(let d of s)d(l,e);return jA(a,o,i),l}function ij(n,e,t,r){if(r)Ey(n,t,["ng-version","18.2.6"]);else{let{attrs:i,classes:s}=RL(e.selectors[0]);i&&Ey(n,t,i),s&&s.length>0&&kA(n,t,s.join(" "))}}function sj(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function oj(){let n=jt();S_(be()[re],n)}var bi=(()=>{class n{static{this.__NG_ELEMENT_ID__=aj}}return n})();function aj(){let n=jt();return hR(n,be())}var cj=bi,dR=class extends cj{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Qo(this._hostTNode,this._hostLView)}get injector(){return new hs(this._hostTNode,this._hostLView)}get parentInjector(){let e=A_(this._hostTNode,this._hostLView);if(qS(e)){let t=gh(e,this._hostLView),r=ph(e),i=t[re].data[r+8];return new hs(i,t)}else return new hs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=M0(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Gt}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=R0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,A0(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!qL(e),a;if(o)a=t;else{let E=t||{};a=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}let c=o?e:new zc(gs(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let R=(o?l:this.parentInjector).get(gn,null);R&&(s=R)}let d=gs(c.componentType??{}),f=R0(this._lContainer,d?.id??null),g=f?.firstChild??null,y=c.create(l,i,g,s);return this.insertImpl(y.hostView,a,A0(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(JL(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[vt],l=new dR(c,c[Pn],c[vt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return _U(o,i,s,r),e.attachToViewContainerRef(),eS(fy(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=M0(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=$y(this._lContainer,t);r&&(ah(fy(this._lContainer),t),RA(r[re],r))}detach(e){let t=this._adjustIndex(e,-1),r=$y(this._lContainer,t);return r&&ah(fy(this._lContainer),t)!=null?new Es(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function M0(n){return n[lh]}function fy(n){return n[lh]||(n[lh]=[])}function hR(n,e){let t,r=e[n.index];return er(r)?t=r:(t=QA(r,e,null,n),e[n.index]=t,Qh(e,t)),fR(t,e,n,r),new dR(t,n,e)}function uj(n,e){let t=n[je],r=t.createComment(""),i=sn(e,n),s=MA(t,i);return Ch(t,s,r,P2(t,i),!1),r}var fR=pR,Q_=()=>!1;function lj(n,e,t){return Q_(n,e,t)}function pR(n,e,t,r){if(n[Sr])return;let i;t.type&8?i=xn(r):i=uj(e,t),n[Sr]=i}function dj(n,e,t){if(n[Sr]&&n[Hc])return!0;let r=t[Jn],i=e.index-wt;if(!r||GV(e)||Zc(r,i))return!1;let o=By(r,i),a=r.data[k_]?.[i],[c,l]=GU(o,a);return n[Sr]=c,n[Hc]=l,!0}function hj(n,e,t,r){Q_(n,t,e)||pR(n,e,t,r)}function fj(){fR=hj,Q_=dj}var Jy=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Zy=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Y_(e,t).matches!==null&&this.queries[t].setDirty()}},Xy=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=Ij(e):this.predicate=e}},e_=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},t_=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,pj(t,s)),this.matchTNodeWithReadOption(e,t,nh(t,e,s,!1,!1))}else r===Cs?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,nh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===kn||i===bi||i===Cs&&t.type&4)this.addMatch(t.index,-2);else{let s=nh(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function pj(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function gj(n,e){return n.type&11?Qo(n,e):n.type&4?K_(n,e):null}function mj(n,e,t,r){return t===-1?gj(e,n):t===-2?yj(n,e,r):ws(n,n[re],t,e)}function yj(n,e,t){if(t===kn)return Qo(e,n);if(t===Cs)return K_(e,n);if(t===bi)return hR(e,n)}function gR(n,e,t,r){let i=e[Dr].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let d=s[l];a.push(mj(e,d,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function n_(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=gR(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],d=e[-c];for(let f=Gt;f<d.length;f++){let g=d[f];g[ms]===g[vt]&&n_(g[re],g,l,r)}if(d[Bo]!==null){let f=d[Bo];for(let g=0;g<f.length;g++){let y=f[g];n_(y[re],y,l,r)}}}}}return r}function _j(n,e){return n[Dr].queries[e].queryList}function vj(n,e,t){let r=new Ly((t&4)===4);return K2(n,e,r,r.destroy),(e[Dr]??=new Zy).queries.push(new Jy(r))-1}function wj(n,e,t){let r=Nt();return r.firstCreatePass&&(Ej(r,new Xy(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),vj(r,be(),e)}function Ij(n){return n.split(",").map(e=>e.trim())}function Ej(n,e,t){n.queries===null&&(n.queries=new e_),n.queries.track(new t_(e,t))}function Y_(n,e){return n.queries.getByIndex(e)}function Cj(n,e){let t=n[re],r=Y_(t,e);return r.crossesNgTemplate?n_(t,n,e,[]):gR(t,n,r,e)}var x0=new Set;function Di(n){x0.has(n)||(x0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Tj(n){return typeof n=="function"&&n[Cr]!==void 0}function eu(n,e){Di("NgSignals");let t=RD(n),r=t[Cr];return e?.equal&&(r.equal=e.equal),t.set=i=>Fm(r,i),t.update=i=>ND(r,i),t.asReadonly=bj.bind(t),t}function bj(){let n=this[Cr];if(n.readonlyFn===void 0){let e=()=>this();e[Cr]=n,n.readonlyFn=e}return n.readonlyFn}function mR(n){return Tj(n)&&typeof n.set=="function"}function Dj(n){return Object.getPrototypeOf(n.prototype).constructor}function Mr(n){let e=Dj(n.type),t=!0,r=[n];for(;e;){let i;if(mi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Qd(n.inputs),o.inputTransforms=Qd(n.inputTransforms),o.declaredInputs=Qd(n.declaredInputs),o.outputs=Qd(n.outputs);let a=i.hostBindings;a&&Mj(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&Rj(n,c),l&&Nj(n,l),Sj(n,i),KF(n.outputs,i.outputs),mi(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Mr&&(t=!1)}}e=Object.getPrototypeOf(e)}Aj(r)}function Sj(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function Aj(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=jc(i.hostAttrs,t=jc(t,i.hostAttrs))}}function Qd(n){return n===Vo?{}:n===nn?[]:n}function Rj(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Nj(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function Mj(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function J_(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var yi=class{},qc=class{};var r_=class extends yi{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Sh(this);let s=uS(e);this._bootstrapComponents=TA(s.bootstrap),this._r3Injector=eA(e,t,[{provide:yi,useValue:this},{provide:Ho,useValue:this.componentFactoryResolver},...r],Vt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},i_=class extends qc{constructor(e){super(),this.moduleType=e}create(e){return new r_(this.moduleType,e,[])}};var Ah=class extends yi{constructor(e){super(),this.componentFactoryResolver=new Sh(this),this.instance=null;let t=new Bc([...e.providers,{provide:yi,useValue:this},{provide:Ho,useValue:this.componentFactoryResolver}],e.parent||v_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Z_(n,e,t=null){return new Ah({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function yR(n){return Pj(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function xj(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Pj(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function _R(n,e,t){return n[e]=t}function _i(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function kj(n,e,t,r){let i=_i(n,e,t);return _i(n,e+1,r)||i}function tu(n){return(n.flags&32)===32}function Oj(n,e,t,r,i,s,o,a,c){let l=e.consts,d=Kh(e,n,4,o||null,a||null);GA(e,t,d,fh(l,c)),S_(e,d);let f=d.tView=z_(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function Fj(n,e,t,r,i,s,o,a,c,l){let d=t+wt,f=e.firstCreatePass?Oj(d,e,n,r,i,s,o,a,c):e.data[d];Jc(f,!1);let g=vR(e,n,f,t);D_()&&B_(e,n,g,f),Is(g,n);let y=QA(g,n,g,f);return n[d]=y,Qh(n,y),lj(y,f,n),w_(f)&&BA(e,n,f),c!=null&&$A(n,f,l),f}function _n(n,e,t,r,i,s,o,a){let c=be(),l=Nt(),d=fh(l.consts,s);return Fj(c,l,n,e,t,r,i,d,o,a),_n}var vR=wR;function wR(n,e,t,r){return Ti(!0),e[je].createComment("")}function Lj(n,e,t,r){let i=e[Jn],s=!i||Yc()||tu(t)||Zc(i,r);if(Ti(s),s)return wR(n,e,t,r);let o=i.data[e2]?.[r]??null;o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o);let a=Yh(i,n,e,t);zh(i,r,a);let c=F_(i,r);return Jh(c,a)}function Vj(){vR=Lj}var Lc=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Lc||{}),Uj=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})(),P0=class n{constructor(){this.ngZone=x(Te),this.scheduler=x($o),this.errorHandler=x(Ar,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Lc.EarlyRead,Lc.Write,Lc.MixedReadWrite,Lc.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}};function nu(n,e,t,r){let i=be(),s=jh();if(_i(i,s,e)){let o=Nt(),a=b_();uU(a,i,n,e,t,r)}return nu}function jj(n,e,t,r){return _i(n,jh(),t)?e+kh(t)+r:Rs}function Yd(n,e){return n<<17|e<<2}function Ts(n){return n>>17&32767}function Bj(n){return(n&2)==2}function $j(n,e){return n&131071|e<<17}function s_(n){return n|2}function qo(n){return(n&131068)>>2}function py(n,e){return n&-131069|e<<2}function Hj(n){return(n&1)===1}function o_(n){return n|1}function zj(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ts(o),c=qo(o);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Kc(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let g=Ts(n[a+1]);n[r+1]=Yd(g,a),g!==0&&(n[g+1]=py(n[g+1],r)),n[a+1]=$j(n[a+1],r)}else n[r+1]=Yd(a,0),a!==0&&(n[a+1]=py(n[a+1],r)),a=r;else n[r+1]=Yd(c,0),a===0?a=r:n[c+1]=py(n[c+1],r),c=r;l&&(n[r+1]=s_(n[r+1])),k0(n,d,r,!0),k0(n,d,r,!1),qj(e,d,n,r,s),o=Yd(a,c),s?e.classBindings=o:e.styleBindings=o}function qj(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Kc(s,e)>=0&&(t[r+1]=o_(t[r+1]))}function k0(n,e,t,r){let i=n[t+1],s=e===null,o=r?Ts(i):qo(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];Gj(c,e)&&(a=!0,n[o+1]=r?o_(l):s_(l)),o=r?Ts(l):qo(l)}a&&(n[t+1]=r?s_(i):o_(i))}function Gj(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Kc(n,e)>=0:!1}function Et(n,e,t){let r=be(),i=jh();if(_i(r,i,e)){let s=Nt(),o=b_();qA(s,o,r,n,e,r[je],t,!1)}return Et}function O0(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";q_(n,t,s[o],o,r)}function Jo(n,e){return Wj(n,e,null,!0),Jo}function Wj(n,e,t,r){let i=be(),s=Nt(),o=uV(2);if(s.firstUpdatePass&&Qj(s,n,o,r),e!==Rs&&_i(i,o,e)){let a=s.data[Wo()];eB(s,a,i,i[je],n,i[o+1]=tB(e,t),r,o)}}function Kj(n,e){return e>=n.expandoStartIndex}function Qj(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Wo()],o=Kj(n,t);nB(s,r)&&e===null&&!o&&(e=!1),e=Yj(i,s,e,r),zj(i,s,e,t,o,r)}}function Yj(n,e,t,r){let i=fV(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=gy(null,n,e,t,r),t=Gc(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=gy(i,n,e,t,r),s===null){let c=Jj(n,e,r);c!==void 0&&Array.isArray(c)&&(c=gy(null,n,e,c[1],r),c=Gc(c,e.attrs,r),Zj(n,e,r,c))}else s=Xj(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function Jj(n,e,t){let r=t?e.classBindings:e.styleBindings;if(qo(r)!==0)return n[Ts(r)]}function Zj(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ts(i)]=r}function Xj(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Gc(r,o,t)}return Gc(r,e.attrs,t)}function gy(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Gc(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Gc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),mL(n,o,t?!0:e[++s]))}return n===void 0?null:n}function eB(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=Hj(l)?F0(c,e,t,i,qo(l),o):void 0;if(!Rh(d)){Rh(s)||Bj(l)&&(s=F0(c,null,t,i,a,o));let f=TS(Wo(),t);U2(r,o,f,i,s)}}function F0(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=t[i+1];g===Rs&&(g=f?nn:void 0);let y=f?ry(g,r):d===r?g:void 0;if(l&&!Rh(y)&&(y=ry(c,r)),Rh(y)&&(a=y,o))return a;let E=n[i+1];i=o?Ts(E):qo(E)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=ry(c,r))}return a}function Rh(n){return n!==void 0}function tB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Vt(Xc(n)))),n}function nB(n,e){return(n.flags&(e?8:16))!==0}function rB(n,e,t,r,i,s){let o=e.consts,a=fh(o,i),c=Kh(e,n,2,r,a);return GA(e,t,c,fh(o,s)),c.attrs!==null&&Qy(c,c.attrs,!1),c.mergedAttrs!==null&&Qy(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function G(n,e,t,r){let i=be(),s=Nt(),o=wt+n,a=i[je],c=s.firstCreatePass?rB(o,s,i,e,t,r):s.data[o],l=IR(s,i,c,a,e,n);i[o]=l;let d=w_(c);return Jc(c,!0),OA(a,l,c),!tu(c)&&D_()&&B_(s,i,l,c),eV()===0&&Is(l,i),tV(),d&&(BA(s,i,c),jA(s,c,i)),r!==null&&$A(i,c),G}function Q(){let n=jt();PS()?aV():(n=n.parent,Jc(n,!1));let e=n;rV(e)&&sV(),nV();let t=Nt();return t.firstCreatePass&&(S_(t,n),_S(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&wV(e)&&O0(t,e,be(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&IV(e)&&O0(t,e,be(),e.stylesWithoutHost,!1),Q}function Bt(n,e,t,r){return G(n,e,t,r),Q(),Bt}var IR=(n,e,t,r,i,s)=>(Ti(!0),U_(r,i,$S()));function iB(n,e,t,r,i,s){let o=e[Jn],a=!o||Yc()||tu(t)||Zc(o,s);if(Ti(a),a)return U_(r,i,$S());let c=Yh(o,n,e,t);return _A(o,s)&&zh(o,s,c.nextSibling),o&&(sA(t)||oA(c))&&Qc(t)&&(iV(t),PA(c)),c}function sB(){IR=iB}var oB=(n,e,t,r)=>(Ti(!0),DA(e[je],""));function aB(n,e,t,r){let i,s=e[Jn],o=!s||Yc()||Zc(s,r)||tu(t);if(Ti(o),o)return DA(e[je],"");let a=Yh(s,n,e,t),c=l2(s,r);return zh(s,r,a),i=Jh(c,a),i}function cB(){oB=aB}function Zo(){return be()}var ls=void 0;function uB(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var lB=["en",[["a","p"],["AM","PM"],ls],[["AM","PM"],ls,ls],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ls,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ls,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ls,"{1} 'at' {0}",ls],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",uB],my={};function vn(n){let e=dB(n),t=L0(e);if(t)return t;let r=e.split("-")[0];if(t=L0(r),t)return t;if(r==="en")return lB;throw new j(701,!1)}function L0(n){return n in my||(my[n]=ds.ng&&ds.ng.common&&ds.ng.common.locales&&ds.ng.common.locales[n]),my[n]}var et=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(et||{});function dB(n){return n.toLowerCase().replace(/_/g,"-")}var Nh="en-US";var hB=Nh;function fB(n){typeof n=="string"&&(hB=n.toLowerCase().replace(/_/g,"-"))}var pB=(n,e,t)=>{};function Be(n,e,t,r){let i=be(),s=Nt(),o=jt();return ER(s,i,i[je],o,n,e,r),Be}function gB(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[uh],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function ER(n,e,t,r,i,s,o){let a=w_(r),l=n.firstCreatePass&&ZA(n),d=e[Mn],f=JA(e),g=!0;if(r.type&3||o){let R=sn(r,e),N=o?o(R):R,L=f.length,$=o?ee=>o(xn(ee[r.index])):r.index,H=null;if(!o&&a&&(H=gB(n,e,i,r.index)),H!==null){let ee=H.__ngLastListenerFn__||H;ee.__ngNextListenerFn__=s,H.__ngLastListenerFn__=s,g=!1}else{s=U0(r,e,d,s),pB(R,i,s);let ee=t.listen(N,i,s);f.push(s,ee),l&&l.push(i,$,L,L+1)}}else s=U0(r,e,d,s);let y=r.outputs,E;if(g&&y!==null&&(E=y[i])){let R=E.length;if(R)for(let N=0;N<R;N+=2){let L=E[N],$=E[N+1],Ue=e[L][$].subscribe(s),te=f.length;f.push(s,Ue),l&&l.push(i,r.index,te,-(te+1))}}}function V0(n,e,t,r){let i=Ie(null);try{return Kn(6,e,t),t(r)!==!1}catch(s){return XA(n,s),!1}finally{Kn(7,e,t),Ie(i)}}function U0(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?wi(n.index,e):e;W_(o,5);let a=V0(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=V0(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Xo(n=1){return gV(n)}function CR(n,e,t){wj(n,e,t)}function X_(n){let e=be(),t=Nt(),r=FS();E_(r+1);let i=Y_(t,r);if(n.dirty&&YL(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=Cj(e,r);n.reset(s,$V),n.notifyOnChanges()}return!0}return!1}function ev(){return _j(be(),FS())}function mB(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Me(n,e=""){let t=be(),r=Nt(),i=n+wt,s=r.firstCreatePass?Kh(r,i,1,e,null):r.data[i],o=TR(r,t,s,e,n);t[i]=o,D_()&&B_(r,t,o,s),Jc(s,!1)}var TR=(n,e,t,r,i)=>(Ti(!0),bA(e[je],r));function yB(n,e,t,r,i){let s=e[Jn],o=!s||Yc()||tu(t)||Zc(s,i);return Ti(o),o?bA(e[je],r):Yh(s,n,e,t)}function _B(){TR=yB}function Xh(n){return ef("",n,""),Xh}function ef(n,e,t){let r=be(),i=jj(r,n,e,t);return i!==Rs&&fU(r,Wo(),i),ef}function tr(n,e,t){mR(e)&&(e=e());let r=be(),i=jh();if(_i(r,i,e)){let s=Nt(),o=b_();qA(s,o,r,n,e,r[je],t,!1)}return tr}function xr(n,e){let t=mR(n);return t&&n.set(e),t}function nr(n,e){let t=be(),r=Nt(),i=jt();return ER(r,t,t[je],i,n,e),nr}function vB(n,e,t){let r=Nt();if(r.firstCreatePass){let i=mi(n);a_(t,r.data,r.blueprint,i,!0),a_(e,r.data,r.blueprint,i,!1)}}function a_(n,e,t,r,i){if(n=Lt(n),Array.isArray(n))for(let s=0;s<n.length;s++)a_(n[s],e,t,r,i);else{let s=Nt(),o=be(),a=jt(),c=Uo(n)?n:Lt(n.provide),l=gS(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Uo(n)||!n.multi){let y=new vs(l,i,q),E=_y(c,e,i?d:d+g,f);E===-1?(My(yh(a,o),s,c),yy(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[E]=y,o[E]=y)}else{let y=_y(c,e,d+g,f),E=_y(c,e,d,d+g),R=y>=0&&t[y],N=E>=0&&t[E];if(i&&!N||!i&&!R){My(yh(a,o),s,c);let L=EB(i?IB:wB,t.length,i,r,l);!i&&N&&(t[E].providerFactory=L),yy(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(L),o.push(L)}else{let L=bR(t[i?E:y],l,!i&&r);yy(s,n,y>-1?y:E,L)}!i&&r&&N&&t[E].componentProviders++}}}function yy(n,e,t,r){let i=Uo(e),s=LL(e);if(i||s){let c=(s?Lt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function bR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function _y(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function wB(n,e,t,r){return c_(this.multi,[])}function IB(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ws(t,t[re],this.providerFactory.index,r);s=a.slice(0,o),c_(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],c_(i,s);return s}function c_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function EB(n,e,t,r,i){let s=new vs(n,t,q);return s.multi=[],s.index=e,s.componentProviders=0,bR(s,i,r&&!t),s}function ru(n,e=[]){return t=>{t.providersResolver=(r,i)=>vB(r,i?i(n):n,e)}}var CB=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=hS(!1,t.type),i=r.length>0?Z_([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=z({token:n,providedIn:"environment",factory:()=>new n(ie(gn))})}}return n})();function gt(n){Di("NgStandalone"),n.getStandaloneInjector=e=>e.get(CB).getOrCreateStandaloneInjector(n)}function DR(n,e){let t=n[e];return t===Rs?void 0:t}function TB(n,e,t,r,i,s){let o=e+t;return _i(n,o,i)?_R(n,o+1,s?r.call(s,i):r(i)):DR(n,o+1)}function bB(n,e,t,r,i,s,o){let a=e+t;return kj(n,a,i,s)?_R(n,a+2,o?r.call(o,i,s):r(i,s)):DR(n,a+2)}function tv(n,e){let t=Nt(),r,i=n+wt;t.firstCreatePass?(r=DB(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=fs(r.type,!0)),o,a=qt(q);try{let c=mh(!1),l=s();return mh(c),mB(t,be(),i,l),l}finally{qt(a)}}function DB(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function SR(n,e,t){let r=n+wt,i=be(),s=DS(i,r);return RR(i,r)?TB(i,OS(),e,s.transform,t,s):s.transform(t)}function AR(n,e,t,r){let i=n+wt,s=be(),o=DS(s,i);return RR(s,i)?bB(s,OS(),e,o.transform,t,r,o):o.transform(t,r)}function RR(n,e){return n[re].data[e].pure}var Nr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},NR=new Nr("18.2.6");var tf=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var MR=new V("");function Si(n){return!!n&&typeof n.then=="function"}function nv(n){return!!n&&typeof n.subscribe=="function"}var xR=new V(""),PR=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=x(xR,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Si(s))t.push(s);else if(nv(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ea=new V("");function SB(){AD(()=>{throw new j(600,!1)})}function AB(n){return n.isBoundToModule}var RB=10;function NB(n,e,t){try{let r=t();return Si(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var rr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=x(jV),this.afterRenderManager=x(Uj),this.zonelessEnabled=x(Zh),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ht,this.afterTick=new ht,this.componentTypes=[],this.components=[],this.isStable=x(As).hasPendingTasks.pipe(de(t=>!t)),this._injector=x(gn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Dh;if(!this._injector.get(PR).done){let g=!i&&cS(t),y=!1;throw new j(405,y)}let o;i?o=t:o=this._injector.get(Ho).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=AB(o)?void 0:this._injector.get(yi),c=r||o.selector,l=o.create(ft.NULL,[],c,a),d=l.location.nativeElement,f=l.injector.get(MR,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),rh(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new j(101,!1);let t=Ie(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ie(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(zo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<RB;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)MB(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Vh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;rh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(ea,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>rh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new j(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function rh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Jd;function nf(n){Jd??=new WeakMap;let e=Jd.get(n);if(e)return e;let t=n.isStable.pipe(Sn(r=>r)).toPromise().then(()=>{});return Jd.set(n,t),n.onDestroy(()=>Jd?.delete(n)),t}function MB(n,e,t,r){if(!t&&!Vh(n))return;nR(n,e,t&&!r?0:1)}var u_=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},rv=(()=>{class n{compileModuleSync(t){return new i_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=uS(t),s=TA(i.declarations).reduce((o,a)=>{let c=gs(a);return c&&o.push(new zc(c)),o},[]);return new u_(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var xB=(()=>{class n{constructor(){this.zone=x(Te),this.changeDetectionScheduler=x($o),this.applicationRef=x(rr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),PB=new V("",{factory:()=>!1});function kR({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Te(me(F({},FR()),{scheduleInRootZone:t})),[{provide:Te,useFactory:n},{provide:ps,multi:!0,useFactory:()=>{let r=x(xB,{optional:!0});return()=>r.initialize()}},{provide:ps,multi:!0,useFactory:()=>{let r=x(kB);return()=>{r.initialize()}}},e===!0?{provide:uR,useValue:!0}:[],{provide:lR,useValue:t??tA}]}function OR(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=kR({ngZoneFactory:()=>{let i=FR(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Di("NgZone_CoalesceEvent"),new Te(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Ut([{provide:PB,useValue:!0},{provide:Zh,useValue:!1},r])}function FR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var kB=(()=>{class n{constructor(){this.subscription=new Ge,this.initialized=!1,this.zone=x(Te),this.pendingTasks=x(As)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Te.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Te.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var OB=(()=>{class n{constructor(){this.appRef=x(rr),this.taskService=x(As),this.ngZone=x(Te),this.zonelessEnabled=x(Zh),this.disableScheduling=x(uR,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ge,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(vh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(lR,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Fy||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?v0:rA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(vh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,v0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function FB(){return typeof $localize<"u"&&$localize.locale||Nh}var rf=new V("",{providedIn:"root",factory:()=>x(rf,le.Optional|le.SkipSelf)||FB()});var LR=new V("");function Zd(n){return!!n.platformInjector}function LB(n){let e=Zd(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Te);return t.run(()=>{Zd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Ar,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Zd(n)){let s=()=>e.destroy(),o=n.platformInjector.get(LR);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else n.moduleRef.onDestroy(()=>{rh(n.allPlatformModules,n.moduleRef),i.unsubscribe()});return NB(r,t,()=>{let s=e.get(PR);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(rf,Nh);if(fB(o||Nh),Zd(n)){let a=e.get(rr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return VB(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function VB(n,e){let t=n.injector.get(rr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new j(-403,!1);e.push(n)}var ih=null;function UB(n=[],e){return ft.create({name:e,providers:[{provide:Fh,useValue:"platform"},{provide:LR,useValue:new Set([()=>ih=null])},...n]})}function jB(n=[]){if(ih)return ih;let e=UB(n);return ih=e,SB(),BB(e),e}function BB(n){n.get(x_,null)?.forEach(t=>t())}var Ai=(()=>{class n{static{this.__NG_ELEMENT_ID__=$B}}return n})();function $B(n){return HB(jt(),be(),(n&16)===16)}function HB(n,e,t){if(Qc(n)&&!t){let r=wi(n.index,e);return new Es(r,r)}else if(n.type&175){let r=e[mn];return new Es(r,e)}return null}var l_=class{constructor(){}supports(e){return yR(e)}create(e){return new d_(e)}},zB=(n,e)=>e,d_=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||zB}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<j0(r,i,s)?t:r,a=j0(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let g=0;g<l;g++){let y=g<s.length?s[g]:s[g]=0,E=y+g;d<=E&&E<l&&(s[g]=y+1)}let f=o.previousIndex;s[f]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!yR(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,xj(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new h_(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Mh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Mh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},h_=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},f_=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Mh=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new f_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function j0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function B0(){return new iv([new l_])}var iv=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:B0})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||B0()),deps:[[n,new X0,new nt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new j(901,!1)}}return n})();function VR(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=jB(r),s=[kR({}),{provide:$o,useExisting:OB},...t||[]],o=new Ah({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return LB({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var UR=new V("");var $0=!1;function qB(){$0||($0=!0,o2(),sB(),_B(),cB(),Vj(),fj(),KU(),W2())}function GB(n,e){return nf(n)}function jR(){return Ut([{provide:Gd,useFactory:()=>{let n=!0;return Kd()&&(n=!!x(Yo,{optional:!0})?.get(mA,null)),n&&Di("NgHydration"),n}},{provide:ps,useValue:()=>{BU(!1),Kd()&&x(Gd)&&(WB(),qB())},multi:!0},{provide:wA,useFactory:()=>Kd()&&x(Gd)},{provide:ea,useFactory:()=>{if(Kd()&&x(Gd)){let n=x(rr),e=x(ft);return()=>{GB(n,e).then(()=>{qU(n)})}}return()=>{}},multi:!0}])}function WB(){let n=$h(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===i2){e=t;break}if(!e)throw new j(-507,!1)}function Ri(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function iu(n,e){Di("NgSignals");let t=bD(n);return e?.equal&&(t[Cr].equal=e.equal),t}function On(n){let e=Ie(null);try{return n()}finally{Ie(e)}}var GR=null;function Or(){return GR}function WR(n){GR??=n}var ff=class{};var Wt=new V(""),KR=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>x(KB),providedIn:"platform"})}}return n})();var KB=(()=>{class n extends KR{constructor(){super(),this._doc=x(Wt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Or().getBaseHref(this._doc)}onPopState(t){let r=Or().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Or().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function QR(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function BR(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Ms(n){return n&&n[0]!=="?"?"?"+n:n}var ta=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>x(YR),providedIn:"root"})}}return n})(),QB=new V(""),YR=(()=>{class n extends ta{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(Wt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return QR(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ms(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ms(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ms(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ie(KR),ie(QB,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var su=(()=>{class n{constructor(t){this._subject=new Xe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=ZB(BR($R(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ms(r))}normalize(t){return n.stripTrailingSlash(JB(this._basePath,$R(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ms(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ms(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Ms}static{this.joinWithSlash=QR}static{this.stripTrailingSlash=BR}static{this.\u0275fac=function(r){return new(r||n)(ie(ta))}}static{this.\u0275prov=z({token:n,factory:()=>YB(),providedIn:"root"})}}return n})();function YB(){return new su(ie(ta))}function JB(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function $R(n){return n.replace(/\/index.html$/,"")}function ZB(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Ht=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Ht||{}),ke=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(ke||{}),on=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(on||{}),Ni={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function XB(n){return vn(n)[et.LocaleId]}function e$(n,e,t){let r=vn(n),i=[r[et.DayPeriodsFormat],r[et.DayPeriodsStandalone]],s=wn(i,e);return wn(s,t)}function t$(n,e,t){let r=vn(n),i=[r[et.DaysFormat],r[et.DaysStandalone]],s=wn(i,e);return wn(s,t)}function n$(n,e,t){let r=vn(n),i=[r[et.MonthsFormat],r[et.MonthsStandalone]],s=wn(i,e);return wn(s,t)}function r$(n,e){let r=vn(n)[et.Eras];return wn(r,e)}function sf(n,e){let t=vn(n);return wn(t[et.DateFormat],e)}function of(n,e){let t=vn(n);return wn(t[et.TimeFormat],e)}function af(n,e){let r=vn(n)[et.DateTimeFormat];return wn(r,e)}function mf(n,e){let t=vn(n),r=t[et.NumberSymbols][e];if(typeof r>"u"){if(e===Ni.CurrencyDecimal)return t[et.NumberSymbols][Ni.Decimal];if(e===Ni.CurrencyGroup)return t[et.NumberSymbols][Ni.Group]}return r}function JR(n){if(!n[et.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[et.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function i$(n){let e=vn(n);return JR(e),(e[et.ExtraData][2]||[]).map(r=>typeof r=="string"?sv(r):[sv(r[0]),sv(r[1])])}function s$(n,e,t){let r=vn(n);JR(r);let i=[r[et.ExtraData][0],r[et.ExtraData][1]],s=wn(i,e)||[];return wn(s,t)||[]}function wn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function sv(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var o$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,cf={},a$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,kr=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(kr||{}),Se=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Se||{}),De=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(De||{});function c$(n,e,t,r){let i=y$(n);e=Pr(t,e)||e;let o=[],a;for(;e;)if(a=a$.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=XR(r,c),i=m$(i,r,!0));let l="";return o.forEach(d=>{let f=p$(d);l+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function pf(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Pr(n,e){let t=XB(n);if(cf[t]??={},cf[t][e])return cf[t][e];let r="";switch(e){case"shortDate":r=sf(n,on.Short);break;case"mediumDate":r=sf(n,on.Medium);break;case"longDate":r=sf(n,on.Long);break;case"fullDate":r=sf(n,on.Full);break;case"shortTime":r=of(n,on.Short);break;case"mediumTime":r=of(n,on.Medium);break;case"longTime":r=of(n,on.Long);break;case"fullTime":r=of(n,on.Full);break;case"short":let i=Pr(n,"shortTime"),s=Pr(n,"shortDate");r=uf(af(n,on.Short),[i,s]);break;case"medium":let o=Pr(n,"mediumTime"),a=Pr(n,"mediumDate");r=uf(af(n,on.Medium),[o,a]);break;case"long":let c=Pr(n,"longTime"),l=Pr(n,"longDate");r=uf(af(n,on.Long),[c,l]);break;case"full":let d=Pr(n,"fullTime"),f=Pr(n,"fullDate");r=uf(af(n,on.Full),[d,f]);break}return r&&(cf[t][e]=r),r}function uf(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Fn(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function u$(n,e){return Fn(n,3).substring(0,e)}function rt(n,e,t=0,r=!1,i=!1){return function(s,o){let a=l$(n,s);if((t>0||a>-t)&&(a+=t),n===Se.Hours)a===0&&t===-12&&(a=12);else if(n===Se.FractionalSeconds)return u$(a,e);let c=mf(o,Ni.MinusSign);return Fn(a,e,c,r,i)}}function l$(n,e){switch(n){case Se.FullYear:return e.getFullYear();case Se.Month:return e.getMonth();case Se.Date:return e.getDate();case Se.Hours:return e.getHours();case Se.Minutes:return e.getMinutes();case Se.Seconds:return e.getSeconds();case Se.FractionalSeconds:return e.getMilliseconds();case Se.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Fe(n,e,t=Ht.Format,r=!1){return function(i,s){return d$(i,s,n,e,t,r)}}function d$(n,e,t,r,i,s){switch(t){case De.Months:return n$(e,i,r)[n.getMonth()];case De.Days:return t$(e,i,r)[n.getDay()];case De.DayPeriods:let o=n.getHours(),a=n.getMinutes();if(s){let l=i$(e),d=s$(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[y,E]=g,R=o>=y.hours&&a>=y.minutes,N=o<E.hours||o===E.hours&&a<E.minutes;if(y.hours<E.hours){if(R&&N)return!0}else if(R||N)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return e$(e,i,r)[o<12?0:1];case De.Eras:return r$(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function lf(n){return function(e,t,r){let i=-1*r,s=mf(t,Ni.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case kr.Short:return(i>=0?"+":"")+Fn(o,2,s)+Fn(Math.abs(i%60),2,s);case kr.ShortGMT:return"GMT"+(i>=0?"+":"")+Fn(o,1,s);case kr.Long:return"GMT"+(i>=0?"+":"")+Fn(o,2,s)+":"+Fn(Math.abs(i%60),2,s);case kr.Extended:return r===0?"Z":(i>=0?"+":"")+Fn(o,2,s)+":"+Fn(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var h$=0,hf=4;function f$(n){let e=pf(n,h$,1).getDay();return pf(n,0,1+(e<=hf?hf:hf+7)-e)}function ZR(n){let e=n.getDay(),t=e===0?-3:hf-e;return pf(n.getFullYear(),n.getMonth(),n.getDate()+t)}function ov(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=ZR(t),o=f$(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Fn(i,n,mf(r,Ni.MinusSign))}}function df(n,e=!1){return function(t,r){let s=ZR(t).getFullYear();return Fn(s,n,mf(r,Ni.MinusSign),e)}}var av={};function p$(n){if(av[n])return av[n];let e;switch(n){case"G":case"GG":case"GGG":e=Fe(De.Eras,ke.Abbreviated);break;case"GGGG":e=Fe(De.Eras,ke.Wide);break;case"GGGGG":e=Fe(De.Eras,ke.Narrow);break;case"y":e=rt(Se.FullYear,1,0,!1,!0);break;case"yy":e=rt(Se.FullYear,2,0,!0,!0);break;case"yyy":e=rt(Se.FullYear,3,0,!1,!0);break;case"yyyy":e=rt(Se.FullYear,4,0,!1,!0);break;case"Y":e=df(1);break;case"YY":e=df(2,!0);break;case"YYY":e=df(3);break;case"YYYY":e=df(4);break;case"M":case"L":e=rt(Se.Month,1,1);break;case"MM":case"LL":e=rt(Se.Month,2,1);break;case"MMM":e=Fe(De.Months,ke.Abbreviated);break;case"MMMM":e=Fe(De.Months,ke.Wide);break;case"MMMMM":e=Fe(De.Months,ke.Narrow);break;case"LLL":e=Fe(De.Months,ke.Abbreviated,Ht.Standalone);break;case"LLLL":e=Fe(De.Months,ke.Wide,Ht.Standalone);break;case"LLLLL":e=Fe(De.Months,ke.Narrow,Ht.Standalone);break;case"w":e=ov(1);break;case"ww":e=ov(2);break;case"W":e=ov(1,!0);break;case"d":e=rt(Se.Date,1);break;case"dd":e=rt(Se.Date,2);break;case"c":case"cc":e=rt(Se.Day,1);break;case"ccc":e=Fe(De.Days,ke.Abbreviated,Ht.Standalone);break;case"cccc":e=Fe(De.Days,ke.Wide,Ht.Standalone);break;case"ccccc":e=Fe(De.Days,ke.Narrow,Ht.Standalone);break;case"cccccc":e=Fe(De.Days,ke.Short,Ht.Standalone);break;case"E":case"EE":case"EEE":e=Fe(De.Days,ke.Abbreviated);break;case"EEEE":e=Fe(De.Days,ke.Wide);break;case"EEEEE":e=Fe(De.Days,ke.Narrow);break;case"EEEEEE":e=Fe(De.Days,ke.Short);break;case"a":case"aa":case"aaa":e=Fe(De.DayPeriods,ke.Abbreviated);break;case"aaaa":e=Fe(De.DayPeriods,ke.Wide);break;case"aaaaa":e=Fe(De.DayPeriods,ke.Narrow);break;case"b":case"bb":case"bbb":e=Fe(De.DayPeriods,ke.Abbreviated,Ht.Standalone,!0);break;case"bbbb":e=Fe(De.DayPeriods,ke.Wide,Ht.Standalone,!0);break;case"bbbbb":e=Fe(De.DayPeriods,ke.Narrow,Ht.Standalone,!0);break;case"B":case"BB":case"BBB":e=Fe(De.DayPeriods,ke.Abbreviated,Ht.Format,!0);break;case"BBBB":e=Fe(De.DayPeriods,ke.Wide,Ht.Format,!0);break;case"BBBBB":e=Fe(De.DayPeriods,ke.Narrow,Ht.Format,!0);break;case"h":e=rt(Se.Hours,1,-12);break;case"hh":e=rt(Se.Hours,2,-12);break;case"H":e=rt(Se.Hours,1);break;case"HH":e=rt(Se.Hours,2);break;case"m":e=rt(Se.Minutes,1);break;case"mm":e=rt(Se.Minutes,2);break;case"s":e=rt(Se.Seconds,1);break;case"ss":e=rt(Se.Seconds,2);break;case"S":e=rt(Se.FractionalSeconds,1);break;case"SS":e=rt(Se.FractionalSeconds,2);break;case"SSS":e=rt(Se.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=lf(kr.Short);break;case"ZZZZZ":e=lf(kr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=lf(kr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=lf(kr.Long);break;default:return null}return av[n]=e,e}function XR(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function g$(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function m$(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),s=XR(e,i);return g$(n,r*(s-i))}function y$(n){if(HR(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return pf(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(o$))return _$(r)}let e=new Date(n);if(!HR(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function _$(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,l),e}function HR(n){return n instanceof Date&&!isNaN(n.valueOf())}function hv(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var cv=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},yf=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new cv(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),zR(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);zR(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(q(bi),q(Cs),q(iv))}}static{this.\u0275dir=It({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function zR(n,e){n.context.$implicit=e.item}var Mi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new uv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){qR("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){qR("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(q(bi),q(Cs))}}static{this.\u0275dir=It({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),uv=class{constructor(){this.$implicit=null,this.ngIf=null}};function qR(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Vt(e)}'.`)}function eN(n,e){return new j(2100,!1)}var lv=class{createSubscription(e,t){return On(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){On(()=>e.unsubscribe())}},dv=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},v$=new dv,w$=new lv,tN=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Si(t))return v$;if(nv(t))return w$;throw eN(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(q(Ai,16))}}static{this.\u0275pipe=y_({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var I$="mediumDate",E$=new V(""),C$=new V(""),nN=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??I$,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return c$(t,o,s||this.locale,a)}catch(o){throw eN(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)(q(rf,16),q(E$,24),q(C$,24))}}static{this.\u0275pipe=y_({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var Ln=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ss({type:n})}static{this.\u0275inj=Ds({})}}return n})(),rN="browser",T$="server";function ou(n){return n===T$}var gf=class{};var vf=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var dN=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(dN||{}),fv=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new vf,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var wf=class n extends fv{constructor(e={}){super(e),this.type=dN.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var b$=new V("");var D$=new V(""),iN="b",sN="h",oN="s",aN="st",cN="u",uN="rt",_f=new V(""),S$=["GET","HEAD"];function A$(n,e){let y=x(_f),{isCacheActive:t}=y,r=mD(y,["isCacheActive"]),{transferCache:i,method:s}=n;if(!t||i===!1||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!S$.includes(s)||!r.includeRequestsWithAuthHeaders&&R$(n)||r.filter?.(n)===!1)return e(n);let o=x(Yo),a=x(D$,{optional:!0}),c=ou(x(yn));if(a&&!c)throw new j(2803,!1);let l=c&&a?P$(n.url,a):n.url,d=M$(n,l),f=o.get(d,null),g=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(g=i.includeHeaders),f){let{[iN]:E,[uN]:R,[sN]:N,[oN]:L,[aN]:$,[cN]:H}=f,ee=E;switch(R){case"arraybuffer":ee=new TextEncoder().encode(E).buffer;break;case"blob":ee=new Blob([E]);break}let Ue=new vf(N);return Z(new wf({body:ee,headers:Ue,status:L,statusText:$,url:H}))}return e(n).pipe(Ze(E=>{E instanceof wf&&c&&o.set(d,{[iN]:E.body,[sN]:N$(E.headers,g),[oN]:E.status,[aN]:E.statusText,[cN]:l,[uN]:n.responseType})}))}function R$(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function N$(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function lN(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function M$(n,e){let{params:t,method:r,responseType:i}=n,s=lN(t),o=n.serializeBody();o instanceof URLSearchParams?o=lN(o):typeof o!="string"&&(o="");let a=[r,i,e,o,s].join("|"),c=x$(a);return c}function x$(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function hN(n){return[{provide:_f,useFactory:()=>(Di("NgHttpTransferCache"),F({isCacheActive:!0},n))},{provide:b$,useValue:A$,multi:!0,deps:[Yo,_f]},{provide:ea,multi:!0,useFactory:()=>{let e=x(rr),t=x(_f);return()=>{nf(e).then(()=>{t.isCacheActive=!1})}}}]}function P$(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var mv=class extends ff{constructor(){super(...arguments),this.supportsDOMEvents=!0}},yv=class n extends mv{static makeCurrent(){WR(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=k$();return t==null?null:O$(t)}resetBaseElement(){au=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return hv(document.cookie,e)}},au=null;function k$(){return au=au||document.querySelector("base"),au?au.getAttribute("href"):null}function O$(n){return new URL(n,document.baseURI).pathname}var F$=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),If=new V(""),mN=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(ie(If),ie(Te))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),cu=class{constructor(e){this._doc=e}},pv="ng-app-id",yN=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ou(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${pv}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(pv),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(pv,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(ie(Wt),ie(Hh),ie(P_,8),ie(yn))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),gv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},wv=/%COMP%/g,_N="%COMP%",L$=`_nghost-${_N}`,V$=`_ngcontent-${_N}`,U$=!0,j$=new V("",{providedIn:"root",factory:()=>U$});function B$(n){return V$.replace(wv,n)}function $$(n){return L$.replace(wv,n)}function vN(n,e){return e.map(t=>t.replace(wv,n))}var fN=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ou(a),this.defaultRenderer=new uu(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Yn.ShadowDom&&(r=me(F({},r),{encapsulation:Yn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Ef?i.applyToHost(t):i instanceof lu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Yn.Emulated:s=new Ef(c,l,r,this.appId,d,o,a,f);break;case Yn.ShadowDom:return new _v(c,l,t,r,o,a,this.nonce,f);default:s=new lu(c,l,r,d,o,a,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(ie(mN),ie(yN),ie(Hh),ie(j$),ie(Wt),ie(yn),ie(Te),ie(P_))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),uu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(gv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(pN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(pN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=gv[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=gv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Rr.DashCase|Rr.Important)?e.style.setProperty(t,r,i&Rr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Rr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Or().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function pN(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var _v=class extends uu{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=vN(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},lu=class extends uu{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?vN(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ef=class extends lu{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=B$(l),this.hostAttr=$$(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},H$=(()=>{class n extends cu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(ie(Wt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),z$=(()=>{class n extends cu{constructor(t){super(t),this.delegate=x(UR,{optional:!0})}supports(t){return this.delegate?this.delegate.supports(t):!1}addEventListener(t,r,i){return this.delegate.addEventListener(t,r,i)}removeEventListener(t,r,i){return this.delegate.removeEventListener(t,r,i)}static{this.\u0275fac=function(r){return new(r||n)(ie(Wt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),gN=["alt","control","meta","shift"],q$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},G$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},W$=(()=>{class n extends cu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Or().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),gN.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=q$[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),gN.forEach(o=>{if(o!==i){let a=G$[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(ie(Wt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function wN(n,e){return VR(F({rootComponent:n},K$(e)))}function K$(n){return{appProviders:[...X$,...n?.providers??[]],platformProviders:Z$}}function Q$(){yv.makeCurrent()}function Y$(){return new Ar}function J$(){return dA(document),document}var Z$=[{provide:yn,useValue:rN},{provide:x_,useValue:Q$,multi:!0},{provide:Wt,useFactory:J$,deps:[]}];var X$=[{provide:Fh,useValue:"root"},{provide:Ar,useFactory:Y$,deps:[]},{provide:If,useClass:H$,multi:!0,deps:[Wt,Te,yn]},{provide:If,useClass:W$,multi:!0,deps:[Wt]},{provide:If,useClass:z$,multi:!0},fN,yN,mN,{provide:zo,useExisting:fN},{provide:gf,useClass:F$,deps:[]},[]];var IN=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(ie(Wt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var vv=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(vv||{});function EN(...n){let e=[],t=new Set,r=t.has(vv.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of n)t.add(s),i.length&&e.push(i);return Ut([[],jR(),t.has(vv.NoHttpTransferCache)||r?[]:hN({}),e])}var ae="primary",Du=Symbol("RouteTitle"),bv=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ca(n){return new bv(n)}function t4(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function n4(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ir(n[t],e[t]))return!1;return!0}function ir(n,e){let t=n?Dv(n):void 0,r=e?Dv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!NN(n[i],e[i]))return!1;return!0}function Dv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function NN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function MN(n){return n.length>0?n[n.length-1]:null}function Pi(n){return Qm(n)?n:Si(n)?We(Promise.resolve(n)):Z(n)}var r4={exact:PN,subset:kN},xN={exact:i4,subset:s4,ignored:()=>!0};function CN(n,e,t){return r4[t.paths](n.root,e.root,t.matrixParams)&&xN[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function i4(n,e){return ir(n,e)}function PN(n,e,t){if(!Ps(n.segments,e.segments)||!bf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!PN(n.children[r],e.children[r],t))return!1;return!0}function s4(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>NN(n[t],e[t]))}function kN(n,e,t){return ON(n,e,e.segments,t)}function ON(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ps(i,t)||e.hasChildren()||!bf(i,t,r))}else if(n.segments.length===t.length){if(!Ps(n.segments,t)||!bf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!kN(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Ps(n.segments,i)||!bf(n.segments,i,r)||!n.children[ae]?!1:ON(n.children[ae],e,s,r)}}function bf(n,e,t){return e.every((r,i)=>xN[t](n[i].parameters,r.parameters))}var Lr=class{constructor(e=new Re([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ca(this.queryParams),this._queryParamMap}toString(){return c4.serialize(this)}},Re=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Df(this)}},xs=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ca(this.parameters),this._parameterMap}toString(){return LN(this)}};function o4(n,e){return Ps(n,e)&&n.every((t,r)=>ir(t.parameters,e[r].parameters))}function Ps(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function a4(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ae&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ae&&(t=t.concat(e(i,r)))}),t}var Zv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>new yu,providedIn:"root"})}}return n})(),yu=class{parse(e){let t=new Av(e);return new Lr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${du(e.root,!0)}`,r=d4(e.queryParams),i=typeof e.fragment=="string"?`#${u4(e.fragment)}`:"";return`${t}${r}${i}`}},c4=new yu;function Df(n){return n.segments.map(e=>LN(e)).join("/")}function du(n,e){if(!n.hasChildren())return Df(n);if(e){let t=n.children[ae]?du(n.children[ae],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ae&&r.push(`${i}:${du(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=a4(n,(r,i)=>i===ae?[du(n.children[ae],!1)]:[`${i}:${du(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ae]!=null?`${Df(n)}/${t[0]}`:`${Df(n)}/(${t.join("//")})`}}function FN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cf(n){return FN(n).replace(/%3B/gi,";")}function u4(n){return encodeURI(n)}function Sv(n){return FN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sf(n){return decodeURIComponent(n)}function TN(n){return Sf(n.replace(/\+/g,"%20"))}function LN(n){return`${Sv(n.path)}${l4(n.parameters)}`}function l4(n){return Object.entries(n).map(([e,t])=>`;${Sv(e)}=${Sv(t)}`).join("")}function d4(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Cf(t)}=${Cf(i)}`).join("&"):`${Cf(t)}=${Cf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var h4=/^[^\/()?;#]+/;function Iv(n){let e=n.match(h4);return e?e[0]:""}var f4=/^[^\/()?;=#]+/;function p4(n){let e=n.match(f4);return e?e[0]:""}var g4=/^[^=?&#]+/;function m4(n){let e=n.match(g4);return e?e[0]:""}var y4=/^[^&#]+/;function _4(n){let e=n.match(y4);return e?e[0]:""}var Av=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ae]=new Re(e,t)),r}parseSegment(){let e=Iv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new xs(Sf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=p4(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Iv(this.remaining);i&&(r=i,this.capture(r))}e[Sf(t)]=Sf(r)}parseQueryParam(e){let t=m4(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=_4(this.remaining);o&&(r=o,this.capture(r))}let i=TN(t),s=TN(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Iv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ae);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ae]:new Re([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function VN(n){return n.segments.length>0?new Re([],{[ae]:n}):n}function UN(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=UN(i);if(r===ae&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Re(n.segments,e);return v4(t)}function v4(n){if(n.numberOfChildren===1&&n.children[ae]){let e=n.children[ae];return new Re(n.segments.concat(e.segments),e.children)}return n}function ks(n){return n instanceof Lr}function w4(n,e,t=null,r=null){let i=jN(n);return BN(i,e,t,r)}function jN(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new Re(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=VN(r);return e??i}function BN(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Ev(i,i,i,t,r);let s=I4(e);if(s.toRoot())return Ev(i,i,new Re([],{}),t,r);let o=E4(s,i,n),a=o.processChildren?pu(o.segmentGroup,o.index,s.commands):HN(o.segmentGroup,o.index,s.commands);return Ev(i,o.segmentGroup,a,t,r)}function Af(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function _u(n){return typeof n=="object"&&n!=null&&n.outlets}function Ev(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;n===e?o=t:o=$N(n,e,t);let a=VN(UN(o));return new Lr(a,s,i)}function $N(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=$N(s,e,t)}),new Re(n.segments,r)}var Rf=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Af(r[0]))throw new j(4003,!1);let i=r.find(_u);if(i&&i!==MN(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function I4(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Rf(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Rf(t,e,r)}var sa=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function E4(n,e,t){if(n.isAbsolute)return new sa(e,!0,0);if(!t)return new sa(e,!1,NaN);if(t.parent===null)return new sa(t,!0,0);let r=Af(n.commands[0])?0:1,i=t.segments.length-1+r;return C4(t,i,n.numberOfDoubleDots)}function C4(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new sa(r,!1,i-s)}function T4(n){return _u(n[0])?n[0].outlets:{[ae]:n}}function HN(n,e,t){if(n??=new Re([],{}),n.segments.length===0&&n.hasChildren())return pu(n,e,t);let r=b4(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Re(n.segments.slice(0,r.pathIndex),{});return s.children[ae]=new Re(n.segments.slice(r.pathIndex),n.children),pu(s,0,i)}else return r.match&&i.length===0?new Re(n.segments,{}):r.match&&!n.hasChildren()?Rv(n,e,t):r.match?pu(n,0,i):Rv(n,e,t)}function pu(n,e,t){if(t.length===0)return new Re(n.segments,{});{let r=T4(t),i={};if(Object.keys(r).some(s=>s!==ae)&&n.children[ae]&&n.numberOfChildren===1&&n.children[ae].segments.length===0){let s=pu(n.children[ae],e,t);return new Re(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=HN(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Re(n.segments,i)}}function b4(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(_u(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!DN(c,l,o))return s;r+=2}else{if(!DN(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Rv(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(_u(s)){let c=D4(s.outlets);return new Re(r,c)}if(i===0&&Af(t[0])){let c=n.segments[e];r.push(new xs(c.path,bN(t[0]))),i++;continue}let o=_u(s)?s.outlets[ae]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Af(a)?(r.push(new xs(o,bN(a))),i+=2):(r.push(new xs(o,{})),i++)}return new Re(r,{})}function D4(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Rv(new Re([],{}),0,r))}),e}function bN(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function DN(n,e,t){return n==t.path&&ir(e,t.parameters)}var gu="imperative",Ct=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ct||{}),In=class{constructor(e,t){this.id=e,this.url=t}},vu=class extends In{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ct.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},xi=class extends In{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ct.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},cn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(cn||{}),Nv=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Nv||{}),Fr=class extends In{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ct.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Os=class extends In{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ct.NavigationSkipped}},wu=class extends In{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ct.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Nf=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ct.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mv=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ct.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xv=class extends In{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ct.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Pv=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ct.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kv=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ct.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ov=class{constructor(e){this.route=e,this.type=Ct.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Fv=class{constructor(e){this.route=e,this.type=Ct.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Lv=class{constructor(e){this.snapshot=e,this.type=Ct.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vv=class{constructor(e){this.snapshot=e,this.type=Ct.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uv=class{constructor(e){this.snapshot=e,this.type=Ct.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jv=class{constructor(e){this.snapshot=e,this.type=Ct.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Iu=class{},ua=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function S4(n,e){return n.providers&&!n._injector&&(n._injector=Z_(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Vn(n){return n.outlet||ae}function A4(n,e){let t=n.filter(r=>Vn(r)===e);return t.push(...n.filter(r=>Vn(r)!==e)),t}function Su(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Bv=class{get injector(){return Su(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Lf(this.rootInjector),this.attachRef=null}},Lf=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Bv(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(ie(gn))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Mf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=$v(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=$v(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Hv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Hv(e,this._root).map(t=>t.value)}};function $v(n,e){if(n===e.value)return e;for(let t of e.children){let r=$v(n,t);if(r)return r}return null}function Hv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Hv(n,t);if(r.length)return r.unshift(e),r}return[]}var an=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ia(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var xf=class extends Mf{constructor(e,t){super(e),this.snapshot=t,Xv(this,e)}toString(){return this.snapshot.toString()}};function zN(n){let e=R4(n),t=new at([new xs("",{})]),r=new at({}),i=new at({}),s=new at({}),o=new at(""),a=new Vr(t,r,s,o,i,ae,n,e.root);return a.snapshot=e.root,new xf(new an(a,[]),e)}function R4(n){let e={},t={},r={},i="",s=new oa([],e,r,i,t,ae,n,null,{});return new kf("",new an(s,[]))}var Vr=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(de(l=>l[Du]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(de(e=>ca(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(de(e=>ca(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Pf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),n.params),data:F(F({},e.data),n.data),resolve:F(F(F(F({},n.data),e.data),i?.data),n._resolvedData)}:r={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},i&&GN(i)&&(r.resolve[Du]=i.title),r}var oa=class{get title(){return this.data?.[Du]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ca(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ca(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},kf=class extends Mf{constructor(e,t){super(t),this.url=e,Xv(this,t)}toString(){return qN(this._root)}};function Xv(n,e){e.value._routerState=n,e.children.forEach(t=>Xv(n,t))}function qN(n){let e=n.children.length>0?` { ${n.children.map(qN).join(", ")} } `:"";return`${n.value}${e}`}function Cv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ir(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ir(e.params,t.params)||n.paramsSubject.next(t.params),n4(e.url,t.url)||n.urlSubject.next(t.url),ir(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function zv(n,e){let t=ir(n.params,e.params)&&o4(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||zv(n.parent,e.parent))}function GN(n){return typeof n.title=="string"||n.title===null}var Au=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ae,this.activateEvents=new Xe,this.deactivateEvents=new Xe,this.attachEvents=new Xe,this.detachEvents=new Xe,this.parentContexts=x(Lf),this.location=x(bi),this.changeDetector=x(Ai),this.inputBinder=x(ew,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new qv(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=It({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[vi]})}}return n})(),qv=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Vr?this.route:e===Lf?this.childContexts:this.parent.get(e,t)}},ew=new V("");function N4(n,e,t){let r=Eu(n,e._root,t?t._root:void 0);return new xf(r,e)}function Eu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=M4(n,e,t);return new an(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Eu(n,a)),o}}let r=x4(e.value),i=e.children.map(s=>Eu(n,s));return new an(r,i)}}function M4(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Eu(n,r,i);return Eu(n,r)})}function x4(n){return new Vr(new at(n.url),new at(n.params),new at(n.queryParams),new at(n.fragment),new at(n.data),n.outlet,n.component,n)}var Cu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},WN="ngNavigationCancelingError";function Of(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ks(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=KN(!1,cn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function KN(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[WN]=!0,t.cancellationCode=e,t}function P4(n){return QN(n)&&ks(n.url)}function QN(n){return!!n&&n[WN]}var k4=(n,e,t,r)=>de(i=>(new Gv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Gv=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Cv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ia(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ia(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ia(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ia(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new jv(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Vv(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Cv(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Cv(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Ff=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},aa=class{constructor(e,t){this.component=e,this.route=t}};function O4(n,e,t){let r=n._root,i=e?e._root:null;return hu(r,i,t,[r.value])}function F4(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function da(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!G0(n)?n:e.get(n):r}function hu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ia(e);return n.children.forEach(o=>{L4(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>mu(a,t.getContext(o),i)),i}function L4(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=V4(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ff(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?hu(n,e,a?a.children:null,r,i):hu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new aa(a.outlet.component,o))}else o&&mu(e,a,i),i.canActivateChecks.push(new Ff(r)),s.component?hu(n,null,a?a.children:null,r,i):hu(n,null,t,r,i);return i}function V4(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ps(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ps(n.url,e.url)||!ir(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zv(n,e)||!ir(n.queryParams,e.queryParams);case"paramsChange":default:return!zv(n,e)}}function mu(n,e,t){let r=ia(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?mu(o,e.children.getContext(s),t):mu(o,null,t):mu(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new aa(e.outlet.component,i)):t.canDeactivateChecks.push(new aa(null,i)):t.canDeactivateChecks.push(new aa(null,i))}function Ru(n){return typeof n=="function"}function U4(n){return typeof n=="boolean"}function j4(n){return n&&Ru(n.canLoad)}function B4(n){return n&&Ru(n.canActivate)}function $4(n){return n&&Ru(n.canActivateChild)}function H4(n){return n&&Ru(n.canDeactivate)}function z4(n){return n&&Ru(n.canMatch)}function YN(n){return n instanceof Tr||n?.name==="EmptyError"}var Tf=Symbol("INITIAL_VALUE");function la(){return fn(n=>$d(n.map(e=>e.pipe(br(1),ty(Tf)))).pipe(de(e=>{for(let t of e)if(t!==!0){if(t===Tf)return Tf;if(t===!1||q4(t))return t}return!0}),hn(e=>e!==Tf),br(1)))}function q4(n){return ks(n)||n instanceof Cu}function G4(n,e){return ct(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Z(me(F({},t),{guardsResult:!0})):W4(o,r,i,n).pipe(ct(a=>a&&U4(a)?K4(r,s,n,e):Z(a)),de(a=>me(F({},t),{guardsResult:a})))})}function W4(n,e,t,r){return We(n).pipe(ct(i=>X4(i.component,i.route,t,e,r)),Sn(i=>i!==!0,!0))}function K4(n,e,t,r){return We(e).pipe(us(i=>No(Y4(i.route.parent,r),Q4(i.route,r),Z4(n,i.path,t),J4(n,i.route,t))),Sn(i=>i!==!0,!0))}function Q4(n,e){return n!==null&&e&&e(new Uv(n)),Z(!0)}function Y4(n,e){return n!==null&&e&&e(new Lv(n)),Z(!0)}function J4(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(s=>Hd(()=>{let o=Su(e)??t,a=da(s,o),c=B4(a)?a.canActivate(e,n):Xn(o,()=>a(e,n));return Pi(c).pipe(Sn())}));return Z(i).pipe(la())}function Z4(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>F4(o)).filter(o=>o!==null).map(o=>Hd(()=>{let a=o.guards.map(c=>{let l=Su(o.node)??t,d=da(c,l),f=$4(d)?d.canActivateChild(r,n):Xn(l,()=>d(r,n));return Pi(f).pipe(Sn())});return Z(a).pipe(la())}));return Z(s).pipe(la())}function X4(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Z(!0);let o=s.map(a=>{let c=Su(e)??i,l=da(a,c),d=H4(l)?l.canDeactivate(n,e,t,r):Xn(c,()=>l(n,e,t,r));return Pi(d).pipe(Sn())});return Z(o).pipe(la())}function eH(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let s=i.map(o=>{let a=da(o,n),c=j4(a)?a.canLoad(e,t):Xn(n,()=>a(e,t));return Pi(c)});return Z(s).pipe(la(),JN(r))}function JN(n){return $m(Ze(e=>{if(typeof e!="boolean")throw Of(n,e)}),de(e=>e===!0))}function tH(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let s=i.map(o=>{let a=da(o,n),c=z4(a)?a.canMatch(e,t):Xn(n,()=>a(e,t));return Pi(c)});return Z(s).pipe(la(),JN(r))}var Tu=class{constructor(e){this.segmentGroup=e||null}},bu=class extends Error{constructor(e){super(),this.urlTree=e}};function ra(n){return Ro(new Tu(n))}function nH(n){return Ro(new j(4e3,!1))}function rH(n){return Ro(KN(!1,cn.GuardRejected))}var Wv=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[ae])return nH(`${e.redirectTo}`);i=i.children[ae]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,params:y,data:E,title:R}=i,N=Xn(s,()=>a({params:y,data:E,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,title:R}));if(N instanceof Lr)throw new bu(N);t=N}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new bu(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Lr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Re(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Kv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function iH(n,e,t,r,i){let s=ZN(n,e,t);return s.matched?(r=S4(e,r),tH(r,e,t,i).pipe(de(o=>o===!0?s:F({},Kv)))):Z(s)}function ZN(n,e,t){if(e.path==="**")return sH(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?F({},Kv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||t4)(t,n,e);if(!i)return F({},Kv);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function sH(n){return{matched:!0,parameters:n.length>0?MN(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function SN(n,e,t,r){return t.length>0&&cH(n,t,r)?{segmentGroup:new Re(e,aH(r,new Re(t,n.children))),slicedSegments:[]}:t.length===0&&uH(n,t,r)?{segmentGroup:new Re(n.segments,oH(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Re(n.segments,n.children),slicedSegments:t}}function oH(n,e,t,r){let i={};for(let s of t)if(Vf(n,e,s)&&!r[Vn(s)]){let o=new Re([],{});i[Vn(s)]=o}return F(F({},r),i)}function aH(n,e){let t={};t[ae]=e;for(let r of n)if(r.path===""&&Vn(r)!==ae){let i=new Re([],{});t[Vn(r)]=i}return t}function cH(n,e,t){return t.some(r=>Vf(n,e,r)&&Vn(r)!==ae)}function uH(n,e,t){return t.some(r=>Vf(n,e,r))}function Vf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function lH(n,e,t){return e.length===0&&!n.children[t]}var Qv=class{};function dH(n,e,t,r,i,s,o="emptyOnly"){return new Yv(n,e,t,r,i,o,s).recognize()}var hH=31,Yv=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Wv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=SN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(de(({children:t,rootSnapshot:r})=>{let i=new an(r,t),s=new kf("",i),o=w4(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new oa([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ae,t).pipe(de(r=>({children:r,rootSnapshot:t})),di(r=>{if(r instanceof bu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Tu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(de(o=>o instanceof an?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return We(s).pipe(us(o=>{let a=r.children[o],c=A4(t,o);return this.processSegmentGroup(e,c,a,o,i)}),ey((o,a)=>(o.push(...a),o)),hi(null),Xm(),ct(o=>{if(o===null)return ra(r);let a=XN(o);return fH(a),Z(a)}))}processSegment(e,t,r,i,s,o,a){return We(t).pipe(us(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(di(l=>{if(l instanceof Tu)return Z(null);throw l}))),Sn(c=>!!c),di(c=>{if(YN(c))return lH(r,i,s)?Z(new Qv):ra(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return Vn(r)!==o&&(o===ae||!Vf(i,s,r))?ra(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):ra(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=ZN(t,i,s);if(!c)return ra(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hH&&(this.allowRedirects=!1));let y=new oa(s,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,AN(i),Vn(i),i.component??i._loadedComponent??null,i,RN(i)),E=Pf(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(E.params),y.data=Object.freeze(E.data);let R=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(ct(N=>this.processSegment(e,r,t,N.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=iH(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(fn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(fn(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:y}=c,E=new oa(g,f,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,AN(r),Vn(r),r.component??r._loadedComponent??null,r,RN(r)),R=Pf(E,o,this.paramsInheritanceStrategy);E.params=Object.freeze(R.params),E.data=Object.freeze(R.data);let{segmentGroup:N,slicedSegments:L}=SN(t,g,y,l);if(L.length===0&&N.hasChildren())return this.processChildren(d,l,N,E).pipe(de(H=>new an(E,H)));if(l.length===0&&L.length===0)return Z(new an(E,[]));let $=Vn(r)===s;return this.processSegment(d,l,N,L,$?ae:s,!0,E).pipe(de(H=>new an(E,H instanceof an?[H]:[])))}))):ra(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):eH(e,t,r,this.urlSerializer).pipe(ct(i=>i?this.configLoader.loadChildren(e,t).pipe(Ze(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):rH(t))):Z({routes:[],injector:e})}};function fH(n){n.sort((e,t)=>e.value.outlet===ae?-1:t.value.outlet===ae?1:e.value.outlet.localeCompare(t.value.outlet))}function pH(n){let e=n.value.routeConfig;return e&&e.path===""}function XN(n){let e=[],t=new Set;for(let r of n){if(!pH(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=XN(r.children);e.push(new an(r.value,i))}return e.filter(r=>!t.has(r))}function AN(n){return n.data||{}}function RN(n){return n.resolve||{}}function gH(n,e,t,r,i,s){return ct(o=>dH(n,e,t,r,o.extractedUrl,i,s).pipe(de(({state:a,tree:c})=>me(F({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function mH(n,e){return ct(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of eM(c))o.add(l);let a=0;return We(o).pipe(us(c=>s.has(c)?yH(c,r,n,e):(c.data=Pf(c,c.parent,n).resolve,Z(void 0))),Ze(()=>a++),xo(1),ct(c=>a===o.size?Z(t):tn))})}function eM(n){let e=n.children.map(t=>eM(t)).flat();return[n,...e]}function yH(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!GN(i)&&(s[Du]=i.title),_H(s,n,e,r).pipe(de(o=>(n._resolvedData=o,n.data=Pf(n,n.parent,t).resolve,null)))}function _H(n,e,t,r){let i=Dv(n);if(i.length===0)return Z({});let s={};return We(i).pipe(ct(o=>vH(n[o],e,t,r).pipe(Sn(),Ze(a=>{if(a instanceof Cu)throw Of(new yu,a);s[o]=a}))),xo(1),Zm(s),di(o=>YN(o)?tn:Ro(o)))}function vH(n,e,t,r){let i=Su(e)??r,s=da(n,i),o=s.resolve?s.resolve(e,t):Xn(i,()=>s(e,t));return Pi(o)}function Tv(n){return fn(e=>{let t=n(e);return t?We(t).pipe(de(()=>e)):Z(e)})}var tM=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ae);return r}getResolvedTitleForRoute(t){return t.data[Du]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>x(wH),providedIn:"root"})}}return n})(),wH=(()=>{class n extends tM{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(ie(IN))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),tw=new V("",{providedIn:"root",factory:()=>({})}),IH=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=pt({type:n,selectors:[["ng-component"]],standalone:!0,features:[gt],decls:1,vars:0,template:function(r,i){r&1&&Bt(0,"router-outlet")},dependencies:[Au],encapsulation:2})}}return n})();function nw(n){let e=n.children&&n.children.map(nw),t=e?me(F({},n),{children:e}):F({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ae&&(t.component=IH),t}var rw=new V(""),EH=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=x(rv)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Pi(t.loadComponent()).pipe(de(nM),Ze(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Mo(()=>{this.componentLoaders.delete(t)})),i=new bo(r,()=>new ht).pipe(To());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=CH(r,this.compiler,t,this.onLoadEndListener).pipe(Mo(()=>{this.childrenLoaders.delete(r)})),o=new bo(s,()=>new ht).pipe(To());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function CH(n,e,t,r){return Pi(n.loadChildren()).pipe(de(nM),ct(i=>i instanceof qc||Array.isArray(i)?Z(i):We(e.compileModuleAsync(i))),de(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(rw,[],{optional:!0,self:!0}).flat()),{routes:o.map(nw),injector:s}}))}function TH(n){return n&&typeof n=="object"&&"default"in n}function nM(n){return TH(n)?n.default:n}var iw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>x(bH),providedIn:"root"})}}return n})(),bH=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),DH=new V("");var SH=new V(""),AH=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ht,this.transitionAbortSubject=new ht,this.configLoader=x(EH),this.environmentInjector=x(gn),this.urlSerializer=x(Zv),this.rootContexts=x(Lf),this.location=x(su),this.inputBindingEnabled=x(ew,{optional:!0})!==null,this.titleStrategy=x(tM),this.options=x(tw,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=x(iw),this.createViewTransition=x(DH,{optional:!0}),this.navigationErrorHandler=x(SH,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Ov(i)),r=i=>this.events.next(new Fv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(me(F(F({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new at({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:gu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(hn(s=>s.id!==0),de(s=>me(F({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),fn(s=>{let o=!1,a=!1;return Z(s).pipe(fn(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",cn.SupersededByNewNavigation),tn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?me(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new Os(c.id,this.urlSerializer.serialize(c.rawUrl),f,Nv.IgnoredSameUrlNavigation)),c.resolve(!1),tn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Z(c).pipe(fn(f=>{let g=this.transitions?.getValue();return this.events.next(new vu(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?tn:Promise.resolve(f)}),gH(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ze(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=me(F({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new Nf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:g,source:y,restoredState:E,extras:R}=c,N=new vu(f,this.urlSerializer.serialize(g),y,E);this.events.next(N);let L=zN(this.rootComponentType).snapshot;return this.currentTransition=s=me(F({},c),{targetSnapshot:L,urlAfterRedirects:g,extras:me(F({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,Z(s)}else{let f="";return this.events.next(new Os(c.id,this.urlSerializer.serialize(c.extractedUrl),f,Nv.IgnoredByUrlHandlingStrategy)),c.resolve(!1),tn}}),Ze(c=>{let l=new Mv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),de(c=>(this.currentTransition=s=me(F({},c),{guards:O4(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),G4(this.environmentInjector,c=>this.events.next(c)),Ze(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Of(this.urlSerializer,c.guardsResult);let l=new xv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),hn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",cn.GuardRejected),!1)),Tv(c=>{if(c.guards.canActivateChecks.length)return Z(c).pipe(Ze(l=>{let d=new Pv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),fn(l=>{let d=!1;return Z(l).pipe(mH(this.paramsInheritanceStrategy,this.environmentInjector),Ze({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",cn.NoDataFromResolver)}}))}),Ze(l=>{let d=new kv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Tv(c=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ze(g=>{d.component=g}),de(()=>{})));for(let g of d.children)f.push(...l(g));return f};return $d(l(c.targetSnapshot.root)).pipe(hi(null),br(1))}),Tv(()=>this.afterPreactivation()),fn(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?We(d).pipe(de(()=>s)):Z(s)}),de(c=>{let l=N4(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=me(F({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Ze(()=>{this.events.next(new Iu)}),k4(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),br(1),Ze({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new xi(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),ny(this.transitionAbortSubject.pipe(Ze(c=>{throw c}))),Mo(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",cn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),di(c=>{if(a=!0,QN(c))this.events.next(new Fr(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),P4(c)?this.events.next(new ua(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new wu(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=Xn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof Cu){let{message:f,cancellationCode:g}=Of(this.urlSerializer,d);this.events.next(new Fr(s.id,this.urlSerializer.serialize(s.extractedUrl),f,g)),this.events.next(new ua(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(c);s.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return tn}))}))}cancelNavigationTransition(t,r,i){let s=new Fr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function RH(n){return n!==gu}var NH=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>x(MH),providedIn:"root"})}}return n})(),Jv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},MH=(()=>{class n extends Jv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ko(n)))(i||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>x(xH),providedIn:"root"})}}return n})(),xH=(()=>{class n extends rM{constructor(){super(...arguments),this.location=x(su),this.urlSerializer=x(Zv),this.options=x(tw,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=x(iw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Lr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=zN(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof vu)this.stateMemento=this.createStateMemento();else if(t instanceof Os)this.rawUrlTree=r.initialUrl;else if(t instanceof Nf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Iu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Fr&&(t.code===cn.GuardRejected||t.code===cn.NoDataFromResolver)?this.restoreHistory(r):t instanceof wu?this.restoreHistory(r,!0):t instanceof xi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Lr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=F(F({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=F(F({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ko(n)))(i||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(fu||{});function PH(n,e){n.events.pipe(hn(t=>t instanceof xi||t instanceof Fr||t instanceof wu||t instanceof Os),de(t=>t instanceof xi||t instanceof Os?fu.COMPLETE:(t instanceof Fr?t.code===cn.Redirect||t.code===cn.SupersededByNewNavigation:!1)?fu.REDIRECTING:fu.FAILED),hn(t=>t!==fu.REDIRECTING),br(1)).subscribe(()=>{e()})}function kH(n){throw n}var OH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Un=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=x(tf),this.stateManager=x(rM),this.options=x(tw,{optional:!0})||{},this.pendingTasks=x(As),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=x(AH),this.urlSerializer=x(Zv),this.location=x(su),this.urlHandlingStrategy=x(iw),this._events=new ht,this.errorHandler=this.options.errorHandler||kH,this.navigated=!1,this.routeReuseStrategy=x(NH),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=x(rw,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!x(ew,{optional:!0}),this.eventsSubscription=new Ge,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Fr&&r.code!==cn.Redirect&&r.code!==cn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof xi)this.navigated=!0;else if(r instanceof ua){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||RH(i.source)},o);this.scheduleNavigation(a,gu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}VH(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),gu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=F({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(nw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=F(F({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=jN(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return BN(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ks(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,gu,null,r)}navigate(t,r={skipLocationChange:!1}){return LH(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=F({},OH):r===!1?i=F({},FH):i=r,ks(t))return CN(this.currentUrlTree,t,i);let s=this.parseUrl(t);return CN(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return PH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new j(4008,!1)}function VH(n){return!(n instanceof Iu)&&!(n instanceof ua)}var Uf=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new ht,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof xi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ks(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:EA(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:ks(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(q(Un),q(Vr),R_("tabindex"),q(Ns),q(kn),q(ta))}}static{this.\u0275dir=It({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Be("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&nu("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ri],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ri],replaceUrl:[2,"replaceUrl","replaceUrl",Ri],routerLink:"routerLink"},standalone:!0,features:[J_,vi]})}}return n})();var UH=new V("");function iM(n,...e){return Ut([{provide:rw,multi:!0,useValue:n},[],{provide:Vr,useFactory:jH,deps:[Un]},{provide:ea,multi:!0,useFactory:BH},e.map(t=>t.\u0275providers)])}function jH(n){return n.routerState.root}function BH(){let n=x(ft);return e=>{let t=n.get(rr);if(e!==t.components[0])return;let r=n.get(Un),i=n.get($H);n.get(HH)===1&&r.initialNavigation(),n.get(zH,null,le.Optional)?.setUpPreloading(),n.get(UH,null,le.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var $H=new V("",{factory:()=>new ht}),HH=new V("",{providedIn:"root",factory:()=>1});var zH=new V("");var ow={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var k=function(n,e){if(!n)throw Fs(e)},Fs=function(n){return new Error("Firebase Database ("+ow.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var oM=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},qH=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Bf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;c||(y=64,o||(g=64)),r.push(t[d],t[f],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(oM(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new aw;let g=s<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),f!==64){let E=l<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},aw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},uw=function(n){let e=oM(n);return Bf.encodeByteArray(e,!0)},Mu=function(n){return uw(n).replace(/\./g,"")},xu=function(n){try{return Bf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function aM(n){return cM(void 0,n)}function cM(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!GH(t)||(n[t]=cM(n[t],e[t]));return n}function GH(n){return n!=="__proto__"}function WH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var KH=()=>WH().__FIREBASE_DEFAULTS__,QH=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},YH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&xu(n[1]);return e&&JSON.parse(e)},$f=()=>{try{return KH()||QH()||YH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lw=n=>{var e,t;return(t=(e=$f())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Hf=n=>{let e=lw(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},dw=()=>{var n;return(n=$f())===null||n===void 0?void 0:n.config},hw=n=>{var e;return(e=$f())===null||e===void 0?void 0:e[`_${n}`]};var ki=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function zf(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Mu(JSON.stringify(t)),Mu(JSON.stringify(o)),""].join(".")}function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Pu(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function JH(){var n;let e=(n=$f())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lM(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function qf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dM(){let n=mt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function sr(){return ow.NODE_CLIENT===!0||ow.NODE_ADMIN===!0}function hM(){return!JH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fw(){try{return typeof indexedDB=="object"}catch{return!1}}function fM(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var ZH="FirebaseError",un=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ZH,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ur.prototype.create)}},Ur=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?XH(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new un(i,a,r)}};function XH(n,e){return n.replace(ez,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var ez=/\{\$([^}]+)}/g;function ha(n){return JSON.parse(n)}function ut(n){return JSON.stringify(n)}var pM=function(n){let e={},t={},r={},i="";try{let s=n.split(".");e=ha(xu(s[0])||""),t=ha(xu(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var gM=function(n){let e=pM(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},mM=function(n){let e=pM(n).claims;return typeof e=="object"&&e.admin===!0};function or(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ls(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function ku(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ou(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function Vs(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(sM(s)&&sM(o)){if(!Vs(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function sM(n){return n!==null&&typeof n=="object"}function Oi(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fa(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function pa(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}var jf=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let f=0;f<16;f++)r[f]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let f=16;f<80;f++){let g=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(g<<1|g>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,d;for(let f=0;f<80;f++){f<40?f<20?(l=a^s&(o^a),d=1518500249):(l=s^o^a,d=1859775393):f<60?(l=s&o|a&(s|o),d=2400959708):(l=s^o^a,d=3395469782);let g=(i<<5|i>>>27)+l+c+d+r[f]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=g}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function yM(n,e){let t=new cw(n,e);return t.subscribe.bind(t)}var cw=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");tz(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=sw),i.error===void 0&&(i.error=sw),i.complete===void 0&&(i.complete=sw);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function tz(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function sw(){}function Gf(n,e){return`${n} failed: ${e} argument `}var _M=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,k(r<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Fu=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var lte=4*60*60*1e3;function Ke(n){return n&&n._delegate?n._delegate:n}var Kt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Us="[DEFAULT]";var Wf=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ki;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rz(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nz(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function nz(n){return n===Us?void 0:n}function rz(n){return n.instantiationMode==="EAGER"}var Lu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Wf(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var iz=[],he=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(he||{}),sz={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},oz=he.INFO,az={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},cz=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=az[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ar=class{constructor(e){this.name=e,this._logLevel=oz,this._logHandler=cz,this._userLogHandler=null,iz.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}};var uz=(n,e)=>e.some(t=>n instanceof t),vM,wM;function lz(){return vM||(vM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dz(){return wM||(wM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var IM=new WeakMap,gw=new WeakMap,EM=new WeakMap,pw=new WeakMap,yw=new WeakMap;function hz(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(cr(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&IM.set(t,n)}).catch(()=>{}),yw.set(e,n),e}function fz(n){if(gw.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});gw.set(n,e)}var mw={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return gw.get(n);if(e==="objectStoreNames")return n.objectStoreNames||EM.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return cr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function CM(n){mw=n(mw)}function pz(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Kf(this),e,...t);return EM.set(r,e.sort?e.sort():[e]),cr(r)}:dz().includes(n)?function(...e){return n.apply(Kf(this),e),cr(IM.get(this))}:function(...e){return cr(n.apply(Kf(this),e))}}function gz(n){return typeof n=="function"?pz(n):(n instanceof IDBTransaction&&fz(n),uz(n,lz())?new Proxy(n,mw):n)}function cr(n){if(n instanceof IDBRequest)return hz(n);if(pw.has(n))return pw.get(n);let e=gz(n);return e!==n&&(pw.set(n,e),yw.set(e,n)),e}var Kf=n=>yw.get(n);function bM(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=cr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(cr(o.result),c.oldVersion,c.newVersion,cr(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var mz=["get","getKey","getAll","getAllKeys","count"],yz=["put","add","delete","clear"],_w=new Map;function TM(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(_w.get(e))return _w.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=yz.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mz.includes(t)))return;let s=function(o,...a){return v(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return _w.set(e,s),s}CM(n=>me(F({},n),{get:(e,t,r)=>TM(e,t)||n.get(e,t,r),has:(e,t)=>!!TM(e,t)||n.has(e,t)}));var ww=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_z(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function _z(n){let e=n.getComponent();return e?.type==="VERSION"}var Iw="@firebase/app",DM="0.10.11";var jr=new ar("@firebase/app"),vz="@firebase/app-compat",wz="@firebase/analytics-compat",Iz="@firebase/analytics",Ez="@firebase/app-check-compat",Cz="@firebase/app-check",Tz="@firebase/auth",bz="@firebase/auth-compat",Dz="@firebase/database",Sz="@firebase/database-compat",Az="@firebase/functions",Rz="@firebase/functions-compat",Nz="@firebase/installations",Mz="@firebase/installations-compat",xz="@firebase/messaging",Pz="@firebase/messaging-compat",kz="@firebase/performance",Oz="@firebase/performance-compat",Fz="@firebase/remote-config",Lz="@firebase/remote-config-compat",Vz="@firebase/storage",Uz="@firebase/storage-compat",jz="@firebase/firestore",Bz="@firebase/vertexai-preview",$z="@firebase/firestore-compat",Hz="firebase",zz="10.13.2";var Ew="[DEFAULT]",qz={[Iw]:"fire-core",[vz]:"fire-core-compat",[Iz]:"fire-analytics",[wz]:"fire-analytics-compat",[Cz]:"fire-app-check",[Ez]:"fire-app-check-compat",[Tz]:"fire-auth",[bz]:"fire-auth-compat",[Dz]:"fire-rtdb",[Sz]:"fire-rtdb-compat",[Az]:"fire-fn",[Rz]:"fire-fn-compat",[Nz]:"fire-iid",[Mz]:"fire-iid-compat",[xz]:"fire-fcm",[Pz]:"fire-fcm-compat",[kz]:"fire-perf",[Oz]:"fire-perf-compat",[Fz]:"fire-rc",[Lz]:"fire-rc-compat",[Vz]:"fire-gcs",[Uz]:"fire-gcs-compat",[jz]:"fire-fst",[$z]:"fire-fst-compat",[Bz]:"fire-vertex","fire-js":"fire-js",[Hz]:"fire-js-all"};var Vu=new Map,Gz=new Map,Cw=new Map;function SM(n,e){try{n.container.addComponent(e)}catch(t){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ur(n){let e=n.name;if(Cw.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;Cw.set(e,n);for(let t of Vu.values())SM(t,n);for(let t of Gz.values())SM(t,n);return!0}function js(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function En(n){return n.settings!==void 0}var Wz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fi=new Ur("app","Firebase",Wz);var Tw=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fi.create("app-deleted",{appName:this._name})}};var lr=zz;function Qf(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ew,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Fi.create("bad-app-name",{appName:String(i)});if(t||(t=dw()),!t)throw Fi.create("no-options");let s=Vu.get(i);if(s){if(Vs(t,s.options)&&Vs(r,s.config))return s;throw Fi.create("duplicate-app",{appName:i})}let o=new Lu(i);for(let c of Cw.values())o.addComponent(c);let a=new Tw(t,r,o);return Vu.set(i,a),a}function Li(n=Ew){let e=Vu.get(n);if(!e&&n===Ew&&dw())return Qf();if(!e)throw Fi.create("no-app",{appName:n});return e}function Yf(){return Array.from(Vu.values())}function $e(n,e,t){var r;let i=(r=qz[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(a.join(" "));return}ur(new Kt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Kz="firebase-heartbeat-database",Qz=1,Uu="firebase-heartbeat-store",vw=null;function MM(){return vw||(vw=bM(Kz,Qz,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Uu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fi.create("idb-open",{originalErrorMessage:n.message})})),vw}function Yz(n){return v(this,null,function*(){try{let t=(yield MM()).transaction(Uu),r=yield t.objectStore(Uu).get(xM(n));return yield t.done,r}catch(e){if(e instanceof un)jr.warn(e.message);else{let t=Fi.create("idb-get",{originalErrorMessage:e?.message});jr.warn(t.message)}}})}function AM(n,e){return v(this,null,function*(){try{let r=(yield MM()).transaction(Uu,"readwrite");yield r.objectStore(Uu).put(e,xM(n)),yield r.done}catch(t){if(t instanceof un)jr.warn(t.message);else{let r=Fi.create("idb-set",{originalErrorMessage:t?.message});jr.warn(r.message)}}})}function xM(n){return`${n.name}!${n.options.appId}`}var Jz=1024,Zz=30*24*60*60*1e3,bw=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Dw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=RM();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=Zz}),this._storage.overwrite(this._heartbeatsCache))}catch(r){jr.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=RM(),{heartbeatsToSend:r,unsentEntries:i}=Xz(this._heartbeatsCache.heartbeats),s=Mu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return jr.warn(t),""}})}};function RM(){return new Date().toISOString().substring(0,10)}function Xz(n,e=Jz){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),NM(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),NM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Dw=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return fw()?fM().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Yz(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return AM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return AM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function NM(n){return Mu(JSON.stringify({version:2,heartbeats:n})).length}function eq(n){ur(new Kt("platform-logger",e=>new ww(e),"PRIVATE")),ur(new Kt("heartbeat",e=>new bw(e),"PRIVATE")),$e(Iw,DM,n),$e(Iw,DM,"esm2017"),$e("fire-js","")}eq("");var PM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kM={};var Vi,Sw;(function(){var n;function e(T,_){function w(){}w.prototype=_.prototype,T.D=_.prototype,T.prototype=new w,T.prototype.constructor=T,T.C=function(C,b,S){for(var I=Array(arguments.length-2),wr=2;wr<arguments.length;wr++)I[wr-2]=arguments[wr];return _.prototype[b].apply(C,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,w){w||(w=0);var C=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)C[b]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(b=0;16>b;++b)C[b]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=T.g[0],w=T.g[1],b=T.g[2];var S=T.g[3],I=_+(S^w&(b^S))+C[0]+3614090360&4294967295;_=w+(I<<7&4294967295|I>>>25),I=S+(b^_&(w^b))+C[1]+3905402710&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(w^S&(_^w))+C[2]+606105819&4294967295,b=S+(I<<17&4294967295|I>>>15),I=w+(_^b&(S^_))+C[3]+3250441966&4294967295,w=b+(I<<22&4294967295|I>>>10),I=_+(S^w&(b^S))+C[4]+4118548399&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(b^_&(w^b))+C[5]+1200080426&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(w^S&(_^w))+C[6]+2821735955&4294967295,b=S+(I<<17&4294967295|I>>>15),I=w+(_^b&(S^_))+C[7]+4249261313&4294967295,w=b+(I<<22&4294967295|I>>>10),I=_+(S^w&(b^S))+C[8]+1770035416&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(b^_&(w^b))+C[9]+2336552879&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(w^S&(_^w))+C[10]+4294925233&4294967295,b=S+(I<<17&4294967295|I>>>15),I=w+(_^b&(S^_))+C[11]+2304563134&4294967295,w=b+(I<<22&4294967295|I>>>10),I=_+(S^w&(b^S))+C[12]+1804603682&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(b^_&(w^b))+C[13]+4254626195&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(w^S&(_^w))+C[14]+2792965006&4294967295,b=S+(I<<17&4294967295|I>>>15),I=w+(_^b&(S^_))+C[15]+1236535329&4294967295,w=b+(I<<22&4294967295|I>>>10),I=_+(b^S&(w^b))+C[1]+4129170786&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^b&(_^w))+C[6]+3225465664&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^w&(S^_))+C[11]+643717713&4294967295,b=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(b^S))+C[0]+3921069994&4294967295,w=b+(I<<20&4294967295|I>>>12),I=_+(b^S&(w^b))+C[5]+3593408605&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^b&(_^w))+C[10]+38016083&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^w&(S^_))+C[15]+3634488961&4294967295,b=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(b^S))+C[4]+3889429448&4294967295,w=b+(I<<20&4294967295|I>>>12),I=_+(b^S&(w^b))+C[9]+568446438&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^b&(_^w))+C[14]+3275163606&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^w&(S^_))+C[3]+4107603335&4294967295,b=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(b^S))+C[8]+1163531501&4294967295,w=b+(I<<20&4294967295|I>>>12),I=_+(b^S&(w^b))+C[13]+2850285829&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^b&(_^w))+C[2]+4243563512&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^w&(S^_))+C[7]+1735328473&4294967295,b=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(b^S))+C[12]+2368359562&4294967295,w=b+(I<<20&4294967295|I>>>12),I=_+(w^b^S)+C[5]+4294588738&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^b)+C[8]+2272392833&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^w)+C[11]+1839030562&4294967295,b=S+(I<<16&4294967295|I>>>16),I=w+(b^S^_)+C[14]+4259657740&4294967295,w=b+(I<<23&4294967295|I>>>9),I=_+(w^b^S)+C[1]+2763975236&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^b)+C[4]+1272893353&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^w)+C[7]+4139469664&4294967295,b=S+(I<<16&4294967295|I>>>16),I=w+(b^S^_)+C[10]+3200236656&4294967295,w=b+(I<<23&4294967295|I>>>9),I=_+(w^b^S)+C[13]+681279174&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^b)+C[0]+3936430074&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^w)+C[3]+3572445317&4294967295,b=S+(I<<16&4294967295|I>>>16),I=w+(b^S^_)+C[6]+76029189&4294967295,w=b+(I<<23&4294967295|I>>>9),I=_+(w^b^S)+C[9]+3654602809&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^b)+C[12]+3873151461&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^w)+C[15]+530742520&4294967295,b=S+(I<<16&4294967295|I>>>16),I=w+(b^S^_)+C[2]+3299628645&4294967295,w=b+(I<<23&4294967295|I>>>9),I=_+(b^(w|~S))+C[0]+4096336452&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~b))+C[7]+1126891415&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~w))+C[14]+2878612391&4294967295,b=S+(I<<15&4294967295|I>>>17),I=w+(S^(b|~_))+C[5]+4237533241&4294967295,w=b+(I<<21&4294967295|I>>>11),I=_+(b^(w|~S))+C[12]+1700485571&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~b))+C[3]+2399980690&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~w))+C[10]+4293915773&4294967295,b=S+(I<<15&4294967295|I>>>17),I=w+(S^(b|~_))+C[1]+2240044497&4294967295,w=b+(I<<21&4294967295|I>>>11),I=_+(b^(w|~S))+C[8]+1873313359&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~b))+C[15]+4264355552&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~w))+C[6]+2734768916&4294967295,b=S+(I<<15&4294967295|I>>>17),I=w+(S^(b|~_))+C[13]+1309151649&4294967295,w=b+(I<<21&4294967295|I>>>11),I=_+(b^(w|~S))+C[4]+4149444226&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~b))+C[11]+3174756917&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~w))+C[2]+718787259&4294967295,b=S+(I<<15&4294967295|I>>>17),I=w+(S^(b|~_))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var w=_-this.blockSize,C=this.B,b=this.h,S=0;S<_;){if(b==0)for(;S<=w;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<_;)if(C[b++]=T.charCodeAt(S++),b==this.blockSize){i(this,C),b=0;break}}else for(;S<_;)if(C[b++]=T[S++],b==this.blockSize){i(this,C),b=0;break}}this.h=b,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var w=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=w&255,w/=256;for(this.u(T),T=Array(16),_=w=0;4>_;++_)for(var C=0;32>C;C+=8)T[w++]=this.g[_]>>>C&255;return T};function s(T,_){var w=a;return Object.prototype.hasOwnProperty.call(w,T)?w[T]:w[T]=_(T)}function o(T,_){this.h=_;for(var w=[],C=!0,b=T.length-1;0<=b;b--){var S=T[b]|0;C&&S==_||(w[b]=S,C=!1)}this.g=w}var a={};function c(T){return-128<=T&&128>T?s(T,function(_){return new o([_|0],0>_?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return N(l(-T));for(var _=[],w=1,C=0;T>=w;C++)_[C]=T/w|0,w*=4294967296;return new o(_,0)}function d(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return N(d(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(_,8)),C=f,b=0;b<T.length;b+=8){var S=Math.min(8,T.length-b),I=parseInt(T.substring(b,b+S),_);8>S?(S=l(Math.pow(_,S)),C=C.j(S).add(l(I))):(C=C.j(w),C=C.add(l(I)))}return C}var f=c(0),g=c(1),y=c(16777216);n=o.prototype,n.m=function(){if(R(this))return-N(this).m();for(var T=0,_=1,w=0;w<this.g.length;w++){var C=this.i(w);T+=(0<=C?C:4294967296+C)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(R(this))return"-"+N(this).toString(T);for(var _=l(Math.pow(T,6)),w=this,C="";;){var b=ee(w,_).g;w=L(w,b.j(_));var S=((0<w.g.length?w.g[0]:w.h)>>>0).toString(T);if(w=b,E(w))return S+C;for(;6>S.length;)S="0"+S;C=S+C}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function R(T){return T.h==-1}n.l=function(T){return T=L(this,T),R(T)?-1:E(T)?0:1};function N(T){for(var _=T.g.length,w=[],C=0;C<_;C++)w[C]=~T.g[C];return new o(w,~T.h).add(g)}n.abs=function(){return R(this)?N(this):this},n.add=function(T){for(var _=Math.max(this.g.length,T.g.length),w=[],C=0,b=0;b<=_;b++){var S=C+(this.i(b)&65535)+(T.i(b)&65535),I=(S>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);C=I>>>16,S&=65535,I&=65535,w[b]=I<<16|S}return new o(w,w[w.length-1]&-2147483648?-1:0)};function L(T,_){return T.add(N(_))}n.j=function(T){if(E(this)||E(T))return f;if(R(this))return R(T)?N(this).j(N(T)):N(N(this).j(T));if(R(T))return N(this.j(N(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var _=this.g.length+T.g.length,w=[],C=0;C<2*_;C++)w[C]=0;for(C=0;C<this.g.length;C++)for(var b=0;b<T.g.length;b++){var S=this.i(C)>>>16,I=this.i(C)&65535,wr=T.i(b)>>>16,fc=T.i(b)&65535;w[2*C+2*b]+=I*fc,$(w,2*C+2*b),w[2*C+2*b+1]+=S*fc,$(w,2*C+2*b+1),w[2*C+2*b+1]+=I*wr,$(w,2*C+2*b+1),w[2*C+2*b+2]+=S*wr,$(w,2*C+2*b+2)}for(C=0;C<_;C++)w[C]=w[2*C+1]<<16|w[2*C];for(C=_;C<2*_;C++)w[C]=0;return new o(w,0)};function $(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function H(T,_){this.g=T,this.h=_}function ee(T,_){if(E(_))throw Error("division by zero");if(E(T))return new H(f,f);if(R(T))return _=ee(N(T),_),new H(N(_.g),N(_.h));if(R(_))return _=ee(T,N(_)),new H(N(_.g),_.h);if(30<T.g.length){if(R(T)||R(_))throw Error("slowDivide_ only works with positive integers.");for(var w=g,C=_;0>=C.l(T);)w=Ue(w),C=Ue(C);var b=te(w,1),S=te(C,1);for(C=te(C,2),w=te(w,2);!E(C);){var I=S.add(C);0>=I.l(T)&&(b=b.add(w),S=I),C=te(C,1),w=te(w,1)}return _=L(T,b.j(_)),new H(b,_)}for(b=f;0<=T.l(_);){for(w=Math.max(1,Math.floor(T.m()/_.m())),C=Math.ceil(Math.log(w)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),S=l(w),I=S.j(_);R(I)||0<I.l(T);)w-=C,S=l(w),I=S.j(_);E(S)&&(S=g),b=b.add(S),T=L(T,I)}return new H(b,T)}n.A=function(T){return ee(this,T).h},n.and=function(T){for(var _=Math.max(this.g.length,T.g.length),w=[],C=0;C<_;C++)w[C]=this.i(C)&T.i(C);return new o(w,this.h&T.h)},n.or=function(T){for(var _=Math.max(this.g.length,T.g.length),w=[],C=0;C<_;C++)w[C]=this.i(C)|T.i(C);return new o(w,this.h|T.h)},n.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),w=[],C=0;C<_;C++)w[C]=this.i(C)^T.i(C);return new o(w,this.h^T.h)};function Ue(T){for(var _=T.g.length+1,w=[],C=0;C<_;C++)w[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(w,T.h)}function te(T,_){var w=_>>5;_%=32;for(var C=T.g.length-w,b=[],S=0;S<C;S++)b[S]=0<_?T.i(S+w)>>>_|T.i(S+w+1)<<32-_:T.i(S+w);return new o(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Sw=kM.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,Vi=kM.Integer=o}).apply(typeof PM<"u"?PM:typeof self<"u"?self:typeof window<"u"?window:{});var Jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Br={};var Aw,Rw,ga,Nw,ju,Zf,Mw,xw,Pw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jf=="object"&&Jf];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var D=u[m];if(!(D in p))break e;p=p[D]}u=u[u.length-1],m=p[u],h=h(m),h!=m&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,m=!1,D={next:function(){if(!m&&p<u.length){var A=p++;return{value:h(A,u[A]),done:!1}}return m=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,m),u.apply(h,D)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function E(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(m,D,A){for(var O=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)O[xe-2]=arguments[xe];return h.prototype[D].apply(m,O)}}function R(u){let h=u.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=u[m];return p}return[]}function N(u,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let D=u.length||0,A=m.length||0;u.length=D+A;for(let O=0;O<A;O++)u[D+O]=m[O]}else u.push(m)}}class L{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function $(u){return/^[\s\xa0]*$/.test(u)}function H(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function ee(u){return ee[" "](u),u}ee[" "]=function(){};var Ue=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function te(u,h,p){for(let m in u)h.call(p,u[m],m,u)}function T(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function _(u){let h={};for(let p in u)h[p]=u[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,h){let p,m;for(let D=1;D<arguments.length;D++){m=arguments[D];for(p in m)u[p]=m[p];for(let A=0;A<w.length;A++)p=w[A],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function b(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function S(u){a.setTimeout(()=>{throw u},0)}function I(){var u=sm;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class wr{constructor(){this.h=this.g=null}add(h,p){let m=fc.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var fc=new L(()=>new O1,u=>u.reset());class O1{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let pc,gc=!1,sm=new wr,hb=()=>{let u=a.Promise.resolve(void 0);pc=()=>{u.then(F1)}};var F1=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(p){S(p)}var h=fc;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}gc=!1};function ri(){this.s=this.s,this.C=this.C}ri.prototype.s=!1,ri.prototype.ma=function(){this.s||(this.s=!0,this.N())},ri.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Dt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Dt.prototype.h=function(){this.defaultPrevented=!0};var L1=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function mc(u,h){if(Dt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(Ue){e:{try{ee(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:V1[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&mc.aa.h.call(this)}}E(mc,Dt);var V1={2:"touch",3:"pen",4:"mouse"};mc.prototype.h=function(){mc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var yc="closure_listenable_"+(1e6*Math.random()|0),U1=0;function j1(u,h,p,m,D){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=D,this.key=++U1,this.da=this.fa=!1}function Ql(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Yl(u){this.src=u,this.g={},this.h=0}Yl.prototype.add=function(u,h,p,m,D){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var O=am(u,h,m,D);return-1<O?(h=u[O],p||(h.fa=!1)):(h=new j1(h,this.src,A,!!m,D),h.fa=p,u.push(h)),h};function om(u,h){var p=h.type;if(p in u.g){var m=u.g[p],D=Array.prototype.indexOf.call(m,h,void 0),A;(A=0<=D)&&Array.prototype.splice.call(m,D,1),A&&(Ql(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function am(u,h,p,m){for(var D=0;D<u.length;++D){var A=u[D];if(!A.da&&A.listener==h&&A.capture==!!p&&A.ha==m)return D}return-1}var cm="closure_lm_"+(1e6*Math.random()|0),um={};function fb(u,h,p,m,D){if(m&&m.once)return gb(u,h,p,m,D);if(Array.isArray(h)){for(var A=0;A<h.length;A++)fb(u,h[A],p,m,D);return null}return p=fm(p),u&&u[yc]?u.K(h,p,l(m)?!!m.capture:!!m,D):pb(u,h,p,!1,m,D)}function pb(u,h,p,m,D,A){if(!h)throw Error("Invalid event type");var O=l(D)?!!D.capture:!!D,xe=dm(u);if(xe||(u[cm]=xe=new Yl(u)),p=xe.add(h,p,m,O,A),p.proxy)return p;if(m=B1(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)L1||(D=O),D===void 0&&(D=!1),u.addEventListener(h.toString(),m,D);else if(u.attachEvent)u.attachEvent(yb(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function B1(){function u(p){return h.call(u.src,u.listener,p)}let h=$1;return u}function gb(u,h,p,m,D){if(Array.isArray(h)){for(var A=0;A<h.length;A++)gb(u,h[A],p,m,D);return null}return p=fm(p),u&&u[yc]?u.L(h,p,l(m)?!!m.capture:!!m,D):pb(u,h,p,!0,m,D)}function mb(u,h,p,m,D){if(Array.isArray(h))for(var A=0;A<h.length;A++)mb(u,h[A],p,m,D);else m=l(m)?!!m.capture:!!m,p=fm(p),u&&u[yc]?(u=u.i,h=String(h).toString(),h in u.g&&(A=u.g[h],p=am(A,p,m,D),-1<p&&(Ql(A[p]),Array.prototype.splice.call(A,p,1),A.length==0&&(delete u.g[h],u.h--)))):u&&(u=dm(u))&&(h=u.g[h.toString()],u=-1,h&&(u=am(h,p,m,D)),(p=-1<u?h[u]:null)&&lm(p))}function lm(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[yc])om(h.i,u);else{var p=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(p,m,u.capture):h.detachEvent?h.detachEvent(yb(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=dm(h))?(om(p,u),p.h==0&&(p.src=null,h[cm]=null)):Ql(u)}}}function yb(u){return u in um?um[u]:um[u]="on"+u}function $1(u,h){if(u.da)u=!0;else{h=new mc(h,this);var p=u.listener,m=u.ha||u.src;u.fa&&lm(u),u=p.call(m,h)}return u}function dm(u){return u=u[cm],u instanceof Yl?u:null}var hm="__closure_events_fn_"+(1e9*Math.random()>>>0);function fm(u){return typeof u=="function"?u:(u[hm]||(u[hm]=function(h){return u.handleEvent(h)}),u[hm])}function St(){ri.call(this),this.i=new Yl(this),this.M=this,this.F=null}E(St,ri),St.prototype[yc]=!0,St.prototype.removeEventListener=function(u,h,p,m){mb(this,u,h,p,m)};function Ot(u,h){var p,m=u.F;if(m)for(p=[];m;m=m.F)p.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new Dt(h,u);else if(h instanceof Dt)h.target=h.target||u;else{var D=h;h=new Dt(m,u),C(h,D)}if(D=!0,p)for(var A=p.length-1;0<=A;A--){var O=h.g=p[A];D=Jl(O,m,!0,h)&&D}if(O=h.g=u,D=Jl(O,m,!0,h)&&D,D=Jl(O,m,!1,h)&&D,p)for(A=0;A<p.length;A++)O=h.g=p[A],D=Jl(O,m,!1,h)&&D}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],m=0;m<p.length;m++)Ql(p[m]);delete u.g[h],u.h--}}this.F=null},St.prototype.K=function(u,h,p,m){return this.i.add(String(u),h,!1,p,m)},St.prototype.L=function(u,h,p,m){return this.i.add(String(u),h,!0,p,m)};function Jl(u,h,p,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,A=0;A<h.length;++A){var O=h[A];if(O&&!O.da&&O.capture==p){var xe=O.listener,_t=O.ha||O.src;O.fa&&om(u.i,O),D=xe.call(_t,m)!==!1&&D}}return D&&!m.defaultPrevented}function _b(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function vb(u){u.g=_b(()=>{u.g=null,u.i&&(u.i=!1,vb(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class H1 extends ri{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:vb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _c(u){ri.call(this),this.h=u,this.g={}}E(_c,ri);var wb=[];function Ib(u){te(u.g,function(h,p){this.g.hasOwnProperty(p)&&lm(h)},u),u.g={}}_c.prototype.N=function(){_c.aa.N.call(this),Ib(this)},_c.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pm=a.JSON.stringify,z1=a.JSON.parse,q1=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function gm(){}gm.prototype.h=null;function Eb(u){return u.h||(u.h=u.i())}function Cb(){}var vc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mm(){Dt.call(this,"d")}E(mm,Dt);function ym(){Dt.call(this,"c")}E(ym,Dt);var ts={},Tb=null;function Zl(){return Tb=Tb||new St}ts.La="serverreachability";function bb(u){Dt.call(this,ts.La,u)}E(bb,Dt);function wc(u){let h=Zl();Ot(h,new bb(h))}ts.STAT_EVENT="statevent";function Db(u,h){Dt.call(this,ts.STAT_EVENT,u),this.stat=h}E(Db,Dt);function Ft(u){let h=Zl();Ot(h,new Db(h,u))}ts.Ma="timingevent";function Sb(u,h){Dt.call(this,ts.Ma,u),this.size=h}E(Sb,Dt);function Ic(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function Ec(){this.g=!0}Ec.prototype.xa=function(){this.g=!1};function G1(u,h,p,m,D,A){u.info(function(){if(u.g)if(A)for(var O="",xe=A.split("&"),_t=0;_t<xe.length;_t++){var Ee=xe[_t].split("=");if(1<Ee.length){var At=Ee[0];Ee=Ee[1];var Rt=At.split("_");O=2<=Rt.length&&Rt[1]=="type"?O+(At+"="+Ee+"&"):O+(At+"=redacted&")}}else O=null;else O=A;return"XMLHTTP REQ ("+m+") [attempt "+D+"]: "+h+`
`+p+`
`+O})}function W1(u,h,p,m,D,A,O){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+D+"]: "+h+`
`+p+`
`+A+" "+O})}function go(u,h,p,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+Q1(u,p)+(m?" "+m:"")})}function K1(u,h){u.info(function(){return"TIMEOUT: "+h})}Ec.prototype.info=function(){};function Q1(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var m=p[u];if(!(2>m.length)){var D=m[1];if(Array.isArray(D)&&!(1>D.length)){var A=D[0];if(A!="noop"&&A!="stop"&&A!="close")for(var O=1;O<D.length;O++)D[O]=""}}}}return pm(p)}catch{return h}}var Xl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ab={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_m;function ed(){}E(ed,gm),ed.prototype.g=function(){return new XMLHttpRequest},ed.prototype.i=function(){return{}},_m=new ed;function ii(u,h,p,m){this.j=u,this.i=h,this.l=p,this.R=m||1,this.U=new _c(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rb}function Rb(){this.i=null,this.g="",this.h=!1}var Nb={},vm={};function wm(u,h,p){u.L=1,u.v=id(Ir(h)),u.m=p,u.P=!0,Mb(u,null)}function Mb(u,h){u.F=Date.now(),td(u),u.A=Ir(u.v);var p=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),qb(p.i,"t",m),u.C=0,p=u.j.J,u.h=new Rb,u.g=uD(u.j,p?h:null,!u.m),0<u.O&&(u.M=new H1(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,m=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(wb[0]=D.toString()),D=wb);for(var A=0;A<D.length;A++){var O=fb(p,D[A],m||h.handleEvent,!1,h.h||h);if(!O)break;h.g[O.key]=O}h=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),wc(),G1(u.i,u.u,u.A,u.l,u.R,u.m)}ii.prototype.ca=function(u){u=u.target;let h=this.M;h&&Er(u)==3?h.j():this.Y(u)},ii.prototype.Y=function(u){try{if(u==this.g)e:{let Rt=Er(this.g);var h=this.g.Ba();let _o=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||Zb(this.g)))){this.J||Rt!=4||h==7||(h==8||0>=_o?wc(3):wc(2)),Im(this);var p=this.g.Z();this.X=p;t:if(xb(this)){var m=Zb(this.g);u="";var D=m.length,A=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ns(this),Cc(this);var O="";break t}this.h.i=new a.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,u+=this.h.i.decode(m[h],{stream:!(A&&h==D-1)});m.length=0,this.h.g+=u,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=p==200,W1(this.i,this.u,this.A,this.l,this.R,Rt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,_t=this.g;if((xe=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(xe)){var Ee=xe;break t}}Ee=null}if(p=Ee)go(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Em(this,p);else{this.o=!1,this.s=3,Ft(12),ns(this),Cc(this);break e}}if(this.P){p=!0;let bn;for(;!this.J&&this.C<O.length;)if(bn=Y1(this,O),bn==vm){Rt==4&&(this.s=4,Ft(14),p=!1),go(this.i,this.l,null,"[Incomplete Response]");break}else if(bn==Nb){this.s=4,Ft(15),go(this.i,this.l,O,"[Invalid Chunk]"),p=!1;break}else go(this.i,this.l,bn,null),Em(this,bn);if(xb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||O.length!=0||this.h.h||(this.s=1,Ft(16),p=!1),this.o=this.o&&p,!p)go(this.i,this.l,O,"[Invalid Chunked Response]"),ns(this),Cc(this);else if(0<O.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Am(At),At.M=!0,Ft(11))}}else go(this.i,this.l,O,null),Em(this,O);Rt==4&&ns(this),this.o&&!this.J&&(Rt==4?sD(this.j,this):(this.o=!1,td(this)))}else fF(this.g),p==400&&0<O.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),ns(this),Cc(this)}}}catch{}finally{}};function xb(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Y1(u,h){var p=u.C,m=h.indexOf(`
`,p);return m==-1?vm:(p=Number(h.substring(p,m)),isNaN(p)?Nb:(m+=1,m+p>h.length?vm:(h=h.slice(m,m+p),u.C=m+p,h)))}ii.prototype.cancel=function(){this.J=!0,ns(this)};function td(u){u.S=Date.now()+u.I,Pb(u,u.I)}function Pb(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ic(g(u.ba,u),h)}function Im(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ii.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(K1(this.i,this.A),this.L!=2&&(wc(),Ft(17)),ns(this),this.s=2,Cc(this)):Pb(this,this.S-u)};function Cc(u){u.j.G==0||u.J||sD(u.j,u)}function ns(u){Im(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,Ib(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function Em(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||Cm(p.h,u))){if(!u.K&&Cm(p.h,u)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var D=m;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)ud(p),ad(p);else break e;Sm(p),Ft(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ic(g(p.Za,p),6e3));if(1>=Fb(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else is(p,11)}else if((u.K||p.g==u)&&ud(p),!$(h))for(D=p.Da.g.parse(h),h=0;h<D.length;h++){let Ee=D[h];if(p.T=Ee[0],Ee=Ee[1],p.G==2)if(Ee[0]=="c"){p.K=Ee[1],p.ia=Ee[2];let At=Ee[3];At!=null&&(p.la=At,p.j.info("VER="+p.la));let Rt=Ee[4];Rt!=null&&(p.Aa=Rt,p.j.info("SVER="+p.Aa));let _o=Ee[5];_o!=null&&typeof _o=="number"&&0<_o&&(m=1.5*_o,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let bn=u.g;if(bn){let dd=bn.g?bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dd){var A=m.h;A.g||dd.indexOf("spdy")==-1&&dd.indexOf("quic")==-1&&dd.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Tm(A,A.h),A.h=null))}if(m.D){let Rm=bn.g?bn.g.getResponseHeader("X-HTTP-Session-Id"):null;Rm&&(m.ya=Rm,Ve(m.I,m.D,Rm))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var O=u;if(m.qa=cD(m,m.J?m.ia:null,m.W),O.K){Lb(m.h,O);var xe=O,_t=m.L;_t&&(xe.I=_t),xe.B&&(Im(xe),td(xe)),m.g=O}else rD(m);0<p.i.length&&cd(p)}else Ee[0]!="stop"&&Ee[0]!="close"||is(p,7);else p.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?is(p,7):Dm(p):Ee[0]!="noop"&&p.l&&p.l.ta(Ee),p.v=0)}}wc(4)}catch{}}var J1=class{constructor(u,h){this.g=u,this.map=h}};function kb(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ob(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Fb(u){return u.h?1:u.g?u.g.size:0}function Cm(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function Tm(u,h){u.g?u.g.add(h):u.h=h}function Lb(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}kb.prototype.cancel=function(){if(this.i=Vb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Vb(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return R(u.i)}function Z1(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,m=0;m<p;m++)h.push(u[m]);return h}h=[],p=0;for(m in u)h[p++]=u[m];return h}function X1(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let m in u)h[p++]=m;return h}}}function Ub(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=X1(u),m=Z1(u),D=m.length,A=0;A<D;A++)h.call(void 0,m[A],p&&p[A],u)}var jb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eF(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var m=u[p].indexOf("="),D=null;if(0<=m){var A=u[p].substring(0,m);D=u[p].substring(m+1)}else A=u[p];h(A,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function rs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof rs){this.h=u.h,nd(this,u.j),this.o=u.o,this.g=u.g,rd(this,u.s),this.l=u.l;var h=u.i,p=new Dc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Bb(this,p),this.m=u.m}else u&&(h=String(u).match(jb))?(this.h=!1,nd(this,h[1]||"",!0),this.o=Tc(h[2]||""),this.g=Tc(h[3]||"",!0),rd(this,h[4]),this.l=Tc(h[5]||"",!0),Bb(this,h[6]||"",!0),this.m=Tc(h[7]||"")):(this.h=!1,this.i=new Dc(null,this.h))}rs.prototype.toString=function(){var u=[],h=this.j;h&&u.push(bc(h,$b,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(bc(h,$b,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(bc(p,p.charAt(0)=="/"?rF:nF,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",bc(p,sF)),u.join("")};function Ir(u){return new rs(u)}function nd(u,h,p){u.j=p?Tc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function rd(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function Bb(u,h,p){h instanceof Dc?(u.i=h,oF(u.i,u.h)):(p||(h=bc(h,iF)),u.i=new Dc(h,u.h))}function Ve(u,h,p){u.i.set(h,p)}function id(u){return Ve(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Tc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function bc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,tF),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function tF(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var $b=/[#\/\?@]/g,nF=/[#\?:]/g,rF=/[#\?]/g,iF=/[#\?@]/g,sF=/#/g;function Dc(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function si(u){u.g||(u.g=new Map,u.h=0,u.i&&eF(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Dc.prototype,n.add=function(u,h){si(this),this.i=null,u=mo(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function Hb(u,h){si(u),h=mo(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function zb(u,h){return si(u),h=mo(u,h),u.g.has(h)}n.forEach=function(u,h){si(this),this.g.forEach(function(p,m){p.forEach(function(D){u.call(h,D,m,this)},this)},this)},n.na=function(){si(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let D=u[m];for(let A=0;A<D.length;A++)p.push(h[m])}return p},n.V=function(u){si(this);let h=[];if(typeof u=="string")zb(this,u)&&(h=h.concat(this.g.get(mo(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},n.set=function(u,h){return si(this),this.i=null,u=mo(this,u),zb(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function qb(u,h,p){Hb(u,h),0<p.length&&(u.i=null,u.g.set(mo(u,h),R(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let A=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var D=A;O[m]!==""&&(D+="="+encodeURIComponent(String(O[m]))),u.push(D)}}return this.i=u.join("&")};function mo(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function oF(u,h){h&&!u.j&&(si(u),u.i=null,u.g.forEach(function(p,m){var D=m.toLowerCase();m!=D&&(Hb(this,m),qb(this,D,p))},u)),u.j=h}function aF(u,h){let p=new Ec;if(a.Image){let m=new Image;m.onload=y(oi,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(oi,p,"TestLoadImage: error",!1,h,m),m.onabort=y(oi,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(oi,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function cF(u,h){let p=new Ec,m=new AbortController,D=setTimeout(()=>{m.abort(),oi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(A=>{clearTimeout(D),A.ok?oi(p,"TestPingServer: ok",!0,h):oi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),oi(p,"TestPingServer: error",!1,h)})}function oi(u,h,p,m,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),m(p)}catch{}}function uF(){this.g=new q1}function lF(u,h,p){let m=p||"";try{Ub(u,function(D,A){let O=D;l(D)&&(O=pm(D)),h.push(m+A+"="+encodeURIComponent(O))})}catch(D){throw h.push(m+"type="+encodeURIComponent("_badmap")),D}}function Sc(u){this.l=u.Ub||null,this.j=u.eb||!1}E(Sc,gm),Sc.prototype.g=function(){return new sd(this.l,this.j)},Sc.prototype.i=function(u){return function(){return u}}({});function sd(u,h){St.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(sd,St),n=sd.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Rc(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ac(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Rc(this)),this.g&&(this.readyState=3,Rc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gb(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gb(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Ac(this):Rc(this),this.readyState==3&&Gb(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ac(this))},n.Qa=function(u){this.g&&(this.response=u,Ac(this))},n.ga=function(){this.g&&Ac(this)};function Ac(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Rc(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Rc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(sd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Wb(u){let h="";return te(u,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function bm(u,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=Wb(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Ve(u,h,p))}function qe(u){St.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(qe,St);var dF=/^https?$/i,hF=["POST","PUT"];n=qe.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_m.g(),this.v=this.o?Eb(this.o):Eb(_m),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(A){Kb(this,A);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var D in m)p.set(D,m[D]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())p.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(A=>A.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(hF,h,void 0))||m||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,O]of p)this.g.setRequestHeader(A,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jb(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){Kb(this,A)}};function Kb(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,Qb(u),od(u)}function Qb(u){u.A||(u.A=!0,Ot(u,"complete"),Ot(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ot(this,"complete"),Ot(this,"abort"),od(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),od(this,!0)),qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Yb(this):this.bb())},n.bb=function(){Yb(this)};function Yb(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Er(u)!=4||u.Z()!=2)){if(u.u&&Er(u)==4)_b(u.Ea,0,u);else if(Ot(u,"readystatechange"),Er(u)==4){u.h=!1;try{let O=u.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=O===0){var D=String(u.D).match(jb)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),m=!dF.test(D?D.toLowerCase():"")}p=m}if(p)Ot(u,"complete"),Ot(u,"success");else{u.m=6;try{var A=2<Er(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",Qb(u)}}finally{od(u)}}}}function od(u,h){if(u.g){Jb(u);let p=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||Ot(u,"ready");try{p.onreadystatechange=m}catch{}}}function Jb(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Er(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),z1(h)}};function Zb(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function fF(u){let h={};u=(u.g&&2<=Er(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if($(u[m]))continue;var p=b(u[m]);let D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let A=h[D]||[];h[D]=A,A.push(p)}T(h,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nc(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function Xb(u){this.Aa=0,this.i=[],this.j=new Ec,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Nc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Nc("baseRetryDelayMs",5e3,u),this.cb=Nc("retryDelaySeedMs",1e4,u),this.Wa=Nc("forwardChannelMaxRetries",2,u),this.wa=Nc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new kb(u&&u.concurrentRequestLimit),this.Da=new uF,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Xb.prototype,n.la=8,n.G=1,n.connect=function(u,h,p,m){Ft(0),this.W=u,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=cD(this,null,this.W),cd(this)};function Dm(u){if(eD(u),u.G==3){var h=u.U++,p=Ir(u.I);if(Ve(p,"SID",u.K),Ve(p,"RID",h),Ve(p,"TYPE","terminate"),Mc(u,p),h=new ii(u,u.j,h),h.L=2,h.v=id(Ir(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=uD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),td(h)}aD(u)}function ad(u){u.g&&(Am(u),u.g.cancel(),u.g=null)}function eD(u){ad(u),u.u&&(a.clearTimeout(u.u),u.u=null),ud(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function cd(u){if(!Ob(u.h)&&!u.s){u.s=!0;var h=u.Ga;pc||hb(),gc||(pc(),gc=!0),sm.add(h,u),u.B=0}}function pF(u,h){return Fb(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ic(g(u.Ga,u,h),oD(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let D=new ii(this,this.j,u),A=this.o;if(this.S&&(A?(A=_(A),C(A,this.S)):A=this.S),this.m!==null||this.O||(D.H=A,A=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=nD(this,D,h),p=Ir(this.I),Ve(p,"RID",u),Ve(p,"CVER",22),this.D&&Ve(p,"X-HTTP-Session-Id",this.D),Mc(this,p),A&&(this.O?h="headers="+encodeURIComponent(String(Wb(A)))+"&"+h:this.m&&bm(p,this.m,A)),Tm(this.h,D),this.Ua&&Ve(p,"TYPE","init"),this.P?(Ve(p,"$req",h),Ve(p,"SID","null"),D.T=!0,wm(D,p,null)):wm(D,p,h),this.G=2}}else this.G==3&&(u?tD(this,u):this.i.length==0||Ob(this.h)||tD(this))};function tD(u,h){var p;h?p=h.l:p=u.U++;let m=Ir(u.I);Ve(m,"SID",u.K),Ve(m,"RID",p),Ve(m,"AID",u.T),Mc(u,m),u.m&&u.o&&bm(m,u.m,u.o),p=new ii(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=nD(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Tm(u.h,p),wm(p,m,h)}function Mc(u,h){u.H&&te(u.H,function(p,m){Ve(h,m,p)}),u.l&&Ub({},function(p,m){Ve(h,m,p)})}function nD(u,h,p){p=Math.min(u.i.length,p);var m=u.l?g(u.l.Na,u.l,u):null;e:{var D=u.i;let A=-1;for(;;){let O=["count="+p];A==-1?0<p?(A=D[0].g,O.push("ofs="+A)):A=0:O.push("ofs="+A);let xe=!0;for(let _t=0;_t<p;_t++){let Ee=D[_t].g,At=D[_t].map;if(Ee-=A,0>Ee)A=Math.max(0,D[_t].g-100),xe=!1;else try{lF(At,O,"req"+Ee+"_")}catch{m&&m(At)}}if(xe){m=O.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,m}function rD(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;pc||hb(),gc||(pc(),gc=!0),sm.add(h,u),u.v=0}}function Sm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ic(g(u.Fa,u),oD(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,iD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ic(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),ad(this),iD(this))};function Am(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function iD(u){u.g=new ii(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Ir(u.qa);Ve(h,"RID","rpc"),Ve(h,"SID",u.K),Ve(h,"AID",u.T),Ve(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ve(h,"TO",u.ja),Ve(h,"TYPE","xmlhttp"),Mc(u,h),u.m&&u.o&&bm(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=id(Ir(h)),p.m=null,p.P=!0,Mb(p,u)}n.Za=function(){this.C!=null&&(this.C=null,ad(this),Sm(this),Ft(19))};function ud(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function sD(u,h){var p=null;if(u.g==h){ud(u),Am(u),u.g=null;var m=2}else if(Cm(u.h,h))p=h.D,Lb(u.h,h),m=1;else return;if(u.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var D=u.B;m=Zl(),Ot(m,new Sb(m,p)),cd(u)}else rD(u);else if(D=h.s,D==3||D==0&&0<h.X||!(m==1&&pF(u,h)||m==2&&Sm(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),D){case 1:is(u,5);break;case 4:is(u,10);break;case 3:is(u,6);break;default:is(u,2)}}}function oD(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function is(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),m=u.Xa;let D=!m;m=new rs(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||nd(m,"https"),id(m),D?aF(m.toString(),p):cF(m.toString(),p)}else Ft(2);u.G=0,u.l&&u.l.sa(h),aD(u),eD(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function aD(u){if(u.G=0,u.ka=[],u.l){let h=Vb(u.h);(h.length!=0||u.i.length!=0)&&(N(u.ka,h),N(u.ka,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.ra()}}function cD(u,h,p){var m=p instanceof rs?Ir(p):new rs(p);if(m.g!="")h&&(m.g=h+"."+m.g),rd(m,m.s);else{var D=a.location;m=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var A=new rs(null);m&&nd(A,m),h&&(A.g=h),D&&rd(A,D),p&&(A.l=p),m=A}return p=u.D,h=u.ya,p&&h&&Ve(m,p,h),Ve(m,"VER",u.la),Mc(u,m),m}function uD(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new qe(new Sc({eb:p})):new qe(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function lD(){}n=lD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ld(){}ld.prototype.g=function(u,h){return new Xt(u,h)};function Xt(u,h){St.call(this),this.g=new Xb(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!$(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!$(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new yo(this)}E(Xt,St),Xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){Dm(this.g)},Xt.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=pm(u),u=p);h.i.push(new J1(h.Ya++,u)),h.G==3&&cd(h)},Xt.prototype.N=function(){this.g.l=null,delete this.j,Dm(this.g),delete this.g,Xt.aa.N.call(this)};function dD(u){mm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}E(dD,mm);function hD(){ym.call(this),this.status=1}E(hD,ym);function yo(u){this.g=u}E(yo,lD),yo.prototype.ua=function(){Ot(this.g,"a")},yo.prototype.ta=function(u){Ot(this.g,new dD(u))},yo.prototype.sa=function(u){Ot(this.g,new hD)},yo.prototype.ra=function(){Ot(this.g,"b")},ld.prototype.createWebChannel=ld.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,Pw=Br.createWebChannelTransport=function(){return new ld},xw=Br.getStatEventTarget=function(){return Zl()},Mw=Br.Event=ts,Zf=Br.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xl.NO_ERROR=0,Xl.TIMEOUT=8,Xl.HTTP_ERROR=6,ju=Br.ErrorCode=Xl,Ab.COMPLETE="complete",Nw=Br.EventType=Ab,Cb.EventType=vc,vc.OPEN="a",vc.CLOSE="b",vc.ERROR="c",vc.MESSAGE="d",St.prototype.listen=St.prototype.K,ga=Br.WebChannel=Cb,Rw=Br.FetchXmlHttpFactory=Sc,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,Aw=Br.XhrIo=qe}).apply(typeof Jf<"u"?Jf:typeof self<"u"?self:typeof window<"u"?window:{});var OM="@firebase/firestore";var yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");var Fa="10.13.2";var qs=new ar("@firebase/firestore");function Bu(){return qs.logLevel}function U(n,...e){if(qs.logLevel<=he.DEBUG){let t=e.map(pE);qs.debug(`Firestore (${Fa}): ${n}`,...t)}}function $r(n,...e){if(qs.logLevel<=he.ERROR){let t=e.map(pE);qs.error(`Firestore (${Fa}): ${n}`,...t)}}function Ea(n,...e){if(qs.logLevel<=he.WARN){let t=e.map(pE);qs.warn(`Firestore (${Fa}): ${n}`,...t)}}function pE(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Y(n="Unexpected state"){let e=`FIRESTORE (${Fa}) INTERNAL ASSERTION FAILED: `+n;throw $r(e),new Error(e)}function Oe(n,e){n||Y()}function X(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends un{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Bn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var rp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Vw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yt.UNAUTHENTICATED))}shutdown(){}},Uw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},jw=class{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Bn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Bn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>v(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Bn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string"),new rp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new yt(e)}},Bw=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},$w=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Bw(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Hw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},zw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=s=>{s.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Oe(typeof t.token=="string"),this.R=t.token,new Hw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function tq(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ip=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=tq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function Ce(n,e){return n<e?-1:n>e?1:0}function Ca(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Tt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var se=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Tt(0,0))}static max(){return new n(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var sp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Y(),r===void 0?r=e.length-t:r>e.length-t&&Y(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Qe=class n extends sp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},nq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ln=class n extends sp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return nq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new B(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var W=class n{constructor(e){this.path=e}static fromPath(e){return new n(Qe.fromString(e))}static fromName(e){return new n(Qe.fromString(e).popFirst(5))}static empty(){return new n(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Qe(e.slice()))}};var qw=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};qw.UNKNOWN_ID=-1;function rq(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new Tt(t+1,0):new Tt(t,r));return new Gs(i,W.empty(),e)}function iq(n){return new Gs(n.readTime,n.key,-1)}var Gs=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(se.min(),W.empty(),-1)}static max(){return new n(se.max(),W.empty(),-1)}};function sq(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=W.comparator(n.documentKey,e.documentKey),t!==0?t:Ce(n.largestBatchId,e.largestBatchId))}var oq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function il(n){return v(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==oq)throw n;U("LocalStore","Unexpectedly lost primary lease")})}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function aq(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function sl(n){return n.name==="IndexedDbTransactionError"}var dx=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Fp(n){return n==null}function Wu(n){return n===0&&1/n==-1/0}function cq(n){return typeof n=="number"&&Number.isInteger(n)&&!Wu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var uq=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Hte=[...uq,"documentOverlays"],lq=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dq=lq,hq=[...dq,"indexConfiguration","indexState","indexEntries"];var zte=[...hq,"globals"];function FM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function La(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hx(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ye=class n{constructor(e,t){this.comparator=e,this.root=t||fr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new va(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new va(this.root,e,this.comparator,!1)}getReverseIterator(){return new va(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new va(this.root,e,this.comparator,!0)}},va=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},fr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();let e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}};fr.EMPTY=null,fr.RED=!0,fr.BLACK=!1;fr.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,t,r,i,s){return this}insert(e,t,r){return new fr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var xt=class n{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new op(this.data.getIterator())}getIteratorFrom(e){return new op(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},op=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var hr=class n{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new n([])}unionWith(e){let t=new xt(ln.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ca(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var ap=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Pt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ap("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Pt.EMPTY_BYTE_STRING=new Pt("");var fq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(n){if(Oe(!!n),typeof n=="string"){let e=0,t=fq.exec(n);if(Oe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(n.seconds),nanos:He(n.nanos)}}function He(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ji(n){return typeof n=="string"?Pt.fromBase64String(n):Pt.fromUint8Array(n)}function gE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function mE(n){let e=n.mapValue.fields.__previous_value__;return gE(e)?mE(e):e}function Ku(n){let e=Hr(n.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}var Ww=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},cp=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Xf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ws(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gE(n)?4:px(n)?9007199254740991:fx(n)?10:11:Y()}function mr(n,e){if(n===e)return!0;let t=Ws(n);if(t!==Ws(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ku(n).isEqual(Ku(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Hr(i.timestampValue),a=Hr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ji(i.bytesValue).isEqual(ji(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return He(i.geoPointValue.latitude)===He(s.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return He(i.integerValue)===He(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=He(i.doubleValue),a=He(s.doubleValue);return o===a?Wu(o)===Wu(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Ca(n.arrayValue.values||[],e.arrayValue.values||[],mr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(FM(o)!==FM(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!mr(o[c],a[c])))return!1;return!0}(n,e);default:return Y()}}function Qu(n,e){return(n.values||[]).find(t=>mr(t,e))!==void 0}function Ta(n,e){if(n===e)return 0;let t=Ws(n),r=Ws(e);if(t!==r)return Ce(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=He(s.integerValue||s.doubleValue),c=He(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return LM(n.timestampValue,e.timestampValue);case 4:return LM(Ku(n),Ku(e));case 5:return Ce(n.stringValue,e.stringValue);case 6:return function(s,o){let a=ji(s),c=ji(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=Ce(a[l],c[l]);if(d!==0)return d}return Ce(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Ce(He(s.latitude),He(o.latitude));return a!==0?a:Ce(He(s.longitude),He(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return VM(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let f=s.fields||{},g=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,E=(c=g.value)===null||c===void 0?void 0:c.arrayValue,R=Ce(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((d=E?.values)===null||d===void 0?void 0:d.length)||0);return R!==0?R:VM(y,E)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Xf.mapValue&&o===Xf.mapValue)return 0;if(s===Xf.mapValue)return 1;if(o===Xf.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=Ce(c[f],d[f]);if(g!==0)return g;let y=Ta(a[c[f]],l[d[f]]);if(y!==0)return y}return Ce(c.length,d.length)}(n.mapValue,e.mapValue);default:throw Y()}}function LM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ce(n,e);let t=Hr(n),r=Hr(e),i=Ce(t.seconds,r.seconds);return i!==0?i:Ce(t.nanos,r.nanos)}function VM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Ta(t[i],r[i]);if(s)return s}return Ce(t.length,r.length)}function ba(n){return Kw(n)}function Kw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Hr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ji(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return W.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Kw(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Kw(t.fields[o])}`;return i+"}"}(n.mapValue):Y()}function Qw(n){return!!n&&"integerValue"in n}function yE(n){return!!n&&"arrayValue"in n}function UM(n){return!!n&&"nullValue"in n}function jM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tp(n){return!!n&&"mapValue"in n}function fx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Hu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return La(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function px(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var jn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!tp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}setAll(e){let t=ln.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Hu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());tp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];tp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){La(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Hu(this.value))}};function gx(n){let e=[];return La(n.fields,(t,r)=>{let i=new ln([t]);if(tp(r)){let s=gx(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new hr(e)}var $n=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,se.min(),se.min(),se.min(),jn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,se.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,se.min(),se.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,se.min(),se.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Da=class{constructor(e,t){this.position=e,this.inclusive=t}};function BM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),t.key):r=Ta(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function $M(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mr(n.position[t],e.position[t]))return!1;return!0}var Sa=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function pq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var up=class{},lt=class n extends up{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Jw(e,t,r):t==="array-contains"?new eI(e,r):t==="in"?new tI(e,r):t==="not-in"?new nI(e,r):t==="array-contains-any"?new rI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Zw(e,r):new Xw(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ta(t,this.value)):t!==null&&Ws(this.value)===Ws(t)&&this.matchesComparison(Ta(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},yr=class n extends up{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return mx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function mx(n){return n.op==="and"}function yx(n){return gq(n)&&mx(n)}function gq(n){for(let e of n.filters)if(e instanceof yr)return!1;return!0}function Yw(n){if(n instanceof lt)return n.field.canonicalString()+n.op.toString()+ba(n.value);if(yx(n))return n.filters.map(e=>Yw(e)).join(",");{let e=n.filters.map(t=>Yw(t)).join(",");return`${n.op}(${e})`}}function _x(n,e){return n instanceof lt?function(r,i){return i instanceof lt&&r.op===i.op&&r.field.isEqual(i.field)&&mr(r.value,i.value)}(n,e):n instanceof yr?function(r,i){return i instanceof yr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&_x(o,i.filters[a]),!0):!1}(n,e):void Y()}function vx(n){return n instanceof lt?function(t){return`${t.field.canonicalString()} ${t.op} ${ba(t.value)}`}(n):n instanceof yr?function(t){return t.op.toString()+" {"+t.getFilters().map(vx).join(" ,")+"}"}(n):"Filter"}var Jw=class extends lt{constructor(e,t,r){super(e,t,r),this.key=W.fromName(r.referenceValue)}matches(e){let t=W.comparator(e.key,this.key);return this.matchesComparison(t)}},Zw=class extends lt{constructor(e,t){super(e,"in",t),this.keys=wx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Xw=class extends lt{constructor(e,t){super(e,"not-in",t),this.keys=wx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function wx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>W.fromName(r.referenceValue))}var eI=class extends lt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return yE(t)&&Qu(t.arrayValue,this.value)}},tI=class extends lt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Qu(this.value.arrayValue,t)}},nI=class extends lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Qu(this.value.arrayValue,t)}},rI=class extends lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!yE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Qu(this.value.arrayValue,r))}};var iI=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function HM(n,e=null,t=[],r=[],i=null,s=null,o=null){return new iI(n,e,t,r,i,s,o)}function _E(n){let e=X(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Yw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Fp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ba(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ba(r)).join(",")),e.ue=t}return e.ue}function vE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!pq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_x(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$M(n.startAt,e.startAt)&&$M(n.endAt,e.endAt)}function sI(n){return W.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Aa=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function mq(n,e,t,r,i,s,o,a){return new Aa(n,e,t,r,i,s,o,a)}function wE(n){return new Aa(n)}function zM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function yq(n){return n.collectionGroup!==null}function zu(n){let e=X(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new xt(ln.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Sa(s,r))}),t.has(ln.keyField().canonicalString())||e.ce.push(new Sa(ln.keyField(),r))}return e.ce}function pr(n){let e=X(n);return e.le||(e.le=_q(e,zu(n))),e.le}function _q(n,e){if(n.limitType==="F")return HM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Sa(i.field,s)});let t=n.endAt?new Da(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Da(n.startAt.position,n.startAt.inclusive):null;return HM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function oI(n,e,t){return new Aa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lp(n,e){return vE(pr(n),pr(e))&&n.limitType===e.limitType}function Ix(n){return`${_E(pr(n))}|lt:${n.limitType}`}function ma(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>vx(i)).join(", ")}]`),Fp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ba(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ba(i)).join(",")),`Target(${r})`}(pr(n))}; limitType=${n.limitType})`}function Vp(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):W.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of zu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=BM(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,zu(r),i)||r.endAt&&!function(o,a,c){let l=BM(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,zu(r),i))}(n,e)}function vq(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ex(n){return(e,t)=>{let r=!1;for(let i of zu(n)){let s=wq(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function wq(n,e,t){let r=n.field.isKeyField()?W.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Ta(c,l):Y()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}var Bi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){La(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return hx(this.inner)}size(){return this.innerSize}};var Iq=new Ye(W.comparator);function zr(){return Iq}var Cx=new Ye(W.comparator);function $u(...n){let e=Cx;for(let t of n)e=e.insert(t.key,t);return e}function Tx(n){let e=Cx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Bs(){return qu()}function bx(){return qu()}function qu(){return new Bi(n=>n.toString(),(n,e)=>n.isEqual(e))}var Eq=new Ye(W.comparator),Cq=new xt(W.comparator);function _e(...n){let e=Cq;for(let t of n)e=e.add(t);return e}var Tq=new xt(Ce);function bq(){return Tq}function IE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(e)?"-0":e}}function Dx(n){return{integerValue:""+n}}function Dq(n,e){return cq(e)?Dx(e):IE(n,e)}var Ra=class{constructor(){this._=void 0}};function Sq(n,e,t){return n instanceof Na?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&gE(s)&&(s=mE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ks?Ax(n,e):n instanceof Qs?Rx(n,e):function(i,s){let o=Sx(i,s),a=qM(o)+qM(i.Pe);return Qw(o)&&Qw(i.Pe)?Dx(a):IE(i.serializer,a)}(n,e)}function Aq(n,e,t){return n instanceof Ks?Ax(n,e):n instanceof Qs?Rx(n,e):t}function Sx(n,e){return n instanceof Ma?function(r){return Qw(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Na=class extends Ra{},Ks=class extends Ra{constructor(e){super(),this.elements=e}};function Ax(n,e){let t=Nx(e);for(let r of n.elements)t.some(i=>mr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Qs=class extends Ra{constructor(e){super(),this.elements=e}};function Rx(n,e){let t=Nx(e);for(let r of n.elements)t=t.filter(i=>!mr(i,r));return{arrayValue:{values:t}}}var Ma=class extends Ra{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function qM(n){return He(n.integerValue||n.doubleValue)}function Nx(n){return yE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Rq(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ks&&i instanceof Ks||r instanceof Qs&&i instanceof Qs?Ca(r.elements,i.elements,mr):r instanceof Ma&&i instanceof Ma?mr(r.Pe,i.Pe):r instanceof Na&&i instanceof Na}(n.transform,e.transform)}var aI=class{constructor(e,t){this.version=e,this.transformResults=t}},zs=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function np(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var xa=class{};function Mx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new lp(n.key,zs.none()):new Ys(n.key,n.data,zs.none());{let t=n.data,r=jn.empty(),i=new xt(ln.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new qr(n.key,r,new hr(i.toArray()),zs.none())}}function Nq(n,e,t){n instanceof Ys?function(i,s,o){let a=i.value.clone(),c=WM(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof qr?function(i,s,o){if(!np(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=WM(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(xx(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Gu(n,e,t,r){return n instanceof Ys?function(s,o,a,c){if(!np(s.precondition,o))return a;let l=s.value.clone(),d=KM(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof qr?function(s,o,a,c){if(!np(s.precondition,o))return a;let l=KM(s.fieldTransforms,c,o),d=o.data;return d.setAll(xx(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return np(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Mq(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=Sx(r.transform,i||null);s!=null&&(t===null&&(t=jn.empty()),t.set(r.field,s))}return t||null}function GM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ca(r,i,(s,o)=>Rq(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ys=class extends xa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},qr=class extends xa{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function xx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function WM(n,e,t){let r=new Map;Oe(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Aq(o,a,t[i]))}return r}function KM(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Sq(s,o,e))}return r}var lp=class extends xa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},cI=class extends xa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var uI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Nq(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Gu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Gu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=bx();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=Mx(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_e())}isEqual(e){return this.batchId===e.batchId&&Ca(this.mutations,e.mutations,(t,r)=>GM(t,r))&&Ca(this.baseMutations,e.baseMutations,(t,r)=>GM(t,r))}},lI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Oe(e.mutations.length===r.length);let i=function(){return Eq}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var dI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var hI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var it,we;function xq(n){switch(n){default:return Y();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function Px(n){if(n===void 0)return $r("GRPC error has no .code"),M.UNKNOWN;switch(n){case it.OK:return M.OK;case it.CANCELLED:return M.CANCELLED;case it.UNKNOWN:return M.UNKNOWN;case it.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case it.INTERNAL:return M.INTERNAL;case it.UNAVAILABLE:return M.UNAVAILABLE;case it.UNAUTHENTICATED:return M.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case it.NOT_FOUND:return M.NOT_FOUND;case it.ALREADY_EXISTS:return M.ALREADY_EXISTS;case it.PERMISSION_DENIED:return M.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case it.ABORTED:return M.ABORTED;case it.OUT_OF_RANGE:return M.OUT_OF_RANGE;case it.UNIMPLEMENTED:return M.UNIMPLEMENTED;case it.DATA_LOSS:return M.DATA_LOSS;default:return Y()}}(we=it||(it={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";var QM=null;function Pq(){return new TextEncoder}var kq=new Vi([4294967295,4294967295],0);function YM(n){let e=Pq().encode(n),t=new Sw;return t.update(e),new Uint8Array(t.digest())}function JM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Vi([t,r],0),new Vi([i,s],0)]}var fI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $s(`Invalid padding: ${t}`);if(r<0)throw new $s(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $s(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $s(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Vi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Vi.fromNumber(r)));return i.compare(kq)===1&&(i=new Vi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=YM(e),[r,i]=JM(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=YM(e),[r,i]=JM(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},$s=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var dp=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Yu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(se.min(),i,new Ye(Ce),zr(),_e())}},Yu=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,_e(),_e(),_e())}};var wa=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},hp=class{constructor(e,t){this.targetId=e,this.me=t}},fp=class{constructor(e,t,r=Pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},pp=class{constructor(){this.fe=0,this.ge=XM(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=_e(),t=_e(),r=_e();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new Yu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=XM()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},pI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=zr(),this.qe=ZM(),this.Qe=new Ye(Ce)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(sI(s))if(r===0){let o=new W(s.path);this.Ue(t,o,$n.newNoDocument(o,se.min()))}else Oe(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}QM?.et(function(d,f,g,y,E){var R,N,L,$,H,ee;let Ue={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},te=f.unchangedNames;return te&&(Ue.bloomFilter={applied:E===0,hashCount:(R=te?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:($=(L=(N=te?.bits)===null||N===void 0?void 0:N.bitmap)===null||L===void 0?void 0:L.length)!==null&&$!==void 0?$:0,padding:(ee=(H=te?.bits)===null||H===void 0?void 0:H.padding)!==null&&ee!==void 0?ee:0,mightContain:T=>{var _;return(_=y?.mightContain(T))!==null&&_!==void 0&&_}}),Ue}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=ji(r).toUint8Array()}catch(c){if(c instanceof ap)return Ea("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new fI(o,i,s)}catch(c){return Ea(c instanceof $s?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&sI(a.target)){let c=new W(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,$n.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=_e();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new dp(e,t,this.Qe,this.ke,r);return this.ke=zr(),this.qe=ZM(),this.Qe=new Ye(Ce),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new pp,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new xt(Ce),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||U("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new pp),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function ZM(){return new Ye(W.comparator)}function XM(){return new Ye(W.comparator)}var Oq={asc:"ASCENDING",desc:"DESCENDING"},Fq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lq={and:"AND",or:"OR"},gI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function mI(n,e){return n.useProto3Json||Fp(e)?e:{value:e}}function gp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Vq(n,e){return gp(n,e.toTimestamp())}function gr(n){return Oe(!!n),se.fromTimestamp(function(t){let r=Hr(t);return new Tt(r.seconds,r.nanos)}(n))}function EE(n,e){return yI(n,e).canonicalString()}function yI(n,e){let t=function(i){return new Qe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Ox(n){let e=Qe.fromString(n);return Oe(jx(e)),e}function _I(n,e){return EE(n.databaseId,e.path)}function kw(n,e){let t=Ox(e);if(t.get(1)!==n.databaseId.projectId)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new W(Lx(t))}function Fx(n,e){return EE(n.databaseId,e)}function Uq(n){let e=Ox(n);return e.length===4?Qe.emptyPath():Lx(e)}function vI(n){return new Qe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Lx(n){return Oe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function ex(n,e,t){return{name:_I(n,e),fields:t.value.mapValue.fields}}function jq(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(Oe(d===void 0||typeof d=="string"),Pt.fromBase64String(d||"")):(Oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Pt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?M.UNKNOWN:Px(l.code);return new B(d,l.message||"")}(o);t=new fp(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=kw(n,r.document.name),s=gr(r.document.updateTime),o=r.document.createTime?gr(r.document.createTime):se.min(),a=new jn({mapValue:{fields:r.document.fields}}),c=$n.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new wa(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=kw(n,r.document),s=r.readTime?gr(r.readTime):se.min(),o=$n.newNoDocument(i,s),a=r.removedTargetIds||[];t=new wa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=kw(n,r.document),s=r.removedTargetIds||[];t=new wa([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new hI(i,s),a=r.targetId;t=new hp(a,o)}}return t}function Bq(n,e){let t;if(e instanceof Ys)t={update:ex(n,e.key,e.value)};else if(e instanceof lp)t={delete:_I(n,e.key)};else if(e instanceof qr)t={update:ex(n,e.key,e.data),updateMask:Yq(e.fieldMask)};else{if(!(e instanceof cI))return Y();t={verify:_I(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Na)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ks)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ma)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Y()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Vq(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(n,e.precondition)),t}function $q(n,e){return n&&n.length>0?(Oe(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?gr(i.updateTime):gr(s);return o.isEqual(se.min())&&(o=gr(s)),new aI(o,i.transformResults||[])}(t,e))):[]}function Hq(n,e){return{documents:[Fx(n,e.path)]}}function zq(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Fx(n,i);let s=function(l){if(l.length!==0)return Ux(yr.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:ya(g.field),direction:Wq(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=mI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function qq(n){let e=Uq(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Oe(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(f){let g=Vx(f);return g instanceof yr&&yx(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(g=>function(E){return new Sa(_a(E.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Fp(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,y=f.values||[];return new Da(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new Da(y,g)}(t.endAt)),mq(e,i,o,s,a,"F",c,l)}function Gq(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Vx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=_a(t.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=_a(t.unaryFilter.field);return lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=_a(t.unaryFilter.field);return lt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=_a(t.unaryFilter.field);return lt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(n):n.fieldFilter!==void 0?function(t){return lt.create(_a(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return yr.create(t.compositeFilter.filters.map(r=>Vx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(t.compositeFilter.op))}(n):Y()}function Wq(n){return Oq[n]}function Kq(n){return Fq[n]}function Qq(n){return Lq[n]}function ya(n){return{fieldPath:n.canonicalString()}}function _a(n){return ln.fromServerFormat(n.fieldPath)}function Ux(n){return n instanceof lt?function(t){if(t.op==="=="){if(jM(t.value))return{unaryFilter:{field:ya(t.field),op:"IS_NAN"}};if(UM(t.value))return{unaryFilter:{field:ya(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jM(t.value))return{unaryFilter:{field:ya(t.field),op:"IS_NOT_NAN"}};if(UM(t.value))return{unaryFilter:{field:ya(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ya(t.field),op:Kq(t.op),value:t.value}}}(n):n instanceof yr?function(t){let r=t.getFilters().map(i=>Ux(i));return r.length===1?r[0]:{compositeFilter:{op:Qq(t.op),filters:r}}}(n):Y()}function Yq(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function jx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ju=class n{constructor(e,t,r,i,s=se.min(),o=se.min(),a=Pt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var wI=class{constructor(e){this.ct=e}};function Jq(n){let e=qq({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?oI(e,e.limit,"L"):e}var mp=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(He(e.integerValue));else if("doubleValue"in e){let r=He(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Wu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Hr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ji(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?px(e)?this.dt(t,Number.MAX_SAFE_INTEGER):fx(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Y()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(He(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),W.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};mp.vt=new mp;var II=class{constructor(){this.un=new EI}addToCollectionParentIndex(e,t){return this.un.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve(Gs.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve(Gs.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},EI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xt(Qe.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xt(Qe.comparator)).toArray()}};var Gte=new Uint8Array(0);var dr=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(41943040,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);var Zu=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var CI=class{constructor(){this.changes=new Bi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var TI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var bI=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Gu(r.mutation,i,hr.empty(),Tt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=_e()){let i=Bs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=$u();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Bs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,_e()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=zr(),o=qu(),a=function(){return qu()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof qr)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),Gu(d.mutation,l,d.mutation.getFieldMask(),Tt.now())):o.set(l.key,hr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new TI(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=qu(),i=new Ye((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||hr.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||_e()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=bx();d.forEach(g=>{if(!s.has(g)){let y=Mx(t.get(g),r.get(g));y!==null&&f.set(g,y),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yq(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):P.resolve(Bs()),a=-1,c=s;return o.next(l=>P.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?P.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,_e())).next(d=>({batchId:a,changes:Tx(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new W(t)).next(r=>{let i=$u();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=$u();return this.indexManager.getCollectionParents(e,s).next(a=>P.forEach(a,c=>{let l=function(f,g){return new Aa(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,$n.newInvalidDocument(d)))});let a=$u();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&Gu(d.mutation,l,hr.empty(),Tt.now()),Vp(t,l)&&(a=a.insert(c,l))}),a})}};var DI=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return P.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:gr(i.createTime)}}(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Jq(i.bundledQuery),readTime:gr(i.readTime)}}(t)),P.resolve()}};var SI=class{constructor(){this.overlays=new Ye(W.comparator),this.Ir=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Bs();return P.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=Bs(),s=t.length+1,o=new W(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ye((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=Bs(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Bs(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return P.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new dI(t,r));let s=this.Ir.get(t);s===void 0&&(s=_e(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var AI=class{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,P.resolve()}};var Xu=class{constructor(){this.Tr=new xt(st.Er),this.dr=new xt(st.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new st(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new st(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new W(new Qe([])),r=new st(t,e),i=new st(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new W(new Qe([])),r=new st(t,e),i=new st(t,e+1),s=_e();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new st(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},st=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return W.comparator(e.key,t.key)||Ce(e.wr,t.wr)}static Ar(e,t){return Ce(e.wr,t.wr)||W.comparator(e.key,t.key)}};var RI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new xt(st.Er)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new uI(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new st(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,t){return P.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new st(t,0),i=new st(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xt(Ce);return t.forEach(i=>{let s=new st(i,0),o=new st(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),P.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;W.isDocumentKey(s)||(s=s.child(""));let o=new st(new W(s),0),a=new xt(Ce);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),P.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Oe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return P.forEach(t.mutations,i=>{let s=new st(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new st(t,0),i=this.br.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var NI=class{constructor(e){this.Mr=e,this.docs=function(){return new Ye(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():$n.newInvalidDocument(t))}getEntries(e,t){let r=zr();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():$n.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=zr(),o=t.path,a=new W(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||sq(iq(d),r)<=0||(i.has(d.key)||Vp(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Y()}Or(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new MI(this)}getSize(e){return P.resolve(this.size)}},MI=class extends CI{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var xI=class{constructor(e){this.persistence=e,this.Nr=new Bi(t=>_E(t),vE),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Xu,this.targetCount=0,this.kr=Zu.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),P.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Zu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.Kn(t),P.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this.Br.containsKey(t))}};var PI=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new dx(0),this.Kr=!1,this.Kr=!0,this.$r=new AI,this.referenceDelegate=e(this),this.Ur=new xI(this),this.indexManager=new II,this.remoteDocumentCache=function(i){return new NI(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new wI(t),this.Gr=new DI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new RI(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){U("MemoryPersistence","Starting transaction:",e);let i=new kI(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return P.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},kI=class extends Gw{constructor(e){super(),this.currentSequenceNumber=e}},OI=class n{constructor(e){this.persistence=e,this.Jr=new Xu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),P.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Xr,r=>{let i=W.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,se.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return P.or([()=>P.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var FI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=_e(),i=_e();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var LI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var VI=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hM()?8:aq(mt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new LI;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Bu()<=he.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",ma(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),P.resolve()):(Bu()<=he.DEBUG&&U("QueryEngine","Query:",ma(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Bu()<=he.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",ma(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pr(t))):P.resolve())}Yi(e,t){if(zM(t))return P.resolve(null);let r=pr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=oI(t,null,"F"),r=pr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=_e(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,oI(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return zM(t)||i.isEqual(se.min())?P.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?P.resolve(null):(Bu()<=he.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ma(t)),this.rs(e,o,t,rq(i,-1)).next(a=>a))})}ts(e,t){let r=new xt(Ex(e));return t.forEach((i,s)=>{Vp(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Bu()<=he.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",ma(t)),this.Ji.getDocumentsMatchingQuery(e,t,Gs.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var UI=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ye(Ce),this._s=new Bi(s=>_E(s),vE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Zq(n,e,t,r){return new UI(n,e,t,r)}function Bx(n,e){return v(this,null,function*(){let t=X(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=_e();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function Xq(n,e){let t=X(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),y=P.resolve();return g.forEach(E=>{y=y.next(()=>d.getEntry(c,E)).next(R=>{let N=l.docVersions.get(E);Oe(N!==null),R.version.compareTo(N)<0&&(f.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),d.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=_e();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function $x(n){let e=X(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function e3(n,e){let t=X(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,f)));let y=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Pt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(R,N,L){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(g,y,d)&&a.push(t.Ur.updateTargetData(s,y))});let c=zr(),l=_e();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(t3(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(se.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(f=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return P.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function t3(n,e,t){let r=_e(),i=_e();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=zr();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(se.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):U("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function n3(n,e){let t=X(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function r3(n,e){let t=X(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Ju(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function jI(n,e,t){return v(this,null,function*(){let r=X(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!sl(o))throw o;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function tx(n,e,t){let r=X(n),i=se.min(),s=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=X(c),g=f._s.get(d);return g!==void 0?P.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,o,pr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:se.min(),t?s:_e())).next(a=>(i3(r,vq(e),a),{documents:a,Ts:s})))}function i3(n,e,t){let r=n.us.get(e)||se.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var yp=class{constructor(){this.activeTargetIds=bq()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var BI=class{constructor(){this.so=new yp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new yp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var $I=class{_o(e){}shutdown(){}};var _p=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ep=null;function Ow(){return ep===null?ep=function(){return 268435456+Math.round(2147483648*Math.random())}():ep++,"0x"+ep.toString(16)}var s3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var HI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Mt="WebChannelConnection",zI=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=Ow(),c=this.xo(t,r.toUriEncodedString());U("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(d=>(U("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Ea("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=s3[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Ow();return new Promise((o,a)=>{let c=new Aw;c.setWithCredentials(!0),c.listenOnce(Nw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ju.NO_ERROR:let d=c.getResponseJson();U(Mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case ju.TIMEOUT:U(Mt,`RPC '${e}' ${s} timed out`),a(new B(M.DEADLINE_EXCEEDED,"Request time out"));break;case ju.HTTP_ERROR:let f=c.getStatus();if(U(Mt,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let E=function(N){let L=N.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(L)>=0?L:M.UNKNOWN}(y.status);a(new B(E,y.message))}else a(new B(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new B(M.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{U(Mt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);U(Mt,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Ow(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Pw(),a=xw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new Rw({})),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");U(Mt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,y=!1,E=new HI({Io:N=>{y?U(Mt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||(U(Mt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),U(Mt,`RPC '${e}' stream ${i} sending:`,N),f.send(N))},To:()=>f.close()}),R=(N,L,$)=>{N.listen(L,H=>{try{$(H)}catch(ee){setTimeout(()=>{throw ee},0)}})};return R(f,ga.EventType.OPEN,()=>{y||(U(Mt,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),R(f,ga.EventType.CLOSE,()=>{y||(y=!0,U(Mt,`RPC '${e}' stream ${i} transport closed`),E.So())}),R(f,ga.EventType.ERROR,N=>{y||(y=!0,Ea(Mt,`RPC '${e}' stream ${i} transport errored:`,N),E.So(new B(M.UNAVAILABLE,"The operation could not be completed")))}),R(f,ga.EventType.MESSAGE,N=>{var L;if(!y){let $=N.data[0];Oe(!!$);let H=$,ee=H.error||((L=H[0])===null||L===void 0?void 0:L.error);if(ee){U(Mt,`RPC '${e}' stream ${i} received error:`,ee);let Ue=ee.status,te=function(w){let C=it[w];if(C!==void 0)return Px(C)}(Ue),T=ee.message;te===void 0&&(te=M.INTERNAL,T="Unknown error status: "+Ue+" with message "+ee.message),y=!0,E.So(new B(te,T)),f.close()}else U(Mt,`RPC '${e}' stream ${i} received:`,$),E.bo($)}}),R(a,Mw.STAT_EVENT,N=>{N.stat===Zf.PROXY?U(Mt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Zf.NOPROXY&&U(Mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}};function Fw(){return typeof document<"u"?document:null}function Up(n){return new gI(n,!0)}var vp=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var wp=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new vp(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return v(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return v(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return v(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?($r(t.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new B(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>v(this,null,function*(){this.state=0,this.start()}))}I_(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},qI=class extends wp{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=jq(this.serializer,e),r=function(s){if(!("targetChange"in s))return se.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?gr(o.readTime):se.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=vI(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=sI(c)?{documents:Hq(s,c)}:{query:zq(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=kx(s,o.resumeToken);let l=mI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=gp(s,o.snapshotVersion.toTimestamp());let l=mI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Gq(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=vI(this.serializer),t.removeTarget=e,this.a_(t)}},GI=class extends wp{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=$q(e.writeResults,e.commitTime),r=gr(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=vI(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Bq(this.serializer,r))};this.a_(t)}};var WI=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,yI(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(M.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,yI(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},KI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?($r(t),this.D_=!1):U("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var QI=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>v(this,null,function*(){Zs(this)&&(U("RemoteStore","Restarting streams for network reachability change."),yield function(c){return v(this,null,function*(){let l=X(c);l.L_.add(4),yield ol(l),l.q_.set("Unknown"),l.L_.delete(4),yield jp(l)})}(this))}))}),this.q_=new KI(r,i)}};function jp(n){return v(this,null,function*(){if(Zs(n))for(let e of n.B_)yield e(!0)})}function ol(n){return v(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Hx(n,e){let t=X(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),DE(t)?bE(t):Va(t).r_()&&TE(t,e))}function CE(n,e){let t=X(n),r=Va(t);t.N_.delete(e),r.r_()&&zx(t,e),t.N_.size===0&&(r.r_()?r.o_():Zs(t)&&t.q_.set("Unknown"))}function TE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Va(n).A_(e)}function zx(n,e){n.Q_.xe(e),Va(n).R_(e)}function bE(n){n.Q_=new pI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Va(n).start(),n.q_.v_()}function DE(n){return Zs(n)&&!Va(n).n_()&&n.N_.size>0}function Zs(n){return X(n).L_.size===0}function qx(n){n.Q_=void 0}function o3(n){return v(this,null,function*(){n.q_.set("Online")})}function a3(n){return v(this,null,function*(){n.N_.forEach((e,t)=>{TE(n,e)})})}function c3(n,e){return v(this,null,function*(){qx(n),DE(n)?(n.q_.M_(e),bE(n)):n.q_.set("Unknown")})}function u3(n,e,t){return v(this,null,function*(){if(n.q_.set("Online"),e instanceof fp&&e.state===2&&e.cause)try{yield function(i,s){return v(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ip(n,r)}else if(e instanceof wa?n.Q_.Ke(e):e instanceof hp?n.Q_.He(e):n.Q_.We(e),!t.isEqual(se.min()))try{let r=yield $x(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(Pt.EMPTY_BYTE_STRING,d.snapshotVersion)),zx(s,c);let f=new Ju(d.target,c,l,d.sequenceNumber);TE(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){U("RemoteStore","Failed to raise snapshot:",r),yield Ip(n,r)}})}function Ip(n,e,t){return v(this,null,function*(){if(!sl(e))throw e;n.L_.add(1),yield ol(n),n.q_.set("Offline"),t||(t=()=>$x(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){U("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield jp(n)}))})}function Gx(n,e){return e().catch(t=>Ip(n,t,e))}function Bp(n){return v(this,null,function*(){let e=X(n),t=$i(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;l3(e);)try{let i=yield n3(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,d3(e,i)}catch(i){yield Ip(e,i)}Wx(e)&&Kx(e)})}function l3(n){return Zs(n)&&n.O_.length<10}function d3(n,e){n.O_.push(e);let t=$i(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Wx(n){return Zs(n)&&!$i(n).n_()&&n.O_.length>0}function Kx(n){$i(n).start()}function h3(n){return v(this,null,function*(){$i(n).p_()})}function f3(n){return v(this,null,function*(){let e=$i(n);for(let t of n.O_)e.m_(t.mutations)})}function p3(n,e,t){return v(this,null,function*(){let r=n.O_.shift(),i=lI.from(r,e,t);yield Gx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Bp(n)})}function g3(n,e){return v(this,null,function*(){e&&$i(n).V_&&(yield function(r,i){return v(this,null,function*(){if(function(o){return xq(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();$i(r).s_(),yield Gx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Bp(r)}})}(n,e)),Wx(n)&&Kx(n)})}function nx(n,e){return v(this,null,function*(){let t=X(n);t.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");let r=Zs(t);t.L_.add(3),yield ol(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield jp(t)})}function m3(n,e){return v(this,null,function*(){let t=X(n);e?(t.L_.delete(2),yield jp(t)):e||(t.L_.add(2),yield ol(t),t.q_.set("Unknown"))})}function Va(n){return n.K_||(n.K_=function(t,r,i){let s=X(t);return s.w_(),new qI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:o3.bind(null,n),Ro:a3.bind(null,n),mo:c3.bind(null,n),d_:u3.bind(null,n)}),n.B_.push(e=>v(this,null,function*(){e?(n.K_.s_(),DE(n)?bE(n):n.q_.set("Unknown")):(yield n.K_.stop(),qx(n))}))),n.K_}function $i(n){return n.U_||(n.U_=function(t,r,i){let s=X(t);return s.w_(),new GI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:h3.bind(null,n),mo:g3.bind(null,n),f_:f3.bind(null,n),g_:p3.bind(null,n)}),n.B_.push(e=>v(this,null,function*(){e?(n.U_.s_(),yield Bp(n)):(yield n.U_.stop(),n.O_.length>0&&(U("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var YI=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function SE(n,e){if($r("AsyncQueue",`${e}: ${n}`),sl(n))return new B(M.UNAVAILABLE,`${e}: ${n}`);throw n}var Ep=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||W.comparator(t.key,r.key):(t,r)=>W.comparator(t.key,r.key),this.keyedMap=$u(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Cp=class{constructor(){this.W_=new Ye(W.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Pa=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Ep.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var JI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},ZI=class{constructor(){this.queries=rx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=X(t),s=i.queries;i.queries=rx(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new B(M.ABORTED,"Firestore shutting down"))}};function rx(){return new Bi(n=>Ix(n),Lp)}function Qx(n,e){return v(this,null,function*(){let t=X(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new JI,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=SE(o,`Initialization of query '${ma(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&AE(t)})}function Yx(n,e){return v(this,null,function*(){let t=X(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function y3(n,e){let t=X(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&AE(t)}function _3(n,e,t){let r=X(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function AE(n){n.Y_.forEach(e=>{e.next()})}var XI,ix;(ix=XI||(XI={})).ea="default",ix.Cache="cache";var Tp=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==XI.Cache}};var bp=class{constructor(e){this.key=e}},Dp=class{constructor(e){this.key=e}},eE=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=_e(),this.mutatedKeys=_e(),this.Aa=Ex(e),this.Ra=new Ep(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Cp,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=Vp(this.query,f)?f:null,E=!!g&&this.mutatedKeys.has(g.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;g&&y?g.data.isEqual(y.data)?E!==R&&(r.track({type:3,doc:y}),N=!0):this.ga(g,y)||(r.track({type:2,doc:y}),N=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),N=!0):g&&!y&&(r.track({type:1,doc:g}),N=!0,(c||l)&&(a=!0)),N&&(y?(o=o.add(y),s=R?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(y,E){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return R(y)-R(E)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new Pa(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Cp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=_e(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Dp(r))}),this.da.forEach(r=>{e.has(r)||t.push(new bp(r))}),t}ba(e){this.Ta=e.Ts,this.da=_e();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Pa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},tE=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},nE=class{constructor(e){this.key=e,this.va=!1}},rE=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Bi(a=>Ix(a),Lp),this.Ma=new Map,this.xa=new Set,this.Oa=new Ye(W.comparator),this.Na=new Map,this.La=new Xu,this.Ba={},this.ka=new Map,this.qa=Zu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function v3(n,e,t=!0){return v(this,null,function*(){let r=nP(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield Jx(r,e,t,!0),i})}function w3(n,e){return v(this,null,function*(){let t=nP(n);yield Jx(t,e,!0,!1)})}function Jx(n,e,t,r){return v(this,null,function*(){let i=yield r3(n.localStore,pr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield I3(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Hx(n.remoteStore,i),a})}function I3(n,e,t,r,i){return v(this,null,function*(){n.Ka=(f,g,y)=>function(R,N,L,$){return v(this,null,function*(){let H=N.view.ma(L);H.ns&&(H=yield tx(R.localStore,N.query,!1).then(({documents:T})=>N.view.ma(T,H)));let ee=$&&$.targetChanges.get(N.targetId),Ue=$&&$.targetMismatches.get(N.targetId)!=null,te=N.view.applyChanges(H,R.isPrimaryClient,ee,Ue);return ox(R,N.targetId,te.wa),te.snapshot})}(n,f,g,y);let s=yield tx(n.localStore,e,!0),o=new eE(e,s.Ts),a=o.ma(s.documents),c=Yu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);ox(n,t,l.wa);let d=new tE(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function E3(n,e,t){return v(this,null,function*(){let r=X(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Lp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield jI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&CE(r.remoteStore,i.targetId),iE(r,i.targetId)}).catch(il))):(iE(r,i.targetId),yield jI(r.localStore,i.targetId,!0))})}function C3(n,e){return v(this,null,function*(){let t=X(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),CE(t.remoteStore,r.targetId))})}function T3(n,e,t){return v(this,null,function*(){let r=M3(n);try{let i=yield function(o,a){let c=X(o),l=Tt.now(),d=a.reduce((y,E)=>y.add(E.key),_e()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=zr(),R=_e();return c.cs.getEntries(y,d).next(N=>{E=N,E.forEach((L,$)=>{$.isValidDocument()||(R=R.add(L))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,E)).next(N=>{f=N;let L=[];for(let $ of a){let H=Mq($,f.get($.key).overlayedDocument);H!=null&&L.push(new qr($.key,H,gx(H.value.mapValue),zs.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,L,a)}).next(N=>{g=N;let L=N.applyToLocalDocumentSet(f,R);return c.documentOverlayCache.saveOverlays(y,N.batchId,L)})}).then(()=>({batchId:g.batchId,changes:Tx(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new Ye(Ce)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield al(r,i.changes),yield Bp(r.remoteStore)}catch(i){let s=SE(i,"Failed to persist write");t.reject(s)}})}function Zx(n,e){return v(this,null,function*(){let t=X(n);try{let r=yield e3(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(Oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Oe(o.va):i.removedDocuments.size>0&&(Oe(o.va),o.va=!1))}),yield al(t,r,e)}catch(r){yield il(r)}})}function sx(n,e,t){let r=X(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=X(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&AE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function b3(n,e,t){return v(this,null,function*(){let r=X(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ye(W.comparator);o=o.insert(s,$n.newNoDocument(s,se.min()));let a=_e().add(s),c=new dp(se.min(),new Map,new Ye(Ce),o,a);yield Zx(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),RE(r)}else yield jI(r.localStore,e,!1).then(()=>iE(r,e,t)).catch(il)})}function D3(n,e){return v(this,null,function*(){let t=X(n),r=e.batch.batchId;try{let i=yield Xq(t.localStore,e);eP(t,r,null),Xx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield al(t,i)}catch(i){yield il(i)}})}function S3(n,e,t){return v(this,null,function*(){let r=X(n);try{let i=yield function(o,a){let c=X(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(Oe(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);eP(r,e,t),Xx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield al(r,i)}catch(i){yield il(i)}})}function Xx(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function eP(n,e,t){let r=X(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function iE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||tP(n,r)})}function tP(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(CE(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),RE(n))}function ox(n,e,t){for(let r of t)r instanceof bp?(n.La.addReference(r.key,e),A3(n,r)):r instanceof Dp?(U("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||tP(n,r.key)):Y()}function A3(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(U("SyncEngine","New document in limbo: "+t),n.xa.add(r),RE(n))}function RE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new W(Qe.fromString(e)),r=n.qa.next();n.Na.set(r,new nE(t)),n.Oa=n.Oa.insert(t,r),Hx(n.remoteStore,new Ju(pr(wE(t.path)),r,"TargetPurposeLimboResolution",dx.oe))}}function al(n,e,t){return v(this,null,function*(){let r=X(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=FI.Wi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return v(this,null,function*(){let d=X(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>P.forEach(l,g=>P.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>P.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!sl(f))throw f;U("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.os.get(g),E=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(E);d.os=d.os.insert(g,R)}}})}(r.localStore,s))})}function R3(n,e){return v(this,null,function*(){let t=X(n);if(!t.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());let r=yield Bx(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new B(M.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield al(t,r.hs)}})}function N3(n,e){let t=X(n),r=t.Na.get(e);if(r&&r.va)return _e().add(r.key);{let i=_e(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function nP(n){let e=X(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=b3.bind(null,e),e.Ca.d_=y3.bind(null,e.eventManager),e.Ca.$a=_3.bind(null,e.eventManager),e}function M3(n){let e=X(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=D3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=S3.bind(null,e),e}var Sp=class{constructor(){this.synchronizeTabs=!1}initialize(e){return v(this,null,function*(){this.serializer=Up(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Zq(this.persistence,new VI,e.initialUser,this.serializer)}createPersistence(e){return new PI(OI.Zr,this.serializer)}createSharedClientState(e){return new BI}terminate(){return v(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var sE=class{initialize(e,t){return v(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=R3.bind(null,this.syncEngine),yield m3(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new ZI}()}createDatastore(e){let t=Up(e.databaseInfo.databaseId),r=function(s){return new zI(s)}(e.databaseInfo);return function(s,o,a,c){return new WI(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new QI(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>sx(this.syncEngine,t,0),function(){return _p.D()?new _p:new $I}())}createSyncEngine(e,t){return function(i,s,o,a,c,l,d){let f=new rE(i,s,o,a,c,l);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return v(this,null,function*(){var e,t;yield function(i){return v(this,null,function*(){let s=X(i);U("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield ol(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var Ap=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):$r("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var oE=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=ip.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>v(this,null,function*(){U("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(U("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=SE(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Lw(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield Bx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function ax(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield P3(n);U("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>nx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>nx(e.remoteStore,i)),n._onlineComponents=e})}function x3(n){return n.name==="FirebaseError"?n.code===M.FAILED_PRECONDITION||n.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function P3(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){U("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Lw(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!x3(t))throw t;Ea("Error using user provided cache. Falling back to memory cache: "+t),yield Lw(n,new Sp)}}else U("FirestoreClient","Using default OfflineComponentProvider"),yield Lw(n,new Sp);return n._offlineComponents})}function rP(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(U("FirestoreClient","Using user provided OnlineComponentProvider"),yield ax(n,n._uninitializedComponentsProvider._online)):(U("FirestoreClient","Using default OnlineComponentProvider"),yield ax(n,new sE))),n._onlineComponents})}function k3(n){return rP(n).then(e=>e.syncEngine)}function iP(n){return v(this,null,function*(){let e=yield rP(n),t=e.eventManager;return t.onListen=v3.bind(null,e.syncEngine),t.onUnlisten=E3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=w3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=C3.bind(null,e.syncEngine),t})}function O3(n,e,t={}){let r=new Bn;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(s,o,a,c,l){let d=new Ap({next:g=>{o.enqueueAndForget(()=>Yx(s,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new B(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?l.reject(new B(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Tp(wE(a.path),d,{includeMetadataChanges:!0,_a:!0});return Qx(s,f)}(yield iP(n),n.asyncQueue,e,t,r)})),r.promise}function F3(n,e,t={}){let r=new Bn;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(s,o,a,c,l){let d=new Ap({next:g=>{o.enqueueAndForget(()=>Yx(s,f)),g.fromCache&&c.source==="server"?l.reject(new B(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Tp(a,d,{includeMetadataChanges:!0,_a:!0});return Qx(s,f)}(yield iP(n),n.asyncQueue,e,t,r)})),r.promise}function sP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var cx=new Map;function oP(n,e,t){if(!t)throw new B(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function L3(n,e,t,r){if(e===!0&&r===!0)throw new B(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ux(n){if(!W.isDocumentKey(n))throw new B(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lx(n){if(W.isDocumentKey(n))throw new B(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function NE(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Y()}function Js(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new B(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=NE(n);throw new B(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Rp=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}L3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ka=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new B(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new B(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Vw;switch(r.type){case"firstParty":return new $w(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=cx.get(t);r&&(U("ComponentProvider","Removing Datastore"),cx.delete(t),r.terminate())}(this),Promise.resolve()}};function aP(n,e,t,r={}){var i;let s=(n=Js(n,ka))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ea("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=yt.MOCK_USER;else{a=zf(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new B(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new yt(l)}n._authCredentials=new Uw(new rp(a,c))}}var Np=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},dn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ui(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ui=class n extends Np{constructor(e,t,r){super(e,t,wE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new W(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ME(n,e,...t){if(n=Ke(n),oP("collection","path",e),n instanceof ka){let r=Qe.fromString(e,...t);return lx(r),new Ui(n,null,r)}{if(!(n instanceof dn||n instanceof Ui))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Qe.fromString(e,...t));return lx(r),new Ui(n.firestore,null,r)}}function cl(n,e,...t){if(n=Ke(n),arguments.length===1&&(e=ip.newId()),oP("doc","path",e),n instanceof ka){let r=Qe.fromString(e,...t);return ux(r),new dn(n,null,new W(r))}{if(!(n instanceof dn||n instanceof Ui))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Qe.fromString(e,...t));return ux(r),new dn(n.firestore,n instanceof Ui?n.converter:null,new W(r))}}var aE=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new vp(this,"async_queue_retry"),this.Eu=()=>{let t=Fw();t&&U("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=Fw();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=Fw();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new Bn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return v(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!sl(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw $r("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let i=YI.createAndSchedule(this,e,t,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&Y()}verifyOperationInProgress(){}mu(){return v(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};var Oa=class extends ka{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new aE}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||cP(this),this._firestoreClient.terminate()}};function ul(n,e){let t=typeof n=="object"?n:Li(),r=typeof n=="string"?n:e||"(default)",i=js(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Hf("firestore");s&&aP(i,...s)}return i}function xE(n){return n._firestoreClient||cP(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function cP(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,d){return new Ww(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,sP(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new oE(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var el=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Pt.fromBase64String(e))}catch(t){throw new B(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var tl=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new B(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Mp=class{constructor(e){this._methodName=e}};var nl=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new B(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new B(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}};var rl=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var V3=/^__.*__$/,cE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new qr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ys(e,this.data,t,this.fieldTransforms)}};function uP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}var uE=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return xp(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(uP(this.wu)&&V3.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},lE=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Up(e)}Nu(e,t,r,i=!1){return new uE({wu:e,methodName:t,Ou:r,path:ln.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function U3(n){let e=n._freezeSettings(),t=Up(n._databaseId);return new lE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function j3(n,e,t,r,i,s={}){let o=n.Nu(s.merge||s.mergeFields?2:0,e,t,i);fP("Data must be an object, but it was:",o,r);let a=dP(r,o),c,l;if(s.merge)c=new hr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=B3(e,f,t);if(!o.contains(g))throw new B(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);H3(d,g)||d.push(g)}c=new hr(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new cE(new jn(a),c,l)}function lP(n,e){if(hP(n=Ke(n)))return fP("Unsupported field value:",e,n),dP(n,e);if(n instanceof Mp)return function(r,i){if(!uP(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=lP(a,i.Fu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Dq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Tt.fromDate(r);return{timestampValue:gp(i.serializer,s)}}if(r instanceof Tt){let s=new Tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gp(i.serializer,s)}}if(r instanceof nl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof el)return{bytesValue:kx(i.serializer,r._byteString)};if(r instanceof dn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:EE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof rl)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Mu("VectorValues must only contain numeric values.");return IE(a.serializer,c)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${NE(r)}`)}(n,e)}function dP(n,e){let t={};return hx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):La(n,(r,i)=>{let s=lP(i,e.bu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function hP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Tt||n instanceof nl||n instanceof el||n instanceof dn||n instanceof Mp||n instanceof rl)}function fP(n,e,t){if(!hP(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=NE(t);throw r==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+r)}}function B3(n,e,t){if((e=Ke(e))instanceof tl)return e._internalPath;if(typeof e=="string")return pP(n,e);throw xp("Field path arguments must be of type string or ",n,!1,void 0,t)}var $3=new RegExp("[~\\*/\\[\\]]");function pP(n,e,t){if(e.search($3)>=0)throw xp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new tl(...e.split("."))._internalPath}catch{throw xp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xp(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new B(M.INVALID_ARGUMENT,a+n+c)}function H3(n,e){return n.some(t=>t.isEqual(e))}var Pp=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new dE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(gP("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},dE=class extends Pp{data(){return super.data()}};function gP(n,e){return typeof e=="string"?pP(n,e):e instanceof tl?e._internalPath:e._delegate._internalPath}function z3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new B(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hE=class{convertValue(e,t="none"){switch(Ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return La(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>He(o.doubleValue));return new rl(s)}convertGeoPoint(e){return new nl(He(e.latitude),He(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=mE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ku(e));default:return null}}convertTimestamp(e){let t=Hr(e);return new Tt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Qe.fromString(e);Oe(jx(r));let i=new cp(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(t)||$r(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function q3(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Hs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},kp=class extends Pp{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ia(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(gP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ia=class extends kp{data(e={}){return super.data(e)}},fE=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ia(this._firestore,this._userDataWriter,r.key,r,new Hs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new B(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Ia(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Ia(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:G3(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function G3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}function $p(n){n=Js(n,dn);let e=Js(n.firestore,Oa);return O3(xE(e),n._key).then(t=>K3(e,n,t))}var Op=class extends hE{constructor(e){super(),this.firestore=e}convertBytes(e){return new el(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,t)}};function PE(n){n=Js(n,Np);let e=Js(n.firestore,Oa),t=xE(e),r=new Op(e);return z3(n._query),F3(t,n._query).then(i=>new fE(e,r,n,i))}function Hp(n,e,t){n=Js(n,dn);let r=Js(n.firestore,Oa),i=q3(n.converter,e,t);return W3(r,[j3(U3(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,zs.none())])}function W3(n,e){return function(r,i){let s=new Bn;return r.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return T3(yield k3(r),i,s)})),s.promise}(xE(n),e)}function K3(n,e,t){let r=t.docs.get(e._key),i=new Op(n);return new kp(n,i,e._key,r,new Hs(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Fa=i})(lr),ur(new Kt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Oa(new jw(r.getProvider("auth-internal")),new zw(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cp(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),$e(OM,"4.7.2",e),$e(OM,"4.7.2","esm2017")})();var mP="@firebase/database",yP="1.0.8";var VC="";function Q3(n){VC=n}var BE=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ut(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:ha(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var $E=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return or(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var YP=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new BE(e)}}catch{}return new $E},eo=YP("localStorage"),HE=YP("sessionStorage");var Ba=new ar("@firebase/database"),Y3=function(){let n=1;return function(){return n++}}(),JP=function(n){let e=_M(n),t=new jf;t.update(e);let r=t.digest();return Bf.encodeByteArray(r)},Dl=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Dl.apply(null,r):typeof r=="object"?e+=ut(r):e+=r,e+=" "}return e},no=null,_P=!0,J3=function(n,e){k(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Ba.logLevel=he.VERBOSE,no=Ba.log.bind(Ba),e&&HE.set("logging_enabled",!0)):typeof n=="function"?no=n:(no=null,HE.remove("logging_enabled"))},kt=function(...n){if(_P===!0&&(_P=!1,no===null&&HE.get("logging_enabled")===!0&&J3(!0)),no){let e=Dl.apply(null,n);no(e)}},Sl=function(n){return function(...e){kt(n,...e)}},zE=function(...n){let e="FIREBASE INTERNAL ERROR: "+Dl(...n);Ba.error(e)},Gr=function(...n){let e=`FIREBASE FATAL ERROR: ${Dl(...n)}`;throw Ba.error(e),new Error(e)},Yt=function(...n){let e="FIREBASE WARNING: "+Dl(...n);Ba.warn(e)},Z3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Yt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ZP=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},X3=function(n){if(sr()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},za="[MIN_NAME]",ro="[MAX_NAME]",Ja=function(n,e){if(n===e)return 0;if(n===za||e===ro)return-1;if(e===za||n===ro)return 1;{let t=vP(n),r=vP(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},eG=function(n,e){return n===e?0:n<e?-1:1},ll=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+ut(e))},UC=function(n){if(typeof n!="object"||n===null)return ut(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=ut(e[r]),t+=":",t+=UC(n[e[r]]);return t+="}",t},XP=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Jt(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var ek=function(n){k(!ZP(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,c;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),f="";for(c=0;c<64;c+=8){let g=parseInt(d.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},tG=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},nG=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function rG(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var iG=new RegExp("^-?(0*)\\d{1,10}$"),sG=-2147483648,oG=2147483647,vP=function(n){if(iG.test(n)){let e=Number(n);if(e>=sG&&e<=oG)return e}return null},Za=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Yt("Exception was thrown by user callback.",t),e},Math.floor(0))}},aG=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},gl=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var qE=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Yt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var GE=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(kt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Yt(e)}},ml=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),qp="5",tk="v",nk="s",rk="r",ik="f",sk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ok="ls",ak="p",WE="ac",ck="websocket",uk="long_polling";var Gp=class{constructor(e,t,r,i,s=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=eo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&eo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function cG(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function lk(n,e,t){k(typeof e=="string","typeof type must == string"),k(typeof t=="object","typeof params must == object");let r;if(e===ck)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===uk)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);cG(n)&&(t.ns=n.namespace);let i=[];return Jt(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var KE=class{constructor(){this.counters_={}}incrementCounter(e,t=1){or(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return aM(this.counters_)}};var kE={},OE={};function jC(n){let e=n.toString();return kE[e]||(kE[e]=new KE),kE[e]}function uG(n,e){let t=n.toString();return OE[t]||(OE[t]=e()),OE[t]}var QE=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Za(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var wP="start",lG="close",dG="pLPCommand",hG="pRTLPCB",dk="id",hk="pw",fk="ser",fG="cb",pG="seg",gG="ts",mG="d",yG="dframe",pk=1870,gk=30,_G=pk-gk,vG=25e3,wG=3e4,YE=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Sl(e),this.stats_=jC(t),this.urlFn=c=>(this.appCheckToken&&(c[WE]=this.appCheckToken),lk(t,uk,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new QE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(wG)),X3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new JE((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===wP)this.id=a,this.password=c;else if(o===lG)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[wP]="t",r[fk]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[fG]=this.scriptTagHolder.uniqueCallbackIdentifier),r[tk]=qp,this.transportSessionId&&(r[nk]=this.transportSessionId),this.lastSessionId&&(r[ok]=this.lastSessionId),this.applicationId&&(r[ak]=this.applicationId),this.appCheckToken&&(r[WE]=this.appCheckToken),typeof location<"u"&&location.hostname&&sk.test(location.hostname)&&(r[rk]=ik);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return sr()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!tG()&&!nG()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=ut(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=uw(t),i=XP(r,_G);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(sr())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[yG]="t",r[dk]=e,r[hk]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=ut(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},JE=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,sr())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Y3(),window[dG+this.uniqueCallbackIdentifier]=e,window[hG+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){kt("frame writing exception"),a.stack&&kt(a.stack),kt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||kt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[dk]=this.myID,e[hk]=this.myPW,e[fk]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+gk+r.length<=pk;){let o=this.pendingSegs.shift();r=r+"&"+pG+i+"="+o.seg+"&"+gG+i+"="+o.ts+"&"+mG+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(vG)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){sr()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{kt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var IG=16384,EG=45e3,Wp=null;typeof MozWebSocket<"u"?Wp=MozWebSocket:typeof WebSocket<"u"&&(Wp=WebSocket);var dl=(()=>{class n{constructor(t,r,i,s,o,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Sl(this.connId),this.stats_=jC(r),this.connURL=n.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[tk]=qp,!sr()&&typeof location<"u"&&location.hostname&&sk.test(location.hostname)&&(a[rk]=ik),r&&(a[nk]=r),i&&(a[ok]=i),s&&(a[WE]=s),o&&(a[ak]=o),lk(t,ck,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,eo.set("previous_websocket_failure",!0);try{let i;if(sr()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${qp}/${VC}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Wp(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Wp!==null&&!n.forceDisallow_}static previouslyFailed(){return eo.isInMemoryStorage||eo.get("previous_websocket_failure")===!0}markConnectionHealthy(){eo.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ha(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(k(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=ut(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=XP(r,IG);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(EG))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),CG=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[YE,dl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=dl&&dl.isAvailable(),i=r&&!dl.previouslyFailed();if(t.webSocketOnly&&(r||Yt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[dl];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),TG=6e4,bG=5e3,DG=10*1024,SG=100*1024,FE="t",IP="d",AG="s",EP="r",RG="e",CP="o",TP="a",bP="n",DP="p",NG="h",ZE=class{constructor(e,t,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Sl("c:"+this.id+":"),this.transportManager_=new CG(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=gl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>SG?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>DG?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(FE in e){let t=e[FE];t===TP?this.upgradeIfSecondaryHealthy_():t===EP?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===CP&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=ll("t",e),r=ll("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:DP,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:TP,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:bP,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=ll("t",e),r=ll("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=ll(FE,e);if(IP in e){let r=e[IP];if(t===NG){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===bP){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===AG?this.onConnectionShutdown_(r):t===EP?this.onReset_(r):t===RG?zE("Server Error: "+r):t===CP?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zE("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),qp!==r&&Yt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),gl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(TG))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(bG))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:DP,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(eo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Kp=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var Qp=class{constructor(e){this.allowedEvents_=e,this.listeners_={},k(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){k(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Yp=class n extends Qp{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Pu()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return k(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var SP=32,AP=768,Ne=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Ae(){return new Ne("")}function fe(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function zi(n){return n.pieces_.length-n.pieceNum_}function Le(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ne(n.pieces_,e)}function mk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function MG(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function yk(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function _k(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ne(e,0)}function dt(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ne)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ne(t,0)}function ge(n){return n.pieceNum_>=n.pieces_.length}function Qt(n,e){let t=fe(n),r=fe(e);if(t===null)return e;if(t===r)return Qt(Le(n),Le(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function BC(n,e){if(zi(n)!==zi(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function zn(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(zi(n)>zi(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var XE=class{constructor(e,t){this.errorPrefix_=t,this.parts_=yk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Fu(this.parts_[r]);vk(this)}};function xG(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Fu(e),vk(n)}function PG(n){let e=n.parts_.pop();n.byteLength_-=Fu(e),n.parts_.length>0&&(n.byteLength_-=1)}function vk(n){if(n.byteLength_>AP)throw new Error(n.errorPrefix_+"has a key path longer than "+AP+" bytes ("+n.byteLength_+").");if(n.parts_.length>SP)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+SP+") or object contains a cycle "+Xs(n))}function Xs(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var eC=class n extends Qp{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return k(e==="visible","Unknown event type: "+e),[this.visible_]}};var hl=1e3,kG=60*5*1e3,RP=30*1e3,OG=1.3,FG=3e4,LG="server_kill",NP=3,$C=(()=>{class n extends Kp{constructor(t,r,i,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=Sl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=hl,this.maxReconnectDelay_=kG,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!sr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");eC.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Yp.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(ut(o)),k(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new ki,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),k(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),k(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(d,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&or(t,"w")){let i=Ls(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Yt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||mM(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=RP)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=gM(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),k(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+ut(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):zE("Unrecognized action received from server: "+ut(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){k(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=hl,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=hl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>FG&&(this.reconnectDelay_=hl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*OG)}this.onConnectStatus_(!1)}establishConnection_(){return v(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(g){k(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:l,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,y]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?kt("getToken() completed but was canceled"):(kt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=y&&y.token,c=new ZE(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,E=>{Yt(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(LG)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&Yt(g),l())}}})}interrupt(t){kt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){kt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ku(this.interruptReasons_)&&(this.reconnectDelay_=hl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>UC(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new Ne(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){kt("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=NP&&(this.reconnectDelay_=RP,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){kt("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=NP&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";sr()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+VC.replace(/\./g,"-")]=1,Pu()?t["framework.cordova"]=1:qf()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Yp.getInstance().currentlyOnline();return ku(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),pe=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var qa=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new pe(za,e),i=new pe(za,t);return this.compare(r,i)!==0}minPost(){return pe.MIN}};var zp,Jp=class extends qa{static get __EMPTY_NODE(){return zp}static set __EMPTY_NODE(e){zp=e}compare(e,t){return Ja(e.name,t.name)}isDefinedOn(e){throw Fs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return pe.MIN}maxPost(){return new pe(ro,zp)}makePost(e,t){return k(typeof e=="string","KeyIndex indexValue must always be a string."),new pe(e,zp)}toString(){return".key"}},$a=new Jp;var ja=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Hn=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Cn.EMPTY_NODE,this.right=o??Cn.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Cn.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return Cn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),tC=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new Hn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Cn=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Hn.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Hn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ja(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ja(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ja(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ja(this.root_,null,this.comparator_,!0,e)}};Cn.EMPTY_NODE=new tC;function VG(n,e){return Ja(n.name,e.name)}function HC(n,e){return Ja(n,e)}var nC;function UG(n){nC=n}var wk=function(n){return typeof n=="number"?"number:"+ek(n):"string:"+n},Ik=function(n){if(n.isLeafNode()){let e=n.val();k(typeof e=="string"||typeof e=="number"||typeof e=="object"&&or(e,".sv"),"Priority must be a string or number.")}else k(n===nC||n.isEmpty(),"priority of unexpected type.");k(n===nC||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var MP,Ga=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,k(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Ik(this.priorityNode_)}static set __childrenNodeConstructor(t){MP=t}static get __childrenNodeConstructor(){return MP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ge(t)?this:fe(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=fe(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(k(i!==".priority"||zi(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Le(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+wk(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=ek(this.value_):t+=this.value_,this.lazyHash_=JP(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(k(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return k(s>=0,"Unknown leaf type: "+r),k(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),Ek,Ck;function jG(n){Ek=n}function BG(n){Ck=n}var rC=class extends qa{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?Ja(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return pe.MIN}maxPost(){return new pe(ro,new Ga("[PRIORITY-POST]",Ck))}makePost(e,t){let r=Ek(e);return new pe(t,new Ga("[PRIORITY-POST]",r))}toString(){return".priority"}},Je=new rC;var $G=Math.log(2),iC=class{constructor(e){let t=s=>parseInt(Math.log(s)/$G,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Zp=function(n,e,t,r){n.sort(e);let i=function(c,l){let d=l-c,f,g;if(d===0)return null;if(d===1)return f=n[c],g=t?t(f):f,new Hn(g,f.node,Hn.BLACK,null,null);{let y=parseInt(d/2,10)+c,E=i(c,y),R=i(y+1,l);return f=n[y],g=t?t(f):f,new Hn(g,f.node,Hn.BLACK,E,R)}},s=function(c){let l=null,d=null,f=n.length,g=function(E,R){let N=f-E,L=f;f-=E;let $=i(N+1,L),H=n[N],ee=t?t(H):H;y(new Hn(ee,H.node,R,null,$))},y=function(E){l?(l.left=E,l=E):(d=E,l=E)};for(let E=0;E<c.count;++E){let R=c.nextBitIsOne(),N=Math.pow(2,c.count-(E+1));R?g(N,Hn.BLACK):(g(N,Hn.BLACK),g(N,Hn.RED))}return d},o=new iC(n.length),a=s(o);return new Cn(r||e,a)};var LE,Ua={},Wa=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return k(Ua&&Je,"ChildrenNode.ts has not been loaded"),LE=LE||new n({".priority":Ua},{".priority":Je}),LE}get(e){let t=Ls(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Cn?t:null}hasIndex(e){return or(this.indexSet_,e.toString())}addIndex(e,t){k(e!==$a,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(pe.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Zp(r,e.getCompare()):a=Ua;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new n(d,l)}addToIndexes(e,t){let r=Ou(this.indexes_,(i,s)=>{let o=Ls(this.indexSet_,s);if(k(o,"Missing index implementation for "+s),i===Ua)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(pe.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Zp(a,o.getCompare())}else return Ua;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new pe(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=Ou(this.indexes_,i=>{if(i===Ua)return i;{let s=t.get(e.name);return s?i.remove(new pe(e.name,s)):i}});return new n(r,this.indexSet_)}};var fl,ce=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Ik(this.priorityNode_),this.children_.isEmpty()&&k(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return fl||(fl=new n(new Cn(HC),null,Wa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fl}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?fl:r}}getChild(t){let r=fe(t);return r===null?this:this.getImmediateChild(r).getChild(Le(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(k(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new pe(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?fl:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=fe(t);if(i===null)return r;{k(fe(t)!==".priority"||zi(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Le(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Je,(a,c)=>{r[a]=c.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+wk(this.getPriority().val())+":"),this.forEachChild(Je,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":JP(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new pe(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new pe(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new pe(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,pe.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,pe.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Al?-1:0}withIndex(t){if(t===$a||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===$a||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Je),s=r.getIterator(Je),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===$a?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),sC=class extends ce{constructor(){super(new Cn(HC),ce.EMPTY_NODE,Wa.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ce.EMPTY_NODE}isEmpty(){return!1}},Al=new sC;Object.defineProperties(pe,{MIN:{value:new pe(za,ce.EMPTY_NODE)},MAX:{value:new pe(ro,Al)}});Jp.__EMPTY_NODE=ce.EMPTY_NODE;Ga.__childrenNodeConstructor=ce;UG(Al);BG(Al);var HG=!0;function bt(n,e=null){if(n===null)return ce.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),k(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new Ga(t,bt(e))}if(!(n instanceof Array)&&HG){let t=[],r=!1;if(Jt(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=bt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new pe(o,c)))}}),t.length===0)return ce.EMPTY_NODE;let s=Zp(t,VG,o=>o.name,HC);if(r){let o=Zp(t,Je.getCompare());return new ce(s,bt(e),new Wa({".priority":o},{".priority":Je}))}else return new ce(s,bt(e),Wa.Default)}else{let t=ce.EMPTY_NODE;return Jt(n,(r,i)=>{if(or(n,r)&&r.substring(0,1)!=="."){let s=bt(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(bt(e))}}jG(bt);var oC=class extends qa{constructor(e){super(),this.indexPath_=e,k(!ge(e)&&fe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?Ja(e.name,t.name):s}makePost(e,t){let r=bt(e),i=ce.EMPTY_NODE.updateChild(this.indexPath_,r);return new pe(t,i)}maxPost(){let e=ce.EMPTY_NODE.updateChild(this.indexPath_,Al);return new pe(ro,e)}toString(){return yk(this.indexPath_,0).join("/")}};var aC=class extends qa{compare(e,t){let r=e.node.compareTo(t.node);return r===0?Ja(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return pe.MIN}maxPost(){return pe.MAX}makePost(e,t){let r=bt(e);return new pe(t,r)}toString(){return".value"}},zG=new aC;function Tk(n){return{type:"value",snapshotNode:n}}function Ka(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function wl(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Il(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function qG(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var El=class{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){k(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(wl(t,a)):k(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ka(t,r)):o.trackChildChange(Il(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Je,(i,s)=>{t.hasChild(i)||r.trackChildChange(wl(i,s))}),t.isLeafNode()||t.forEachChild(Je,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Il(i,s,o))}else r.trackChildChange(Ka(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ce.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Xp=class n{constructor(e){this.indexedFilter_=new El(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new pe(t,r))||(r=ce.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=ce.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(ce.EMPTY_NODE);let s=this;return t.forEachChild(Je,(o,a)=>{s.matches(new pe(o,a))||(i=i.updateImmediateChild(o,ce.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var cC=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Xp(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new pe(t,r))||(r=ce.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=ce.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=ce.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(ce.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,ce.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){let f=this.index_.getCompare();o=(g,y)=>f(y,g)}else o=this.index_.getCompare();let a=e;k(a.numChildren()===this.limit_,"");let c=new pe(t,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(a.hasChild(t)){let f=a.getImmediateChild(t),g=i.getChildAfterChild(this.index_,l,this.reverse_);for(;g!=null&&(g.name===t||a.hasChild(g.name));)g=i.getChildAfterChild(this.index_,g,this.reverse_);let y=g==null?1:o(g,c);if(d&&!r.isEmpty()&&y>=0)return s?.trackChildChange(Il(t,r,f)),a.updateImmediateChild(t,r);{s?.trackChildChange(wl(t,f));let R=a.updateImmediateChild(t,ce.EMPTY_NODE);return g!=null&&this.rangedFilter_.matches(g)?(s?.trackChildChange(Ka(g.name,g.node)),R.updateImmediateChild(g.name,g.node)):R}}else return r.isEmpty()?e:d&&o(l,c)>=0?(s!=null&&(s.trackChildChange(wl(l.name,l.node)),s.trackChildChange(Ka(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(l.name,ce.EMPTY_NODE)):e}};var uC=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Je}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return k(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return k(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:za}hasEnd(){return this.endSet_}getIndexEndValue(){return k(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return k(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ro}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return k(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Je}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function GG(n){return n.loadsAllData()?new El(n.getIndex()):n.hasLimit()?new cC(n):new Xp(n)}function xP(n){let e={};if(n.isDefault())return e;let t;if(n.index_===Je?t="$priority":n.index_===zG?t="$value":n.index_===$a?t="$key":(k(n.index_ instanceof oC,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=ut(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=ut(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+ut(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=ut(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+ut(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function PP(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Je&&(e.i=n.index_.toString()),e}var lC=class n extends Kp{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Sl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(k(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let c=xP(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let f=d;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(s,f,!1,r),Ls(this.listens_,o)===a){let g;l?l===401?g="permission_denied":g="rest_error:"+l:g="ok",i(g,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=xP(e._queryParams),r=e._path.toString(),i=new ki;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Oi(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ha(a.responseText)}catch{Yt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Yt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var dC=class{constructor(){this.rootNode_=ce.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function eg(){return{value:null,children:new Map}}function bk(n,e,t){if(ge(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=fe(e);n.children.has(r)||n.children.set(r,eg());let i=n.children.get(r);e=Le(e),bk(i,e,t)}}function hC(n,e,t){n.value!==null?t(e,n.value):WG(n,(r,i)=>{let s=new Ne(e.toString()+"/"+r);hC(i,s,t)})}function WG(n,e){n.children.forEach((t,r)=>{e(r,t)})}var fC=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Jt(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var kP=10*1e3,KG=30*1e3,QG=5*60*1e3,pC=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new fC(e);let r=kP+(KG-kP)*Math.random();gl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;Jt(e,(i,s)=>{s>0&&or(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),gl(this.reportStats_.bind(this),Math.floor(Math.random()*2*QG))}};var _r=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(_r||{});function Dk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function zC(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function qC(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var gC=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=_r.ACK_USER_WRITE,this.source=Dk()}operationForChild(e){if(ge(this.path)){if(this.affectedTree.value!=null)return k(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new Ne(e));return new n(Ae(),t,this.revert)}}else return k(fe(this.path)===e,"operationForChild called for unrelated child."),new n(Le(this.path),this.affectedTree,this.revert)}};var tg=class n{constructor(e,t){this.source=e,this.path=t,this.type=_r.LISTEN_COMPLETE}operationForChild(e){return ge(this.path)?new n(this.source,Ae()):new n(this.source,Le(this.path))}};var Qa=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=_r.OVERWRITE}operationForChild(e){return ge(this.path)?new n(this.source,Ae(),this.snap.getImmediateChild(e)):new n(this.source,Le(this.path),this.snap)}};var ng=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=_r.MERGE}operationForChild(e){if(ge(this.path)){let t=this.children.subtree(new Ne(e));return t.isEmpty()?null:t.value?new Qa(this.source,Ae(),t.value):new n(this.source,Ae(),t)}else return k(fe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Le(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Wr=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ge(e))return this.isFullyInitialized()&&!this.filtered_;let t=fe(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var mC=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function YG(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(qG(o.childName,o.snapshotNode))}),pl(n,i,"child_removed",e,r,t),pl(n,i,"child_added",e,r,t),pl(n,i,"child_moved",s,r,t),pl(n,i,"child_changed",e,r,t),pl(n,i,"value",e,r,t),i}function pl(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,c)=>ZG(n,a,c)),o.forEach(a=>{let c=JG(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function JG(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function ZG(n,e,t){if(e.childName==null||t.childName==null)throw Fs("Should only compare child_ events.");let r=new pe(e.childName,e.snapshotNode),i=new pe(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function fg(n,e){return{eventCache:n,serverCache:e}}function yl(n,e,t,r){return fg(new Wr(e,t,r),n.serverCache)}function Sk(n,e,t,r){return fg(n.eventCache,new Wr(e,t,r))}function yC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function io(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var VE,XG=()=>(VE||(VE=new Cn(eG)),VE),Zt=class n{constructor(e,t=XG()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return Jt(e,(r,i)=>{t=t.set(new Ne(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Ae(),value:this.value};if(ge(e))return null;{let r=fe(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Le(e),t);return s!=null?{path:dt(new Ne(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ge(e))return this;{let t=fe(e),r=this.children.get(t);return r!==null?r.subtree(Le(e)):new n(null)}}set(e,t){if(ge(e))return new n(t,this.children);{let r=fe(e),s=(this.children.get(r)||new n(null)).set(Le(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(ge(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=fe(e),r=this.children.get(t);if(r){let i=r.remove(Le(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(ge(e))return this.value;{let t=fe(e),r=this.children.get(t);return r?r.get(Le(e)):null}}setTree(e,t){if(ge(e))return t;{let r=fe(e),s=(this.children.get(r)||new n(null)).setTree(Le(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(Ae(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(dt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Ae(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(ge(e))return null;{let s=fe(e),o=this.children.get(s);return o?o.findOnPath_(Le(e),dt(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ae(),t)}foreachOnPath_(e,t,r){if(ge(e))return this;{this.value&&r(t,this.value);let i=fe(e),s=this.children.get(i);return s?s.foreachOnPath_(Le(e),dt(t,i),r):new n(null)}}foreach(e){this.foreach_(Ae(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(dt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var qn=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Zt(null))}};function _l(n,e,t){if(ge(e))return new qn(new Zt(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Qt(i,e);return s=s.updateChild(o,t),new qn(n.writeTree_.set(i,s))}else{let i=new Zt(t),s=n.writeTree_.setTree(e,i);return new qn(s)}}}function OP(n,e,t){let r=n;return Jt(t,(i,s)=>{r=_l(r,dt(e,i),s)}),r}function FP(n,e){if(ge(e))return qn.empty();{let t=n.writeTree_.setTree(e,new Zt(null));return new qn(t)}}function _C(n,e){return so(n,e)!=null}function so(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Qt(t.path,e)):null}function LP(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Je,(r,i)=>{e.push(new pe(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new pe(r,i.value))}),e}function Hi(n,e){if(ge(e))return n;{let t=so(n,e);return t!=null?new qn(new Zt(t)):new qn(n.writeTree_.subtree(e))}}function vC(n){return n.writeTree_.isEmpty()}function Ya(n,e){return Ak(Ae(),n.writeTree_,e)}function Ak(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(k(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=Ak(dt(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(dt(n,".priority"),r)),t}}function GC(n,e){return xk(e,n)}function eW(n,e,t,r,i){k(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=_l(n.visibleWrites,e,t)),n.lastWriteId=r}function tW(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function nW(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);k(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&rW(a,r.path)?i=!1:zn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return iW(n),!0;if(r.snap)n.visibleWrites=FP(n.visibleWrites,r.path);else{let a=r.children;Jt(a,c=>{n.visibleWrites=FP(n.visibleWrites,dt(r.path,c))})}return!0}else return!1}function rW(n,e){if(n.snap)return zn(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&zn(dt(n.path,t),e))return!0;return!1}function iW(n){n.visibleWrites=Rk(n.allWrites,sW,Ae()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function sW(n){return n.visible}function Rk(n,e,t){let r=qn.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)zn(t,o)?(a=Qt(t,o),r=_l(r,a,s.snap)):zn(o,t)&&(a=Qt(o,t),r=_l(r,Ae(),s.snap.getChild(a)));else if(s.children){if(zn(t,o))a=Qt(t,o),r=OP(r,a,s.children);else if(zn(o,t))if(a=Qt(o,t),ge(a))r=OP(r,Ae(),s.children);else{let c=Ls(s.children,fe(a));if(c){let l=c.getChild(Le(a));r=_l(r,Ae(),l)}}}else throw Fs("WriteRecord should have .snap or .children")}}return r}function Nk(n,e,t,r,i){if(!r&&!i){let s=so(n.visibleWrites,e);if(s!=null)return s;{let o=Hi(n.visibleWrites,e);if(vC(o))return t;if(t==null&&!_C(o,Ae()))return null;{let a=t||ce.EMPTY_NODE;return Ya(o,a)}}}else{let s=Hi(n.visibleWrites,e);if(!i&&vC(s))return t;if(!i&&t==null&&!_C(s,Ae()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(zn(l.path,e)||zn(e,l.path))},a=Rk(n.allWrites,o,e),c=t||ce.EMPTY_NODE;return Ya(a,c)}}}function oW(n,e,t){let r=ce.EMPTY_NODE,i=so(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Je,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=Hi(n.visibleWrites,e);return t.forEachChild(Je,(o,a)=>{let c=Ya(Hi(s,new Ne(o)),a);r=r.updateImmediateChild(o,c)}),LP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Hi(n.visibleWrites,e);return LP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function aW(n,e,t,r,i){k(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=dt(e,t);if(_C(n.visibleWrites,s))return null;{let o=Hi(n.visibleWrites,s);return vC(o)?i.getChild(t):Ya(o,i.getChild(t))}}function cW(n,e,t,r){let i=dt(e,t),s=so(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=Hi(n.visibleWrites,i);return Ya(o,r.getNode().getImmediateChild(t))}else return null}function uW(n,e){return so(n.visibleWrites,e)}function lW(n,e,t,r,i,s,o){let a,c=Hi(n.visibleWrites,e),l=so(c,Ae());if(l!=null)a=l;else if(t!=null)a=Ya(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),y=g.getNext();for(;y&&d.length<i;)f(y,r)!==0&&d.push(y),y=g.getNext();return d}else return[]}function dW(){return{visibleWrites:qn.empty(),allWrites:[],lastWriteId:-1}}function rg(n,e,t,r){return Nk(n.writeTree,n.treePath,e,t,r)}function WC(n,e){return oW(n.writeTree,n.treePath,e)}function VP(n,e,t,r){return aW(n.writeTree,n.treePath,e,t,r)}function ig(n,e){return uW(n.writeTree,dt(n.treePath,e))}function hW(n,e,t,r,i,s){return lW(n.writeTree,n.treePath,e,t,r,i,s)}function KC(n,e,t){return cW(n.writeTree,n.treePath,e,t)}function Mk(n,e){return xk(dt(n.treePath,e),n.writeTree)}function xk(n,e){return{treePath:n,writeTree:e}}var wC=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;k(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),k(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,Il(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,wl(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,Ka(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,Il(r,e.snapshotNode,i.oldSnap));else throw Fs("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var IC=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},Pk=new IC,Cl=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Wr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return KC(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:io(this.viewCache_),s=hW(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function fW(n){return{filter:n}}function pW(n,e){k(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),k(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function gW(n,e,t,r,i){let s=new wC,o,a;if(t.type===_r.OVERWRITE){let l=t;l.source.fromUser?o=EC(n,e,l.path,l.snap,r,i,s):(k(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!ge(l.path),o=sg(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===_r.MERGE){let l=t;l.source.fromUser?o=yW(n,e,l.path,l.children,r,i,s):(k(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=CC(n,e,l.path,l.children,r,i,a,s))}else if(t.type===_r.ACK_USER_WRITE){let l=t;l.revert?o=wW(n,e,l.path,r,i,s):o=_W(n,e,l.path,l.affectedTree,r,i,s)}else if(t.type===_r.LISTEN_COMPLETE)o=vW(n,e,t.path,r,s);else throw Fs("Unknown operation type: "+t.type);let c=s.getChanges();return mW(e,o,c),{viewCache:o,changes:c}}function mW(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=yC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(Tk(yC(e)))}}function kk(n,e,t,r,i,s){let o=e.eventCache;if(ig(r,t)!=null)return e;{let a,c;if(ge(t))if(k(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=io(e),d=l instanceof ce?l:ce.EMPTY_NODE,f=WC(r,d);a=n.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let l=rg(r,io(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=fe(t);if(l===".priority"){k(zi(t)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=VP(r,t,d,c);f!=null?a=n.filter.updatePriority(d,f):a=o.getNode()}else{let d=Le(t),f;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let g=VP(r,t,o.getNode(),c);g!=null?f=o.getNode().getImmediateChild(l).updateChild(d,g):f=o.getNode().getImmediateChild(l)}else f=KC(r,l,e.serverCache);f!=null?a=n.filter.updateChild(o.getNode(),l,f,d,i,s):a=o.getNode()}}return yl(e,a,o.isFullyInitialized()||ge(t),n.filter.filtersNodes())}}function sg(n,e,t,r,i,s,o,a){let c=e.serverCache,l,d=o?n.filter:n.filter.getIndexedFilter();if(ge(t))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let y=c.getNode().updateChild(t,r);l=d.updateFullNode(c.getNode(),y,null)}else{let y=fe(t);if(!c.isCompleteForPath(t)&&zi(t)>1)return e;let E=Le(t),N=c.getNode().getImmediateChild(y).updateChild(E,r);y===".priority"?l=d.updatePriority(c.getNode(),N):l=d.updateChild(c.getNode(),y,N,E,Pk,null)}let f=Sk(e,l,c.isFullyInitialized()||ge(t),d.filtersNodes()),g=new Cl(i,f,s);return kk(n,f,t,i,g,a)}function EC(n,e,t,r,i,s,o){let a=e.eventCache,c,l,d=new Cl(i,e,s);if(ge(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),c=yl(e,l,!0,n.filter.filtersNodes());else{let f=fe(t);if(f===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),c=yl(e,l,a.isFullyInitialized(),a.isFiltered());else{let g=Le(t),y=a.getNode().getImmediateChild(f),E;if(ge(g))E=r;else{let R=d.getCompleteChild(f);R!=null?mk(g)===".priority"&&R.getChild(_k(g)).isEmpty()?E=R:E=R.updateChild(g,r):E=ce.EMPTY_NODE}if(y.equals(E))c=e;else{let R=n.filter.updateChild(a.getNode(),f,E,g,d,o);c=yl(e,R,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function UP(n,e){return n.eventCache.isCompleteForChild(e)}function yW(n,e,t,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=dt(t,c);UP(e,fe(d))&&(a=EC(n,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=dt(t,c);UP(e,fe(d))||(a=EC(n,a,d,l,i,s,o))}),a}function jP(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function CC(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;ge(t)?l=r:l=new Zt(null).setTree(t,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){let y=e.serverCache.getNode().getImmediateChild(f),E=jP(n,y,g);c=sg(n,c,new Ne(f),E,i,s,o,a)}}),l.children.inorderTraversal((f,g)=>{let y=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!d.hasChild(f)&&!y){let E=e.serverCache.getNode().getImmediateChild(f),R=jP(n,E,g);c=sg(n,c,new Ne(f),R,i,s,o,a)}}),c}function _W(n,e,t,r,i,s,o){if(ig(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(ge(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return sg(n,e,t,c.getNode().getChild(t),i,s,a,o);if(ge(t)){let l=new Zt(null);return c.getNode().forEachChild($a,(d,f)=>{l=l.set(new Ne(d),f)}),CC(n,e,t,l,i,s,a,o)}else return e}else{let l=new Zt(null);return r.foreach((d,f)=>{let g=dt(t,d);c.isCompleteForPath(g)&&(l=l.set(d,c.getNode().getChild(g)))}),CC(n,e,t,l,i,s,a,o)}}function vW(n,e,t,r,i){let s=e.serverCache,o=Sk(e,s.getNode(),s.isFullyInitialized()||ge(t),s.isFiltered());return kk(n,o,t,r,Pk,i)}function wW(n,e,t,r,i,s){let o;if(ig(r,t)!=null)return e;{let a=new Cl(r,e,i),c=e.eventCache.getNode(),l;if(ge(t)||fe(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=rg(r,io(e));else{let f=e.serverCache.getNode();k(f instanceof ce,"serverChildren would be complete if leaf node"),d=WC(r,f)}d=d,l=n.filter.updateFullNode(c,d,s)}else{let d=fe(t),f=KC(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?l=n.filter.updateChild(c,d,f,Le(t),a,s):e.eventCache.getNode().hasChild(d)?l=n.filter.updateChild(c,d,ce.EMPTY_NODE,Le(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=rg(r,io(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||ig(r,Ae())!=null,yl(e,l,o,n.filter.filtersNodes())}}var TC=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new El(r.getIndex()),s=GG(r);this.processor_=fW(s);let o=t.serverCache,a=t.eventCache,c=i.updateFullNode(ce.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(ce.EMPTY_NODE,a.getNode(),null),d=new Wr(c,o.isFullyInitialized(),i.filtersNodes()),f=new Wr(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=fg(f,d),this.eventGenerator_=new mC(this.query_)}get query(){return this.query_}};function IW(n){return n.viewCache_.serverCache.getNode()}function EW(n,e){let t=io(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ge(e)&&!t.getImmediateChild(fe(e)).isEmpty())?t.getChild(e):null}function BP(n){return n.eventRegistrations_.length===0}function CW(n,e){n.eventRegistrations_.push(e)}function $P(n,e,t){let r=[];if(t){k(e==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function HP(n,e,t,r){e.type===_r.MERGE&&e.source.queryId!==null&&(k(io(n.viewCache_),"We should always have a full cache before handling merges"),k(yC(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=gW(n.processor_,i,e,t,r);return pW(n.processor_,s.viewCache),k(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Ok(n,s.changes,s.viewCache.eventCache.getNode(),null)}function TW(n,e){let t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Je,(s,o)=>{r.push(Ka(s,o))}),t.isFullyInitialized()&&r.push(Tk(t.getNode())),Ok(n,r,t.getNode(),e)}function Ok(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return YG(n.eventGenerator_,e,t,i)}var og,bC=class{constructor(){this.views=new Map}};function bW(n){k(!og,"__referenceConstructor has already been defined"),og=n}function DW(){return k(og,"Reference.ts has not been loaded"),og}function SW(n){return n.views.size===0}function QC(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return k(s!=null,"SyncTree gave us an op for an invalid query."),HP(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(HP(o,e,t,r));return s}}function AW(n,e,t,r,i){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=rg(t,i?r:null),c=!1;a?c=!0:r instanceof ce?(a=WC(t,r),c=!1):(a=ce.EMPTY_NODE,c=!1);let l=fg(new Wr(a,c,!1),new Wr(r,i,!1));return new TC(e,l)}return o}function RW(n,e,t,r,i,s){let o=AW(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),CW(o,t),TW(o,t)}function NW(n,e,t,r){let i=e._queryIdentifier,s=[],o=[],a=qi(n);if(i==="default")for(let[c,l]of n.views.entries())o=o.concat($P(l,t,r)),BP(l)&&(n.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=n.views.get(i);c&&(o=o.concat($P(c,t,r)),BP(c)&&(n.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!qi(n)&&s.push(new(DW())(e._repo,e._path)),{removed:s,events:o}}function Fk(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ha(n,e){let t=null;for(let r of n.views.values())t=t||EW(r,e);return t}function Lk(n,e){if(e._queryParams.loadsAllData())return pg(n);{let r=e._queryIdentifier;return n.views.get(r)}}function Vk(n,e){return Lk(n,e)!=null}function qi(n){return pg(n)!=null}function pg(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var ag;function MW(n){k(!ag,"__referenceConstructor has already been defined"),ag=n}function xW(){return k(ag,"Reference.ts has not been loaded"),ag}var PW=1,cg=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Zt(null),this.pendingWriteTree_=dW(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Uk(n,e,t,r,i){return eW(n.pendingWriteTree_,e,t,r,i),i?Rl(n,new Qa(Dk(),e,t)):[]}function to(n,e,t=!1){let r=tW(n.pendingWriteTree_,e);if(nW(n.pendingWriteTree_,e)){let s=new Zt(null);return r.snap!=null?s=s.set(Ae(),!0):Jt(r.children,o=>{s=s.set(new Ne(o),!0)}),Rl(n,new gC(r.path,s,t))}else return[]}function gg(n,e,t){return Rl(n,new Qa(zC(),e,t))}function kW(n,e,t){let r=Zt.fromObject(t);return Rl(n,new ng(zC(),e,r))}function OW(n,e){return Rl(n,new tg(zC(),e))}function FW(n,e,t){let r=JC(n,t);if(r){let i=ZC(r),s=i.path,o=i.queryId,a=Qt(s,e),c=new tg(qC(o),a);return XC(n,s,c)}else return[]}function DC(n,e,t,r,i=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||Vk(o,e))){let c=NW(o,e,t,r);SW(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let d=l.findIndex(g=>g._queryParams.loadsAllData())!==-1,f=n.syncPointTree_.findOnPath(s,(g,y)=>qi(y));if(d&&!f){let g=n.syncPointTree_.subtree(s);if(!g.isEmpty()){let y=UW(g);for(let E=0;E<y.length;++E){let R=y[E],N=R.query,L=$k(n,R);n.listenProvider_.startListening(vl(N),ug(n,N),L.hashFn,L.onComplete)}}}!f&&l.length>0&&!r&&(d?n.listenProvider_.stopListening(vl(e),null):l.forEach(g=>{let y=n.queryToTagMap.get(mg(g));n.listenProvider_.stopListening(vl(g),y)}))}jW(n,l)}return a}function LW(n,e,t,r){let i=JC(n,r);if(i!=null){let s=ZC(i),o=s.path,a=s.queryId,c=Qt(o,e),l=new Qa(qC(a),c,t);return XC(n,o,l)}else return[]}function VW(n,e,t,r){let i=JC(n,r);if(i){let s=ZC(i),o=s.path,a=s.queryId,c=Qt(o,e),l=Zt.fromObject(t),d=new ng(qC(a),c,l);return XC(n,o,d)}else return[]}function zP(n,e,t,r=!1){let i=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(g,y)=>{let E=Qt(g,i);s=s||Ha(y,E),o=o||qi(y)});let a=n.syncPointTree_.get(i);a?(o=o||qi(a),s=s||Ha(a,Ae())):(a=new bC,n.syncPointTree_=n.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=ce.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((y,E)=>{let R=Ha(E,Ae());R&&(s=s.updateImmediateChild(y,R))}));let l=Vk(a,e);if(!l&&!e._queryParams.loadsAllData()){let g=mg(e);k(!n.queryToTagMap.has(g),"View does not exist, but we have a tag");let y=BW();n.queryToTagMap.set(g,y),n.tagToQueryMap.set(y,g)}let d=GC(n.pendingWriteTree_,i),f=RW(a,e,t,d,s,c);if(!l&&!o&&!r){let g=Lk(a,e);f=f.concat($W(n,e,g))}return f}function YC(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=Qt(o,e),l=Ha(a,c);if(l)return l});return Nk(i,e,s,t,!0)}function Rl(n,e){return jk(e,n.syncPointTree_,null,GC(n.pendingWriteTree_,Ae()))}function jk(n,e,t,r){if(ge(n.path))return Bk(n,e,t,r);{let i=e.get(Ae());t==null&&i!=null&&(t=Ha(i,Ae()));let s=[],o=fe(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,d=Mk(r,o);s=s.concat(jk(a,c,l,d))}return i&&(s=s.concat(QC(i,n,r,t))),s}}function Bk(n,e,t,r){let i=e.get(Ae());t==null&&i!=null&&(t=Ha(i,Ae()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=Mk(r,o),d=n.operationForChild(o);d&&(s=s.concat(Bk(d,a,c,l)))}),i&&(s=s.concat(QC(i,n,r,t))),s}function $k(n,e){let t=e.query,r=ug(n,t);return{hashFn:()=>(IW(e)||ce.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?FW(n,t._path,r):OW(n,t._path);{let s=rG(i,t);return DC(n,t,null,s)}}}}function ug(n,e){let t=mg(e);return n.queryToTagMap.get(t)}function mg(n){return n._path.toString()+"$"+n._queryIdentifier}function JC(n,e){return n.tagToQueryMap.get(e)}function ZC(n){let e=n.indexOf("$");return k(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ne(n.substr(0,e))}}function XC(n,e,t){let r=n.syncPointTree_.get(e);k(r,"Missing sync point for query tag that we're tracking");let i=GC(n.pendingWriteTree_,e);return QC(r,t,i,null)}function UW(n){return n.fold((e,t,r)=>{if(t&&qi(t))return[pg(t)];{let i=[];return t&&(i=Fk(t)),Jt(r,(s,o)=>{i=i.concat(o)}),i}})}function vl(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(xW())(n._repo,n._path):n}function jW(n,e){for(let t=0;t<e.length;++t){let r=e[t];if(!r._queryParams.loadsAllData()){let i=mg(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}function BW(){return PW++}function $W(n,e,t){let r=e._path,i=ug(n,e),s=$k(n,t),o=n.listenProvider_.startListening(vl(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)k(!qi(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,d,f)=>{if(!ge(l)&&d&&qi(d))return[pg(d).query];{let g=[];return d&&(g=g.concat(Fk(d).map(y=>y.query))),Jt(f,(y,E)=>{g=g.concat(E)}),g}});for(let l=0;l<c.length;++l){let d=c[l];n.listenProvider_.stopListening(vl(d),ug(n,d))}}return o}var SC=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},AC=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=dt(this.path_,e);return new n(this.syncTree_,t)}node(){return YC(this.syncTree_,this.path_)}},HW=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},qP=function(n,e,t){if(!n||typeof n!="object")return n;if(k(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return zW(n[".sv"],e,t);if(typeof n[".sv"]=="object")return qW(n[".sv"],e);k(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},zW=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:k(!1,"Unexpected server value: "+n)}},qW=function(n,e,t){n.hasOwnProperty("increment")||k(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&k(!1,"Unexpected increment value: "+r);let i=e.node();if(k(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},GW=function(n,e,t,r){return eT(e,new AC(t,n),r)},Hk=function(n,e,t){return eT(n,new SC(e),t)};function eT(n,e,t){let r=n.getPriority().val(),i=qP(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=qP(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Ga(a,bt(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ga(i))),o.forEachChild(Je,(a,c)=>{let l=eT(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var Tl=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function tT(n,e){let t=e instanceof Ne?e:new Ne(e),r=n,i=fe(t);for(;i!==null;){let s=Ls(r.node.children,i)||{children:{},childCount:0};r=new Tl(i,r,s),t=Le(t),i=fe(t)}return r}function Xa(n){return n.node.value}function zk(n,e){n.node.value=e,RC(n)}function qk(n){return n.node.childCount>0}function WW(n){return Xa(n)===void 0&&!qk(n)}function yg(n,e){Jt(n.node.children,(t,r)=>{e(new Tl(t,n,r))})}function Gk(n,e,t,r){t&&!r&&e(n),yg(n,i=>{Gk(i,e,!0,r)}),t&&r&&e(n)}function KW(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Nl(n){return new Ne(n.parent===null?n.name:Nl(n.parent)+"/"+n.name)}function RC(n){n.parent!==null&&QW(n.parent,n.name,n)}function QW(n,e,t){let r=WW(t),i=or(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,RC(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,RC(n))}var YW=/[\[\].#$\/\u0000-\u001F\u007F]/,JW=/[\[\].#$\u0000-\u001F\u007F]/,UE=10*1024*1024,Wk=function(n){return typeof n=="string"&&n.length!==0&&!YW.test(n)},Kk=function(n){return typeof n=="string"&&n.length!==0&&!JW.test(n)},ZW=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Kk(n)};var XW=function(n,e,t,r){r&&e===void 0||nT(Gf(n,"value"),e,t)},nT=function(n,e,t){let r=t instanceof Ne?new XE(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Xs(r));if(typeof e=="function")throw new Error(n+"contains a function "+Xs(r)+" with contents = "+e.toString());if(ZP(e))throw new Error(n+"contains "+e.toString()+" "+Xs(r));if(typeof e=="string"&&e.length>UE/3&&Fu(e)>UE)throw new Error(n+"contains a string greater than "+UE+" utf8 bytes "+Xs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Jt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Wk(o)))throw new Error(n+" contains an invalid key ("+o+") "+Xs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);xG(r,o),nT(n,a,r),PG(r)}),i&&s)throw new Error(n+' contains ".value" child '+Xs(r)+" in addition to actual children.")}};var Qk=function(n,e,t,r){if(!(r&&t===void 0)&&!Kk(t))throw new Error(Gf(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},e6=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Qk(n,e,t,r)},t6=function(n,e){if(fe(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},n6=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Wk(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!ZW(t))throw new Error(Gf(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var NC=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function rT(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!BC(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function Yk(n,e,t){rT(n,t),Jk(n,r=>BC(r,e))}function Kr(n,e,t){rT(n,t),Jk(n,r=>zn(r,e)||zn(e,r))}function Jk(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(r6(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function r6(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();no&&kt("event: "+t.toString()),Za(r)}}}var i6="repo_interrupt",s6=25,MC=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new NC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=eg(),this.transactionQueueTree_=new Tl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function o6(n,e,t){if(n.stats_=jC(n.repoInfo_),n.forceRestClient_||aG())n.server_=new lC(n.repoInfo_,(r,i,s,o)=>{GP(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>WP(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ut(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new $C(n.repoInfo_,e,(r,i,s,o)=>{GP(n,r,i,s,o)},r=>{WP(n,r)},r=>{c6(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=uG(n.repoInfo_,()=>new pC(n.stats_,n.server_)),n.infoData_=new dC,n.infoSyncTree_=new cg({startListening:(r,i,s,o)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=gg(n.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),sT(n,"connected",!1),n.serverSyncTree_=new cg({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);Kr(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function a6(n){let t=n.infoData_.getNode(new Ne(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function iT(n){return HW({timestamp:a6(n)})}function GP(n,e,t,r,i){n.dataUpdateCount++;let s=new Ne(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let c=Ou(t,l=>bt(l));o=VW(n.serverSyncTree_,s,c,i)}else{let c=bt(t);o=LW(n.serverSyncTree_,s,c,i)}else if(r){let c=Ou(t,l=>bt(l));o=kW(n.serverSyncTree_,s,c)}else{let c=bt(t);o=gg(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=_g(n,s)),Kr(n.eventQueue_,a,o)}function WP(n,e){sT(n,"connected",e),e===!1&&l6(n)}function c6(n,e){Jt(e,(t,r)=>{sT(n,t,r)})}function sT(n,e,t){let r=new Ne("/.info/"+e),i=bt(t);n.infoData_.updateSnapshot(r,i);let s=gg(n.infoSyncTree_,r,i);Kr(n.eventQueue_,r,s)}function Zk(n){return n.nextWriteId_++}function u6(n,e,t,r,i){oT(n,"set",{path:e.toString(),value:t,priority:r});let s=iT(n),o=bt(t,r),a=YC(n.serverSyncTree_,e),c=Hk(o,a,s),l=Zk(n),d=Uk(n.serverSyncTree_,e,c,l,!0);rT(n.eventQueue_,d),n.server_.put(e.toString(),o.val(!0),(g,y)=>{let E=g==="ok";E||Yt("set at "+e+" failed: "+g);let R=to(n.serverSyncTree_,l,!E);Kr(n.eventQueue_,e,R),f6(n,i,g,y)});let f=rO(n,e);_g(n,f),Kr(n.eventQueue_,f,[])}function l6(n){oT(n,"onDisconnectEvents");let e=iT(n),t=eg();hC(n.onDisconnect_,Ae(),(i,s)=>{let o=GW(i,s,n.serverSyncTree_,e);bk(t,i,o)});let r=[];hC(t,Ae(),(i,s)=>{r=r.concat(gg(n.serverSyncTree_,i,s));let o=rO(n,i);_g(n,o)}),n.onDisconnect_=eg(),Kr(n.eventQueue_,Ae(),r)}function d6(n,e,t){let r;fe(e._path)===".info"?r=zP(n.infoSyncTree_,e,t):r=zP(n.serverSyncTree_,e,t),Yk(n.eventQueue_,e._path,r)}function KP(n,e,t){let r;fe(e._path)===".info"?r=DC(n.infoSyncTree_,e,t):r=DC(n.serverSyncTree_,e,t),Yk(n.eventQueue_,e._path,r)}function h6(n){n.persistentConnection_&&n.persistentConnection_.interrupt(i6)}function oT(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),kt(t,...e)}function f6(n,e,t,r){e&&Za(()=>{if(t==="ok")e(null);else{let i=(t||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function Xk(n,e,t){return YC(n.serverSyncTree_,e,t)||ce.EMPTY_NODE}function aT(n,e=n.transactionQueueTree_){if(e||vg(n,e),Xa(e)){let t=tO(n,e);k(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&p6(n,Nl(e),t)}else qk(e)&&yg(e,t=>{aT(n,t)})}function p6(n,e,t){let r=t.map(l=>l.currentWriteId),i=Xk(n,e,r),s=i,o=i.hash();for(let l=0;l<t.length;l++){let d=t[l];k(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=Qt(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{oT(n,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let f=[];for(let g=0;g<t.length;g++)t[g].status=2,d=d.concat(to(n.serverSyncTree_,t[g].currentWriteId)),t[g].onComplete&&f.push(()=>t[g].onComplete(null,!0,t[g].currentOutputSnapshotResolved)),t[g].unwatcher();vg(n,tT(n.transactionQueueTree_,e)),aT(n,n.transactionQueueTree_),Kr(n.eventQueue_,e,d);for(let g=0;g<f.length;g++)Za(f[g])}else{if(l==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{Yt("transaction at "+c.toString()+" failed: "+l);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=l}_g(n,e)}},o)}function _g(n,e){let t=eO(n,e),r=Nl(t),i=tO(n,t);return g6(n,i,r),r}function g6(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Qt(t,c.path),d=!1,f;if(k(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(to(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=s6)d=!0,f="maxretry",i=i.concat(to(n.serverSyncTree_,c.currentWriteId,!0));else{let g=Xk(n,c.path,o);c.currentInputSnapshot=g;let y=e[a].update(g.val());if(y!==void 0){nT("transaction failed: Data returned ",y,c.path);let E=bt(y);typeof y=="object"&&y!=null&&or(y,".priority")||(E=E.updatePriority(g.getPriority()));let N=c.currentWriteId,L=iT(n),$=Hk(E,g,L);c.currentOutputSnapshotRaw=E,c.currentOutputSnapshotResolved=$,c.currentWriteId=Zk(n),o.splice(o.indexOf(N),1),i=i.concat(Uk(n.serverSyncTree_,c.path,$,c.currentWriteId,c.applyLocally)),i=i.concat(to(n.serverSyncTree_,N,!0))}else d=!0,f="nodata",i=i.concat(to(n.serverSyncTree_,c.currentWriteId,!0))}Kr(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}vg(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Za(r[a]);aT(n,n.transactionQueueTree_)}function eO(n,e){let t,r=n.transactionQueueTree_;for(t=fe(e);t!==null&&Xa(r)===void 0;)r=tT(r,t),e=Le(e),t=fe(e);return r}function tO(n,e){let t=[];return nO(n,e,t),t.sort((r,i)=>r.order-i.order),t}function nO(n,e,t){let r=Xa(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);yg(e,i=>{nO(n,i,t)})}function vg(n,e){let t=Xa(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,zk(e,t.length>0?t:void 0)}yg(e,r=>{vg(n,r)})}function rO(n,e){let t=Nl(eO(n,e)),r=tT(n.transactionQueueTree_,e);return KW(r,i=>{jE(n,i)}),jE(n,r),Gk(r,i=>{jE(n,i)}),t}function jE(n,e){let t=Xa(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(k(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(k(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(to(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?zk(e,void 0):t.length=s+1,Kr(n.eventQueue_,Nl(e),i);for(let o=0;o<r.length;o++)Za(r[o])}}function m6(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function y6(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Yt(`Invalid query segment '${t}' in query '${n}'`)}return e}var QP=function(n,e){let t=_6(n),r=t.namespace;t.domain==="firebase.com"&&Gr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Gr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||Z3();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Gp(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new Ne(t.pathString)}},_6=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let d=n.indexOf("/");d===-1&&(d=n.length);let f=n.indexOf("?");f===-1&&(f=n.length),e=n.substring(0,Math.min(d,f)),d<f&&(i=m6(n.substring(d,f)));let g=y6(n.substring(Math.min(n.length,f)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let y=e.slice(0,l);if(y.toLowerCase()==="localhost")t="localhost";else if(y.split(".").length<=2)t=y;else{let E=e.indexOf(".");r=e.substring(0,E).toLowerCase(),t=e.substring(E+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var lg=class{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ut(this.snapshot.exportVal())}},dg=class{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var xC=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return k(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var PC=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return ge(this._path)?null:mk(this._path)}get ref(){return new Qr(this._repo,this._path)}get _queryIdentifier(){let e=PP(this._queryParams),t=UC(e);return t==="{}"?"default":t}get _queryObject(){return PP(this._queryParams)}isEqual(e){if(e=Ke(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=BC(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+MG(this._path)}};var Qr=class n extends PC{constructor(e,t){super(e,t,new uC,!1)}get parent(){let e=_k(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},hg=class n{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new Ne(e),r=bl(this.ref,e);return new n(this._node.getChild(t),r,Je)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new n(i,bl(this.ref,r),Je)))}hasChild(e){let t=new Ne(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function wg(n,e){return n=Ke(n),n._checkNotDeleted("ref"),e!==void 0?bl(n._root,e):n._root}function bl(n,e){return n=Ke(n),fe(n._path)===null?e6("child","path",e,!1):Qk("child","path",e,!1),new Qr(n._repo,dt(n._path,e))}function cT(n,e){n=Ke(n),t6("set",n._path),XW("set",e,n._path,!1);let t=new ki;return u6(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}var kC=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let r=t._queryParams.getIndex();return new lg("value",this,new hg(e.snapshotNode,new Qr(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new dg(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},OC=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new dg(this,e,t):null}createEvent(e,t){k(e.childName!=null,"Child events should have a childName.");let r=bl(new Qr(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new lg(e.type,this,new hg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function v6(n,e,t,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=t,l=(d,f)=>{KP(n._repo,n,a),c(d,f)};l.userCallback=t.userCallback,l.context=t.context,t=l}let o=new xC(t,s||void 0),a=e==="value"?new kC(o):new OC(e,o);return d6(n._repo,n,a),()=>KP(n._repo,n,a)}function uT(n,e,t,r){return v6(n,"value",e,t,r)}bW(Qr);MW(Qr);var w6="FIREBASE_DATABASE_EMULATOR_HOST",FC={},I6=!1;function E6(n,e,t,r){n.repoInfo_=new Gp(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function C6(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||Gr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),kt("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=QP(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[w6]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=QP(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new ml(ml.OWNER):new GE(n.name,n.options,e);n6("Invalid Firebase Database URL",o),ge(o.path)||Gr("Database URL must point to the root of a Firebase Database (not including a child path).");let f=b6(a,n,d,new qE(n.name,t));return new LC(f,n)}function T6(n,e){let t=FC[e];(!t||t[n.key]!==n)&&Gr(`Database ${e}(${n.repoInfo_}) has already been deleted.`),h6(n),delete t[n.key]}function b6(n,e,t,r){let i=FC[e.name];i||(i={},FC[e.name]=i);let s=i[n.toURLString()];return s&&Gr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new MC(n,I6,t,r),i[n.toURLString()]=s,s}var LC=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(o6(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qr(this._repo,Ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(T6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Gr("Cannot call "+e+" on a deleted database.")}};function Ml(n=Li(),e){let t=js(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=Hf("database");r&&iO(t,...r)}return t}function iO(n,e,t,r={}){n=Ke(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Gr("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Gr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ml(ml.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:zf(r.mockUserToken,n.app.options.projectId);s=new ml(o)}E6(i,e,t,s)}function D6(n){Q3(lr),ur(new Kt("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return C6(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),$e(mP,yP,n),$e(mP,yP,"esm2017")}$C.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};$C.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};D6();function IO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var EO=IO,CO=new Ur("auth","Firebase",IO());var Dg=new ar("@firebase/auth");function S6(n,...e){Dg.logLevel<=he.WARN&&Dg.warn(`Auth (${lr}): ${n}`,...e)}function Eg(n,...e){Dg.logLevel<=he.ERROR&&Dg.error(`Auth (${lr}): ${n}`,...e)}function Tn(n,...e){throw NT(n,...e)}function Gn(n,...e){return NT(n,...e)}function RT(n,e,t){let r=Object.assign(Object.assign({},EO()),{[e]:t});return new Ur("auth","Firebase",r).create(e,{appName:n.name})}function Zr(n){return RT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function A6(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Tn(n,"argument-error"),RT(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function NT(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return CO.create(n,...e)}function K(n,e,...t){if(!n)throw NT(e,...t)}function Yr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Eg(e),new Error(e)}function Xr(n,e){n||Yr(e)}function hT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function R6(){return sO()==="http:"||sO()==="https:"}function sO(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function N6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(R6()||lM()||"connection"in navigator)?navigator.onLine:!0}function M6(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var oo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xr(t>e,"Short delay should be less than long delay!"),this.isMobile=Pu()||qf()}get(){return N6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function MT(n,e){Xr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Sg=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var x6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var P6=new oo(3e4,6e4);function Wi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ki(s,o,a,c){return v(this,arguments,function*(n,e,t,r,i={}){return TO(n,i,()=>v(this,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=Oi(Object.assign({key:n.config.apiKey},d)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:g},l);return uM()||(y.referrerPolicy="no-referrer"),Sg.fetch()(bO(n,n.config.apiHost,t,f),y)}))})}function TO(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},x6),e);try{let i=new fT(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ig(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ig(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ig(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ig(n,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw RT(n,d,l);Tn(n,d)}}catch(i){if(i instanceof un)throw i;Tn(n,"network-request-failed",{message:String(i)})}})}function Ul(s,o,a,c){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield Ki(n,e,t,r,i);return"mfaPendingCredential"in l&&Tn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function bO(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?MT(n.config,i):`${n.config.apiScheme}://${i}`}function k6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var fT=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Gn(this.auth,"network-request-failed")),P6.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ig(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Gn(n,e,r);return i.customData._tokenResponse=t,i}function oO(n){return n!==void 0&&n.enterprise!==void 0}var pT=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return k6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function O6(n,e){return v(this,null,function*(){return Ki(n,"GET","/v2/recaptchaConfig",Wi(n,e))})}function F6(n,e){return v(this,null,function*(){return Ki(n,"POST","/v1/accounts:delete",e)})}function DO(n,e){return v(this,null,function*(){return Ki(n,"POST","/v1/accounts:lookup",e)})}function xl(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function xT(n,e=!1){return v(this,null,function*(){let t=Ke(n),r=yield t.getIdToken(e),i=PT(r);K(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:xl(lT(i.auth_time)),issuedAtTime:xl(lT(i.iat)),expirationTime:xl(lT(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function lT(n){return Number(n)*1e3}function PT(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Eg("JWT malformed, contained fewer than 3 sections"),null;try{let i=xu(t);return i?JSON.parse(i):(Eg("Failed to decode base64 JWT payload"),null)}catch(i){return Eg("Caught error parsing JWT payload as JSON",i?.toString()),null}}function aO(n){let e=PT(n);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function kl(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof un&&L6(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function L6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var gT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ol=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xl(this.lastLoginAt),this.creationTime=xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ag(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield kl(n,DO(t,{idToken:r}));K(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?SO(s.providerUserInfo):[],a=V6(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,d=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ol(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function kT(n){return v(this,null,function*(){let e=Ke(n);yield Ag(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function V6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function SO(n){return n.map(e=>{var{providerId:t}=e,r=Ad(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function U6(n,e){return v(this,null,function*(){let t=yield TO(n,{},()=>v(this,null,function*(){let r=Oi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=bO(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Sg.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function j6(n,e){return v(this,null,function*(){return Ki(n,"POST","/v2/accounts:revokeToken",Wi(n,e))})}var Pl=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):aO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){K(e.length!==0,"internal-error");let t=aO(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield U6(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(K(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Yr("not implemented")}};function Gi(n,e){K(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var tc=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Ad(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ol(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield kl(this,this.stsTokenManager.getToken(this.auth,e));return K(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return xT(this,e)}reload(){return kT(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Ag(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(En(this.auth.app))return Promise.reject(Zr(this.auth));let e=yield this.getIdToken();return yield kl(this,F6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=t.photoURL)!==null&&o!==void 0?o:void 0,R=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,L=(l=t.createdAt)!==null&&l!==void 0?l:void 0,$=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:H,emailVerified:ee,isAnonymous:Ue,providerData:te,stsTokenManager:T}=t;K(H&&T,e,"internal-error");let _=Pl.fromJSON(this.name,T);K(typeof H=="string",e,"internal-error"),Gi(f,e.name),Gi(g,e.name),K(typeof ee=="boolean",e,"internal-error"),K(typeof Ue=="boolean",e,"internal-error"),Gi(y,e.name),Gi(E,e.name),Gi(R,e.name),Gi(N,e.name),Gi(L,e.name),Gi($,e.name);let w=new n({uid:H,auth:e,email:g,emailVerified:ee,displayName:f,isAnonymous:Ue,photoURL:E,phoneNumber:y,tenantId:R,stsTokenManager:_,createdAt:L,lastLoginAt:$});return te&&Array.isArray(te)&&(w.providerData=te.map(C=>Object.assign({},C))),N&&(w._redirectEventId=N),w}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new Pl;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ag(s),s})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];K(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?SO(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Pl;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ol(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var cO=new Map;function Jr(n){Xr(n instanceof Function,"Expected a class definition");let e=cO.get(n);return e?(Xr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,cO.set(n,e),e)}var B6=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),mT=B6;function Cg(n,e,t){return`firebase:${n}:${e}:${t}`}var Rg=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Cg(this.userKey,i.apiKey,s),this.fullPersistenceKey=Cg("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?tc._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(Jr(mT),e,r);let i=(yield Promise.all(t.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Jr(mT),o=Cg(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let d=yield l._get(o);if(d){let f=tc._fromJSON(e,d);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>v(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function uO(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PO(e))return"Blackberry";if(kO(e))return"Webos";if(RO(e))return"Safari";if((e.includes("chrome/")||NO(e))&&!e.includes("edge/"))return"Chrome";if(xO(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function AO(n=mt()){return/firefox\//i.test(n)}function RO(n=mt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NO(n=mt()){return/crios\//i.test(n)}function MO(n=mt()){return/iemobile/i.test(n)}function xO(n=mt()){return/android/i.test(n)}function PO(n=mt()){return/blackberry/i.test(n)}function kO(n=mt()){return/webos/i.test(n)}function OT(n=mt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $6(n=mt()){var e;return OT(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function H6(){return dM()&&document.documentMode===10}function OO(n=mt()){return OT(n)||xO(n)||kO(n)||PO(n)||/windows phone/i.test(n)||MO(n)}function FO(n,e=[]){let t;switch(n){case"Browser":t=uO(mt());break;case"Worker":t=`${uO(mt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${lr}/${r}`}var yT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function z6(t){return v(this,arguments,function*(n,e={}){return Ki(n,"GET","/v2/passwordPolicy",Wi(n,e))})}var q6=6,_T=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:q6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var vT=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ng(this),this.idTokenSubscription=new Ng(this),this.beforeStateQueue=new yT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Jr(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Rg.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield DO(this,{idToken:e}),r=yield tc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(En(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Ag(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=M6()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(En(this.app))return Promise.reject(Zr(this));let t=e?Ke(e):null;return t&&K(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return En(this.app)?Promise.reject(Zr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return En(this.app)?Promise.reject(Zr(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Jr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield z6(this),t=new _T(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ur("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield j6(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Jr(e)||this._popupRedirectResolver;K(t,this,"argument-error"),this.redirectPersistenceManager=yield Rg.create(this,[Jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&S6(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Qi(n){return Ke(n)}var Ng=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=yM(t=>this.observer=t)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ug={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function G6(n){Ug=n}function LO(n){return Ug.loadJS(n)}function W6(){return Ug.recaptchaEnterpriseScript}function K6(){return Ug.gapiScript}function VO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Q6="recaptcha-enterprise",Y6="NO_RECAPTCHA",wT=class{constructor(e){this.type=Q6,this.auth=Qi(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(s){return v(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>v(this,null,function*(){O6(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new pT(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;oO(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(Y6)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&oO(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=W6();c.length!==0&&(c+=a),LO(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function lO(n,e,t,r=!1){return v(this,null,function*(){let i=new wT(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function IT(n,e,t,r){return v(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield lO(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>v(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield lO(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)}))})}function FT(n,e){let t=js(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Vs(s,e??{}))return i;Tn(i,"already-initialized")}return t.initialize({options:e})}function J6(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Jr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function LT(n,e,t){let r=Qi(n);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=UO(e),{host:o,port:a}=Z6(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||X6()}function UO(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Z6(n){let e=UO(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:dO(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:dO(o)}}}function dO(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function X6(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var nc=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yr("not implemented")}_getIdTokenResponse(e){return Yr("not implemented")}_linkToIdToken(e,t){return Yr("not implemented")}_getReauthenticationResolver(e){return Yr("not implemented")}};function e9(n,e){return v(this,null,function*(){return Ki(n,"POST","/v1/accounts:signUp",e)})}function t9(n,e){return v(this,null,function*(){return Ul(n,"POST","/v1/accounts:signInWithPassword",Wi(n,e))})}function n9(n,e){return v(this,null,function*(){return Ul(n,"POST","/v1/accounts:signInWithEmailLink",Wi(n,e))})}function r9(n,e){return v(this,null,function*(){return Ul(n,"POST","/v1/accounts:signInWithEmailLink",Wi(n,e))})}var Fl=class n extends nc{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return IT(e,t,"signInWithPassword",t9);case"emailLink":return n9(e,{email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return IT(e,r,"signUpPassword",e9);case"emailLink":return r9(e,{idToken:t,email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function ec(n,e){return v(this,null,function*(){return Ul(n,"POST","/v1/accounts:signInWithIdp",Wi(n,e))})}var i9="http://localhost",Mg=class n extends nc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Tn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Ad(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return ec(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,ec(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,ec(e,t)}buildRequest(){let e={requestUri:i9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Oi(t)}return e}};function s9(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function o9(n){let e=fa(pa(n)).link,t=e?fa(pa(e)).deep_link_id:null,r=fa(pa(n)).deep_link_id;return(r?fa(pa(r)).link:null)||r||t||e||n}var xg=class n{constructor(e){var t,r,i,s,o,a;let c=fa(pa(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=s9((i=c.mode)!==null&&i!==void 0?i:null);K(l&&d&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=o9(e);try{return new n(t)}catch{return null}}};var jO=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Fl._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=xg.parseLink(r);return K(i,"argument-error"),Fl._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Ll=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Pg=class extends Ll{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var VT=(()=>{class n extends Pg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Mg._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function a9(n,e){return v(this,null,function*(){return Ul(n,"POST","/v1/accounts:signUp",Wi(n,e))})}var rc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let s=yield tc._fromIdTokenResponse(e,r,i),o=hO(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=hO(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function hO(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var ET=class n extends un{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function BO(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ET._fromErrorAndOperation(n,s,e,r):s})}function c9(n,e,t=!1){return v(this,null,function*(){let r=yield kl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return rc._forOperation(n,"link",r)})}function u9(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(En(r.app))return Promise.reject(Zr(r));let i="reauthenticate";try{let s=yield kl(n,BO(r,i,e,n),t);K(s.idToken,r,"internal-error");let o=PT(s.idToken);K(o,r,"internal-error");let{sub:a}=o;return K(n.uid===a,r,"user-mismatch"),rc._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Tn(r,"user-mismatch"),s}})}function $O(n,e,t=!1){return v(this,null,function*(){if(En(n.app))return Promise.reject(Zr(n));let r="signIn",i=yield BO(n,r,e),s=yield rc._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function UT(n,e){return v(this,null,function*(){return $O(Qi(n),e)})}function HO(n){return v(this,null,function*(){let e=Qi(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function jT(n,e,t){return v(this,null,function*(){if(En(n.app))return Promise.reject(Zr(n));let r=Qi(n),o=yield IT(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",a9).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&HO(n),c}),a=yield rc._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function BT(n,e,t){return En(n.app)?Promise.reject(Zr(n)):UT(Ke(n),jO.credential(e,t)).catch(r=>v(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&HO(n),r}))}function $T(n,e,t,r){return Ke(n).onIdTokenChanged(e,t,r)}function HT(n,e,t){return Ke(n).beforeAuthStateChanged(e,t)}function zT(n,e,t,r){return Ke(n).onAuthStateChanged(e,t,r)}function qT(n){return Ke(n).signOut()}var kg="__sak";var Og=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kg,"1"),this.storage.removeItem(kg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var l9=1e3,d9=10,h9=(()=>{class n extends Og{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OO(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);H6()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,d9):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},l9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield ai(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield ai(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield ai(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),zO=h9;var f9=(()=>{class n extends Og{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),GT=f9;function p9(n){return Promise.all(n.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var g9=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(d=>v(this,null,function*(){return d(r.origin,o)})),l=yield p9(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function WT(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var CT=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=WT("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function vr(){return window}function m9(n){vr().location.href=n}function qO(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}function y9(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function _9(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function v9(){return qO()?self:null}var GO="firebaseLocalStorageDb",w9=1,Fg="firebaseLocalStorage",WO="fbase_key",ao=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function jg(n,e){return n.transaction([Fg],e?"readwrite":"readonly").objectStore(Fg)}function I9(){let n=indexedDB.deleteDatabase(GO);return new ao(n).toPromise()}function TT(){let n=indexedDB.open(GO,w9);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Fg,{keyPath:WO})}catch(i){t(i)}}),n.addEventListener("success",()=>v(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Fg)?e(r):(r.close(),yield I9(),e(yield TT()))}))})}function fO(n,e,t){return v(this,null,function*(){let r=jg(n,!0).put({[WO]:e,value:t});return new ao(r).toPromise()})}function E9(n,e){return v(this,null,function*(){let t=jg(n,!1).get(e),r=yield new ao(t).toPromise();return r===void 0?null:r.value})}function pO(n,e){let t=jg(n,!0).delete(e);return new ao(t).toPromise()}var C9=800,T9=3,b9=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield TT(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>T9)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return qO()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=g9._getInstance(v9()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield y9(),!this.activeServiceWorker)return;this.sender=new CT(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||_9()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield TT();return yield fO(t,kg,"1"),yield pO(t,kg),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>fO(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>E9(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>pO(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(s=>{let o=jg(s,!1).getAll();return new ao(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),C9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),KO=b9;var hne=VO("rcb"),fne=new oo(3e4,6e4);function QO(n,e){return e?Jr(e):(K(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Vl=class extends nc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ec(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ec(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ec(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function D9(n){return $O(n.auth,new Vl(n),n.bypassAuthState)}function S9(n){let{auth:e,user:t}=n;return K(t,e,"internal-error"),u9(t,new Vl(n),n.bypassAuthState)}function A9(n){return v(this,null,function*(){let{auth:e,user:t}=n;return K(t,e,"internal-error"),c9(t,new Vl(n),n.bypassAuthState)})}var Lg=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D9;case"linkViaPopup":case"linkViaRedirect":return A9;case"reauthViaPopup":case"reauthViaRedirect":return S9;default:Tn(this.auth,"internal-error")}}resolve(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var R9=new oo(2e3,1e4);function KT(n,e,t){return v(this,null,function*(){if(En(n.app))return Promise.reject(Gn(n,"operation-not-supported-in-this-environment"));let r=Qi(n);A6(n,e,Ll);let i=QO(r,t);return new N9(r,"signInViaPopup",e,i).executeNotNull()})}var N9=(()=>{class n extends Lg{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return v(this,null,function*(){let t=yield this.execute();return K(t,this.auth,"internal-error"),t})}onExecution(){return v(this,null,function*(){Xr(this.filter.length===1,"Popup operations only handle one event");let t=WT();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,R9.get())};t()}}n.currentPopupAction=null;return n})(),M9="pendingRedirect",Tg=new Map,bT=class n extends Lg{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Tg.get(this.auth._key());if(!e){try{let r=(yield x9(this.resolver,this.auth))?yield ai(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Tg.set(this.auth._key(),e)}return this.bypassAuthState||Tg.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return ai(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,ai(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function x9(n,e){return v(this,null,function*(){let t=O9(e),r=k9(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function P9(n,e){Tg.set(n._key(),e)}function k9(n){return Jr(n._redirectPersistence)}function O9(n){return Cg(M9,n.config.apiKey,n.name)}function F9(n,e,t=!1){return v(this,null,function*(){if(En(n.app))return Promise.reject(Zr(n));let r=Qi(n),i=QO(r,e),o=yield new bT(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var L9=10*60*1e3,DT=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!V9(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!YO(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Gn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=L9&&this.cachedEventUids.clear(),this.cachedEventUids.has(gO(e))}saveEventToCache(e){this.cachedEventUids.add(gO(e)),this.lastProcessedEventTime=Date.now()}};function gO(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function YO({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function V9(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YO(n);default:return!1}}function U9(t){return v(this,arguments,function*(n,e={}){return Ki(n,"GET","/v1/projects",e)})}var j9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,B9=/^https?/;function $9(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield U9(n);for(let t of e)try{if(H9(t))return}catch{}Tn(n,"unauthorized-domain")})}function H9(n){let e=hT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!B9.test(t))return!1;if(j9.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var z9=new oo(3e4,6e4);function mO(){let n=vr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function q9(n){return new Promise((e,t)=>{var r,i,s;function o(){mO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mO(),t(Gn(n,"network-request-failed"))},timeout:z9.get()})}if(!((i=(r=vr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=vr().gapi)===null||s===void 0)&&s.load)o();else{let a=VO("iframefcb");return vr()[a]=()=>{gapi.load?o():t(Gn(n,"network-request-failed"))},LO(`${K6()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw bg=null,e})}var bg=null;function G9(n){return bg=bg||q9(n),bg}var W9=new oo(5e3,15e3),K9="__/auth/iframe",Q9="emulator/auth/iframe",Y9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},J9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Z9(n){let e=n.config;K(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?MT(e,Q9):`https://${n.config.authDomain}/${K9}`,r={apiKey:e.apiKey,appName:n.name,v:lr},i=J9.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Oi(r).slice(1)}`}function X9(n){return v(this,null,function*(){let e=yield G9(n),t=vr().gapi;return K(t,n,"internal-error"),e.open({where:document.body,url:Z9(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Y9,dontclear:!0},r=>new Promise((i,s)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Gn(n,"network-request-failed"),a=vr().setTimeout(()=>{s(o)},W9.get());function c(){vr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var e5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t5=500,n5=600,r5="_blank",i5="http://localhost",Vg=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function s5(n,e,t,r=t5,i=n5){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},e5),{width:r.toString(),height:i.toString(),top:s,left:o}),l=mt().toLowerCase();t&&(a=NO(l)?r5:t),AO(l)&&(e=e||i5,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[y,E])=>`${g}${y}=${E},`,"");if($6(l)&&a!=="_self")return o5(e||"",a),new Vg(null);let f=window.open(e||"",a,d);K(f,n,"popup-blocked");try{f.focus()}catch{}return new Vg(f)}function o5(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var a5="__/auth/handler",c5="emulator/auth/handler",u5=encodeURIComponent("fac");function yO(n,e,t,r,i,s){return v(this,null,function*(){K(n.config.authDomain,n,"auth-domain-config-required"),K(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:lr,eventId:i};if(e instanceof Ll){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",ku(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof Pg){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),l=c?`#${u5}=${encodeURIComponent(c)}`:"";return`${l5(n)}?${Oi(a).slice(1)}${l}`})}function l5({config:n}){return n.emulator?MT(n,c5):`https://${n.authDomain}/${a5}`}var dT="webStorageSupport",ST=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GT,this._completeRedirectFn=F9,this._overrideRedirectResult=P9}_openPopup(e,t,r,i){return v(this,null,function*(){var s;Xr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield yO(e,t,r,hT(),i);return s5(e,o,WT())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let s=yield yO(e,t,r,hT(),i);return m9(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Xr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield X9(e),r=new DT(e);return t.register("authEvent",i=>(K(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dT,{type:dT},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[dT];o!==void 0&&t(!!o),Tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return OO()||RO()||OT()}},JO=ST;var _O="@firebase/auth",vO="1.7.9";var AT=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function d5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h5(n){ur(new Kt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FO(n)},l=new vT(r,i,s,c);return J6(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ur(new Kt("auth-internal",e=>{let t=Qi(e.getProvider("auth").getImmediate());return(r=>new AT(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$e(_O,vO,d5(n)),$e(_O,vO,"esm2017")}var f5=5*60,p5=hw("authIdTokenMaxAge")||f5,wO=null,g5=n=>e=>v(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>p5)return;let i=t?.token;wO!==i&&(wO=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function ic(n=Li()){let e=js(n,"auth");if(e.isInitialized())return e.getImmediate();let t=FT(n,{popupRedirectResolver:JO,persistence:[KO,zO,GT]}),r=hw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=g5(s.toString());HT(t,o,()=>o(t.currentUser)),$T(t,a=>o(a))}}let i=lw("auth");return i&&LT(t,`http://${i}`),t}function m5(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}G6({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Gn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",m5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h5("Browser");var Yi=class n{db=Ml();firestore=ul();constructor(){}generateChatRoomId(e,t){return e<t?`${e}_${t}`:`${t}_${e}`}createOrGetChatRoom(e,t){return v(this,null,function*(){let r=this.generateChatRoomId(e,t),i=cl(this.firestore,`chats/${r}`);return(yield $p(i)).exists()||(yield Hp(i,{users:[e,t],createdAt:Date.now()})),r})}sendMessage(e,t){let r=wg(this.db,`chats/${e}/messages/${Date.now()}`);cT(r,t)}getMessages(e){let t=wg(this.db,`chats/${e}/messages`);return new ue(r=>{uT(t,i=>{let s=[];i.forEach(o=>{s.push(o.val())}),r.next(s)})})}createChat(e,t){let r=cl(this.firestore,`chats/${e}`);return Hp(r,t)}getChatMetadata(e){let t=cl(this.firestore,`chats/${e}`);return new ue(r=>{$p(t).then(i=>{i.exists()?r.next(i.data()):r.next(null)}).catch(i=>{r.error(i)})})}getAllChats(){let e=ME(this.firestore,"chats");return new ue(t=>{PE(e).then(r=>{let i=[];r.forEach(s=>{i.push(F({id:s.id},s.data()))}),t.next(i)}).catch(r=>{t.error(r)})})}getCurrentUserUid(){let e=ic().currentUser;return e?e.uid:null}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};function i8(n,e){if(n&1){let t=Zo();G(0,"button",3),Be("click",function(){let i=Ii(t).$implicit,s=Xo();return Ei(s.openChat(i.id))}),Me(1),Q()}if(n&2){let t=e.$implicit;ze(),ef(" ",t.name," ")}}var Bg=class n{constructor(e,t){this.chatService=e;this.router=t}chats=[];ngOnInit(){this.getChatList()}getChatList(){this.chatService.getAllChats().subscribe(e=>{this.chats=e})}openChat(e){this.router.navigate(["/chat",e])}static \u0275fac=function(t){return new(t||n)(q(Yi),q(Un))};static \u0275cmp=pt({type:n,selectors:[["app-chat-list"]],standalone:!0,features:[gt],decls:4,vars:1,consts:[[1,"w-full","h-screen"],[1,"text-4xl","font-bold","text-center","underline"],["class","w-full h-10 px-3 py-2 mt-3 text-left border-2 border-black",3,"click",4,"ngFor","ngForOf"],[1,"w-full","h-10","px-3","py-2","mt-3","text-left","border-2","border-black",3,"click"]],template:function(t,r){t&1&&(G(0,"div",0)(1,"h2",1),Me(2,"Chats"),Q(),_n(3,i8,2,1,"button",2),Q()),t&2&&(ze(3),Et("ngForOf",r.chats))},dependencies:[Ln,yf]})};var o1=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(q(Ns),q(kn))}}static{this.\u0275dir=It({type:n})}}return n})(),s8=(()=>{class n extends o1{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ko(n)))(i||n)}})()}static{this.\u0275dir=It({type:n,features:[Mr]})}}return n})(),a1=new V("");var o8={provide:a1,useExisting:bs(()=>Ji),multi:!0};function a8(){let n=Or()?Or().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var c8=new V(""),Ji=(()=>{class n extends o1{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!a8())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(q(Ns),q(kn),q(c8,8))}}static{this.\u0275dir=It({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Be("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[ru([o8]),Mr]})}}return n})();function u8(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var JT=new V(""),c1=new V("");function l8(n){return u8(n.value)?{required:!0}:null}function ZO(n){return null}function u1(n){return n!=null}function l1(n){return Si(n)?We(n):n}function d1(n){let e={};return n.forEach(t=>{e=t!=null?F(F({},e),t):e}),Object.keys(e).length===0?null:e}function h1(n,e){return e.map(t=>t(n))}function d8(n){return!n.validate}function f1(n){return n.map(e=>d8(e)?e:t=>e.validate(t))}function h8(n){if(!n)return null;let e=n.filter(u1);return e.length==0?null:function(t){return d1(h1(t,e))}}function ZT(n){return n!=null?h8(f1(n)):null}function f8(n){if(!n)return null;let e=n.filter(u1);return e.length==0?null:function(t){let r=h1(t,e).map(l1);return Jm(r).pipe(de(d1))}}function XT(n){return n!=null?f8(f1(n)):null}function XO(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function p8(n){return n._rawValidators}function g8(n){return n._rawAsyncValidators}function YT(n){return n?Array.isArray(n)?n:[n]:[]}function Hg(n,e){return Array.isArray(n)?n.includes(e):n===e}function e1(n,e){let t=YT(e);return YT(n).forEach(i=>{Hg(t,i)||t.push(i)}),t}function t1(n,e){return YT(e).filter(t=>!Hg(n,t))}var zg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ZT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=XT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ac=class extends zg{get formDirective(){return null}get path(){return null}},ql=class extends zg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},qg=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},m8={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},gre=me(F({},m8),{"[class.ng-submitted]":"isSubmitted"}),uc=(()=>{class n extends qg{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(q(ql,2))}}static{this.\u0275dir=It({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Jo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Mr]})}}return n})(),p1=(()=>{class n extends qg{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(q(ac,10))}}static{this.\u0275dir=It({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Jo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Mr]})}}return n})();var jl="VALID",$g="INVALID",sc="PENDING",Bl="DISABLED",cc=class{},Gg=class extends cc{constructor(e,t){super(),this.value=e,this.source=t}},Hl=class extends cc{constructor(e,t){super(),this.pristine=e,this.source=t}},zl=class extends cc{constructor(e,t){super(),this.touched=e,this.source=t}},oc=class extends cc{constructor(e,t){super(),this.status=e,this.source=t}};function g1(n){return(Qg(n)?n.validators:n)||null}function y8(n){return Array.isArray(n)?ZT(n):n||null}function m1(n,e){return(Qg(e)?e.asyncValidators:n)||null}function _8(n){return Array.isArray(n)?XT(n):n||null}function Qg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function v8(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[t])throw new j(1001,"")}function w8(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new j(1002,"")})}var Wg=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=iu(()=>this.statusReactive()),this.statusReactive=eu(void 0),this._pristine=iu(()=>this.pristineReactive()),this.pristineReactive=eu(!0),this._touched=iu(()=>this.touchedReactive()),this.touchedReactive=eu(!1),this._events=new ht,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return On(this.statusReactive)}set status(e){On(()=>this.statusReactive.set(e))}get valid(){return this.status===jl}get invalid(){return this.status===$g}get pending(){return this.status==sc}get disabled(){return this.status===Bl}get enabled(){return this.status!==Bl}get pristine(){return On(this.pristineReactive)}set pristine(e){On(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return On(this.touchedReactive)}set touched(e){On(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(e1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(e1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(t1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(t1(e,this._rawAsyncValidators))}hasValidator(e){return Hg(this._rawValidators,e)}hasAsyncValidator(e){return Hg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(me(F({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new zl(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new zl(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(me(F({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Hl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Hl(!0,r))}markAsPending(e={}){this.status=sc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new oc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(me(F({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Bl,this.errors=null,this._forEachChild(i=>{i.disable(me(F({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Gg(this.value,r)),this._events.next(new oc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(me(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=jl,this._forEachChild(r=>{r.enable(me(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(me(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jl||this.status===sc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Gg(this.value,t)),this._events.next(new oc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(me(F({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bl:jl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=sc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=l1(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new oc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Xe,this.statusChanges=new Xe}_calculateStatus(){return this._allControlsDisabled()?Bl:this.errors?$g:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sc)?sc:this._anyControlsHaveStatus($g)?$g:jl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Hl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new zl(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Qg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=y8(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=_8(this._rawAsyncValidators)}},Kg=class extends Wg{constructor(e,t,r){super(g1(t),m1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){w8(this,!0,e),Object.keys(e).forEach(r=>{v8(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var eb=new V("CallSetDisabledState",{providedIn:"root",factory:()=>tb}),tb="always";function I8(n,e){return[...e.path,n]}function y1(n,e,t=tb){_1(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),C8(n,e),b8(n,e),T8(n,e),E8(n,e)}function n1(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function E8(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function _1(n,e){let t=p8(n);e.validator!==null?n.setValidators(XO(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=g8(n);e.asyncValidator!==null?n.setAsyncValidators(XO(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();n1(e._rawValidators,i),n1(e._rawAsyncValidators,i)}function C8(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&v1(n,e)})}function T8(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&v1(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function v1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function b8(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function D8(n,e){n==null,_1(n,e)}function S8(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function A8(n){return Object.getPrototypeOf(n.constructor)===s8}function R8(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function N8(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Ji?t=s:A8(s)?r=s:i=s}),i||r||t||null}var M8={provide:ac,useExisting:bs(()=>nb)},$l=Promise.resolve(),nb=(()=>{class n extends ac{get submitted(){return On(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=iu(()=>this.submittedReactive()),this.submittedReactive=eu(!1),this._directives=new Set,this.ngSubmit=new Xe,this.form=new Kg({},ZT(t),XT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){$l.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),y1(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){$l.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){$l.then(()=>{let r=this._findContainer(t.path),i=new Kg({});D8(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){$l.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){$l.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),R8(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(q(JT,10),q(c1,10),q(eb,8))}}static{this.\u0275dir=It({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Be("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ru([M8]),Mr]})}}return n})();function r1(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function i1(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var x8=class extends Wg{constructor(e=null,t,r){super(g1(t),m1(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(i1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){r1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){r1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){i1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var P8={provide:ql,useExisting:bs(()=>uo)},s1=Promise.resolve(),uo=(()=>{class n extends ql{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new x8,this._registered=!1,this.name="",this.update=new Xe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=N8(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),S8(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){y1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){s1.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Ri(r);s1.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?I8(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(q(ac,9),q(JT,10),q(c1,10),q(a1,10),q(Ai,8),q(eb,8))}}static{this.\u0275dir=It({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ru([P8]),Mr,vi]})}}return n})(),w1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=It({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var k8=(()=>{class n{constructor(){this._validator=ZO}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ZO,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=It({type:n,features:[vi]})}}return n})();var O8={provide:JT,useExisting:bs(()=>Gl),multi:!0};var Gl=(()=>{class n extends k8{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ri,this.createValidator=t=>l8}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ko(n)))(i||n)}})()}static{this.\u0275dir=It({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&nu("required",i._enabled?"":null)},inputs:{required:"required"},features:[ru([O8]),Mr]})}}return n})();var F8=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ss({type:n})}static{this.\u0275inj=Ds({})}}return n})();var lc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:eb,useValue:t.callSetDisabledState??tb}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ss({type:n})}static{this.\u0275inj=Ds({imports:[F8]})}}return n})();var L8=["chatContainer"];function V8(n,e){n&1&&(G(0,"strong"),Me(1,"You:"),Q())}function U8(n,e){n&1&&(G(0,"strong"),Me(1,"Other:"),Q())}function j8(n,e){if(n&1&&(G(0,"div",6)(1,"div",7),_n(2,V8,2,0,"strong",8)(3,U8,2,0,"strong",8),G(4,"p"),Me(5),Q()(),G(6,"small",9),Me(7),tv(8,"date"),Q()()),n&2){let t=e.$implicit,r=Xo();Jo("sent",t.senderId===r.currentUserUid),ze(2),Et("ngIf",t.senderId===r.currentUserUid),ze(),Et("ngIf",t.senderId!==r.currentUserUid),ze(2),Xh(t.text),ze(2),Xh(AR(8,6,t.timestamp,"shortTime"))}}var Yg=class n{constructor(e,t){this.route=e;this.chatService=t}chatId;messages$;newMessage="";currentUserUid;chatContainer;ngOnInit(){this.chatId=this.route.snapshot.paramMap.get("chatId"),this.currentUserUid=this.chatService.getCurrentUserUid(),this.messages$=this.chatService.getMessages(this.chatId)}ngAfterViewChecked(){this.scrollToBottom()}sendMessage(){if(this.newMessage.trim()){let e={senderId:this.currentUserUid,text:this.newMessage,timestamp:Date.now()};this.chatService.sendMessage(this.chatId,e),this.newMessage="",this.scrollToBottom()}}scrollToBottom(){try{this.chatContainer.nativeElement.scrollTop=this.chatContainer.nativeElement.scrollHeight}catch(e){console.error("Error while scrolling:",e)}}static \u0275fac=function(t){return new(t||n)(q(Vr),q(Yi))};static \u0275cmp=pt({type:n,selectors:[["app-chat"]],viewQuery:function(t,r){if(t&1&&CR(L8,5),t&2){let i;X_(i=ev())&&(r.chatContainer=i.first)}},standalone:!0,features:[gt],decls:8,vars:4,consts:[["chatContainer",""],[1,"chat-container"],["class","message",3,"sent",4,"ngFor","ngForOf"],[1,"message-input"],["placeholder","Type a message...",3,"ngModelChange","keyup.enter","ngModel"],[3,"click"],[1,"message"],[1,"message-content"],[4,"ngIf"],[1,"timestamp"]],template:function(t,r){if(t&1){let i=Zo();G(0,"div",1,0),_n(2,j8,9,9,"div",2),tv(3,"async"),Q(),G(4,"div",3)(5,"input",4),nr("ngModelChange",function(o){return Ii(i),xr(r.newMessage,o)||(r.newMessage=o),Ei(o)}),Be("keyup.enter",function(){return Ii(i),Ei(r.sendMessage())}),Q(),G(6,"button",5),Be("click",function(){return Ii(i),Ei(r.sendMessage())}),Me(7,"Send"),Q()()}t&2&&(ze(2),Et("ngForOf",SR(3,2,r.messages$)),ze(3),tr("ngModel",r.newMessage))},dependencies:[Ln,yf,Mi,tN,nN,lc,Ji,uc,uo]})};var B8="firebase",$8="10.13.2";$e(B8,$8,"app");var ei=new Nr("ANGULARFIRE2_VERSION");function hc(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ho=(n,e)=>{let t=e?[e]:Yf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Zi=class{constructor(){return ho(H8)}},H8="app-check";function dc(){}var Jg=class{zone;delegate;constructor(e,t=Km){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},ib=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",dc,{},dc,dc)),t.pipe(Ze({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Xi=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Jg(Zone.current)),this.insideAngular=t.run(()=>new Jg(Zone.current,Wm)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ie(Te))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zg(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function z8(n){return Zg().ngZone.runOutsideAngular(()=>n())}function lo(n){return Zg().ngZone.run(()=>n())}function q8(n){return G8(Zg())(n)}function G8(n){return function(t){return t=t.lift(new ib(n.ngZone)),t.pipe(li(n.outsideAngular),ui(n.insideAngular))}}var W8=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),lo(()=>n.apply(void 0,r))},ti=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=lo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",dc,{},dc,dc))),r[s]=W8(r[s],t));let i=z8(()=>n.apply(this,r));if(!e)if(i instanceof ue){let s=Zg();return i.pipe(li(s.outsideAngular),ui(s.insideAngular))}else return lo(()=>i);return i instanceof ue?i.pipe(q8):i instanceof Promise?lo(()=>new Promise((s,o)=>i.then(a=>lo(()=>s(a)),a=>lo(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:lo(()=>i)};var Wn=class{constructor(e){return e}},ni=class{constructor(){return Yf()}};function K8(n){return n&&n.length===1?n[0]:new Wn(Li())}var sb=new V("angularfire2._apps"),Q8={provide:Wn,useFactory:K8,deps:[[new nt,sb]]},Y8={provide:ni,deps:[[new nt,sb]]};function J8(n){return(e,t)=>{let r=t.get(yn);$e("angularfire",ei.full,"core"),$e("angularfire",ei.full,"app"),$e("angular",NR.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Wn(i)}}function I1(n,...e){return Ut([Q8,Y8,{provide:sb,useFactory:J8(n),multi:!0,deps:[Te,ft,Xi,...e]}])}var E1="auth",fo=class{constructor(e){return e}},po=class{constructor(){return ho(E1)}};var ob=new V("angularfire2.auth-instances");function Z8(n,e){let t=hc(E1,n,e);return t&&new fo(t)}function X8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new fo(r)}}var eK={provide:po,deps:[[new nt,ob]]},tK={provide:fo,useFactory:Z8,deps:[[new nt,ob],Wn]};function C1(n,...e){return $e("angularfire",ei.full,"auth"),Ut([tK,eK,{provide:ob,useFactory:X8(n),multi:!0,deps:[Te,ft,Xi,ni,[new nt,Zi],...e]}])}var T1=ti(jT,!0);var b1=ti(zT,!0);var D1=ti(BT,!0);var S1=ti(KT,!0);var A1=ti(qT,!0);var es=class n{constructor(e,t,r){this.auth=e;this.router=t;this.chatService=r;b1(this.auth,i=>{this.isLoggedInSubject.next(!!i)})}isLoggedin=!1;isLoggedInSubject=new at(!1);isLoggedIn$=this.isLoggedInSubject.asObservable();signup(e,t,r){return v(this,null,function*(){try{let i=yield T1(this.auth,e,t);console.log("User signed up:",i.user);let s={users:[i.user.uid],createdAt:Date.now(),name:r};this.chatService.createChat(i.user.uid,s),this.router.navigate(["/users"]),this.isLoggedInSubject.next(!0)}catch(i){console.error("Signup error:",i)}})}login(e,t){return v(this,null,function*(){try{let r=yield D1(this.auth,e,t);console.log("User logged in:",r.user),this.router.navigate(["/users"]),this.isLoggedInSubject.next(!0)}catch(r){console.error("Login error:",r)}})}signout(){return v(this,null,function*(){try{yield A1(this.auth),this.router.navigate(["/login"]),this.isLoggedInSubject.next(!1),console.log("User signed out")}catch(e){console.error("Sign out error:",e)}})}signupWithGoogle(){return v(this,null,function*(){let e=new VT;try{let t=yield S1(this.auth,e);console.log("User signed in with Google:",t.user);let r={users:[t.user.uid],createdAt:Date.now()};this.chatService.createChat(t.user.uid,r),this.router.navigate(["/users"])}catch(t){console.error("Google signup error:",t)}})}static \u0275fac=function(t){return new(t||n)(ie(fo),ie(Un),ie(Yi))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};function rK(n,e){n&1&&(Ci(),G(0,"svg",19),Bt(1,"path",20)(2,"path",21),Q())}function iK(n,e){n&1&&(Ci(),G(0,"svg",19),Bt(1,"path",22),Q())}var Xg=class n{constructor(e,t){this.router=e;this.userauth=t}showPass;email;Type;password;login(){this.userauth.login(this.email,this.password)}loginWithGoogle(){this.userauth.signupWithGoogle()}navToRegister(){this.router.navigate(["/register"])}ShowPass(){this.showPass=!this.showPass,this.Type=this.Type==="password"?"text":"password"}static \u0275fac=function(t){return new(t||n)(q(Un),q(es))};static \u0275cmp=pt({type:n,selectors:[["app-login"]],standalone:!0,features:[gt],decls:24,vars:5,consts:[[1,"flex","flex-col","mx-auto","border-4","border-black","mt-44","rounded-2xl","h-96","w-96"],[1,"flex","mx-auto","mt-10","font-serif","text-3xl","font-bold"],[1,"flex","flex-col"],[1,"flex","flex-col","mx-auto","mt-8"],["type","email","name","email","placeholder","Enter Email","required","","id","Email",1,"w-64","mx-5","border-4","border-black","rounded-md",3,"ngModelChange","ngModel"],[1,"flex","mx-5","mt-5","border-4","border-black","rounded-md","w-fit"],["name","password","placeholder","Enter Password","required","","id","password",1,"outline-none","w-60",3,"ngModelChange","type","ngModel"],["type","button",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","class","size-6",4,"ngIf"],["type","button",1,"px-3","py-2","mt-5","font-semibold","text-white","bg-blue-400","border-2","border-black","rounded-3xl",3,"click"],[1,"flex","justify-center","mt-5"],["type","button",1,"flex","px-3","py-2","text-white","bg-blue-400","border-2","border-black","rounded-3xl",3,"click"],["xmlns","http://www.w3.org/2000/svg","x","0px","y","0px","width","30","height","30","viewBox","0 0 48 48",1,"mx-3"],["fill","#FFC107","d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"],["fill","#FF3D00","d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"],["fill","#4CAF50","d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"],["fill","#1976D2","d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"],[1,"pt-1","mr-5","font-bold"],["href","","routerLink","/register",1,"mt-2","text-center","text-blue-700","underline",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"],["stroke-linecap","round","stroke-linejoin","round","d","M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"]],template:function(t,r){t&1&&(G(0,"div",0)(1,"h1",1),Me(2,"LOGIN"),Q(),G(3,"div",2)(4,"div",3)(5,"input",4),nr("ngModelChange",function(s){return xr(r.email,s)||(r.email=s),s}),Q(),G(6,"div",5)(7,"input",6),nr("ngModelChange",function(s){return xr(r.password,s)||(r.password=s),s}),Q(),G(8,"button",7),Be("click",function(){return r.ShowPass()}),_n(9,rK,3,0,"svg",8)(10,iK,2,0,"svg",8),Q()(),G(11,"button",9),Be("click",function(){return r.login()}),Me(12," LOGIN "),Q()(),G(13,"div",10)(14,"button",11),Be("click",function(){return r.loginWithGoogle()}),Ci(),G(15,"svg",12),Bt(16,"path",13)(17,"path",14)(18,"path",15)(19,"path",16),Q(),Bh(),G(20,"h1",17),Me(21," Login with Google"),Q()()(),G(22,"a",18),Be("click",function(){return r.navToRegister()}),Me(23,"Click here to register"),Q()()()),t&2&&(ze(5),tr("ngModel",r.email),ze(2),Et("type",r.Type),tr("ngModel",r.password),ze(2),Et("ngIf",!r.showPass),ze(),Et("ngIf",r.showPass))},dependencies:[lc,Ji,uc,Gl,uo,Ln,Mi,Uf]})};function sK(n,e){n&1&&(Ci(),G(0,"svg",20),Bt(1,"path",21)(2,"path",22),Q())}function oK(n,e){n&1&&(Ci(),G(0,"svg",20),Bt(1,"path",23),Q())}var em=class n{constructor(e,t){this.router=e;this.auth=t}password;email;name;showPass=!1;Type="password";register(){this.auth.signup(this.email,this.password,this.name)}RegisterWithGoogle(){this.auth.signupWithGoogle()}navToLogin(){this.router.navigate(["/login"])}ShowPass(){this.showPass=!this.showPass,this.Type=this.Type==="password"?"text":"password"}static \u0275fac=function(t){return new(t||n)(q(Un),q(es))};static \u0275cmp=pt({type:n,selectors:[["app-register"]],standalone:!0,features:[gt],decls:25,vars:6,consts:[[1,"flex","flex-col","mx-auto","border-4","border-black","mt-44","rounded-2xl","h-fit","w-96"],[1,"flex","mx-auto","mt-10","font-serif","text-3xl","font-bold"],[1,"flex","flex-col"],[1,"flex","flex-col","mx-auto","mt-8",3,"ngSubmit"],["type","text","name","name","placeholder","Enter Name","required","","id","name",1,"w-64","mx-5","border-4","border-black","rounded-md",3,"ngModelChange","ngModel"],["type","email","name","email","placeholder","Enter Email","required","","id","Email",1,"w-64","mx-5","mt-5","border-4","border-black","rounded-md",3,"ngModelChange","ngModel"],[1,"flex","mx-5","mt-5","border-4","border-black","rounded-md","w-fit"],["name","password","placeholder","Enter Password","required","","id","password",1,"outline-none","w-60",3,"ngModelChange","type","ngModel"],["type","button",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","class","size-6",4,"ngIf"],["type","button",1,"px-3","py-2","mt-5","font-semibold","text-white","bg-blue-400","border-2","border-black","rounded-3xl",3,"click"],[1,"flex","justify-center","mt-5"],["type","button",1,"flex","px-3","py-2","text-white","bg-blue-400","border-2","border-black","rounded-3xl",3,"click"],["xmlns","http://www.w3.org/2000/svg","x","0px","y","0px","width","30","height","30","viewBox","0 0 48 48",1,"mx-3"],["fill","#FFC107","d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"],["fill","#FF3D00","d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"],["fill","#4CAF50","d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"],["fill","#1976D2","d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"],[1,"pt-1","mr-5","font-bold"],["href","","routerLink","/login",1,"mt-2","text-center","text-blue-700","underline",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"],["stroke-linecap","round","stroke-linejoin","round","d","M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"]],template:function(t,r){t&1&&(G(0,"div",0)(1,"h1",1),Me(2,"REGISTER"),Q(),G(3,"div",2)(4,"form",3),Be("ngSubmit",function(){return r.register()}),G(5,"input",4),nr("ngModelChange",function(s){return xr(r.name,s)||(r.name=s),s}),Q(),G(6,"input",5),nr("ngModelChange",function(s){return xr(r.email,s)||(r.email=s),s}),Q(),G(7,"div",6)(8,"input",7),nr("ngModelChange",function(s){return xr(r.password,s)||(r.password=s),s}),Q(),G(9,"button",8),Be("click",function(){return r.ShowPass()}),_n(10,sK,3,0,"svg",9)(11,oK,2,0,"svg",9),Q()(),G(12,"button",10),Be("click",function(){return r.register()}),Me(13," REGISTER "),Q()(),G(14,"div",11)(15,"button",12),Be("click",function(){return r.RegisterWithGoogle()}),Ci(),G(16,"svg",13),Bt(17,"path",14)(18,"path",15)(19,"path",16)(20,"path",17),Q(),Bh(),G(21,"h1",18),Me(22,"Register with Google"),Q()()(),G(23,"a",19),Be("click",function(){return r.navToLogin()}),Me(24,"Already registered click here to login"),Q()()()),t&2&&(ze(5),tr("ngModel",r.name),ze(),tr("ngModel",r.email),ze(2),Et("type",r.Type),tr("ngModel",r.password),ze(2),Et("ngIf",!r.showPass),ze(),Et("ngIf",r.showPass))},dependencies:[lc,w1,Ji,uc,p1,Gl,uo,nb,Ln,Mi,Uf]})};var tm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pt({type:n,selectors:[["app-body"]],standalone:!0,features:[gt],decls:7,vars:0,consts:[[1,"h-full","bg-slate-300"],[1,"pt-6","text-5xl","font-bold","text-center"],[1,"flex","mx-24","mt-6","text-xl","leading-8","text-justify","indent-20"],[1,"mt-12"]],template:function(t,r){t&1&&(G(0,"div",0)(1,"h1",1),Me(2,"HEchat"),Q(),G(3,"p",2),Me(4," This application is designed to provide secure communication and interaction among users through a user-friendly interface. It features robust authentication methods, including email/password and Google sign-in ensuring a seamless onboarding experience. A key aspect of the project is the implementation of homomorphic encryption, which computations to be performed on encrypted data without needing to decrypt it. This innovative approach enhances privacy and security, making the app particularly suitable for sensitive information exchange. Users can enjoy functionalities such as chat and user management while having the peace of that their data is protected even during processing."),Q()(),G(5,"div",3),Bt(6,"router-outlet"),Q())},dependencies:[Au]})};var R1=[{path:"register",component:em},{path:"login",component:Xg},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"",component:tm,children:[{path:"users",component:Bg},{path:"chat/:id",component:Yg}]},{path:"**",redirectTo:"/login"}];var Wl=class{constructor(e){return e}},N1="database",cb=class{constructor(){return ho(N1)}};var ub=new V("angularfire2.database-instances");function aK(n,e){let t=hc(N1,n,e);return t&&new Wl(t)}function cK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Wl(r)}}var uK={provide:cb,deps:[[new nt,ub]]},lK={provide:Wl,useFactory:aK,deps:[[new nt,ub],Wn]};function M1(n,...e){return $e("angularfire",ei.full,"rtdb"),Ut([lK,uK,{provide:ub,useFactory:cK(n),multi:!0,deps:[Te,ft,Xi,ni,[new nt,po],[new nt,Zi],...e]}])}var Kl=class{constructor(e){return e}},x1="firestore",lb=class{constructor(){return ho(x1)}};var db=new V("angularfire2.firestore-instances");function dK(n,e){let t=hc(x1,n,e);return t&&new Kl(t)}function hK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Kl(r)}}var fK={provide:lb,deps:[[new nt,db]]},pK={provide:Kl,useFactory:dK,deps:[[new nt,db],Wn]};function P1(n,...e){return $e("angularfire",ei.full,"fst"),Ut([pK,fK,{provide:db,useFactory:hK(n),multi:!0,deps:[Te,ft,Xi,ni,[new nt,po],[new nt,Zi],...e]}])}var gK={apiKey:"AIzaSyC_sOa4k-noUsXoLuR4gPiiCQhGn40PrGE",authDomain:"hechat-2d0aa.firebaseapp.com",databaseURL:"https://hechat-2d0aa-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"hechat-2d0aa",storageBucket:"hechat-2d0aa.appspot.com",messagingSenderId:"876293332177",appId:"1:876293332177:web:96216eeaac9fbd43abb9f0",measurementId:"G-KF6RSRWHF0"},k1={providers:[OR({eventCoalescing:!0}),iM(R1),EN(),I1(()=>Qf(gK)),C1(()=>ic()),P1(()=>ul()),M1(()=>Ml())]};function mK(n,e){if(n&1){let t=Zo();G(0,"button",3),Be("click",function(){Ii(t);let i=Xo();return Ei(i.logout())}),Me(1,"Logout"),Q()}}var nm=class n{constructor(e){this.auth=e}isLoggedIn=!1;ngOnInit(){this.auth.isLoggedIn$.subscribe(e=>{this.isLoggedIn=e})}logout(){this.auth.signout(),this.isLoggedIn=this.auth.isLoggedin}static \u0275fac=function(t){return new(t||n)(q(es))};static \u0275cmp=pt({type:n,selectors:[["app-navbar"]],standalone:!0,features:[gt],decls:4,vars:1,consts:[[1,"flex","justify-between","w-full","h-20","bg-blue-600"],[1,"text-6xl","font-bold","text-white","mt-2","ml-2"],["type","button","class","w-20 mx-5 my-2 font-bold text-white bg-red-600 border-4 border-black h-14 rounded-2xl",3,"click",4,"ngIf"],["type","button",1,"w-20","mx-5","my-2","font-bold","text-white","bg-red-600","border-4","border-black","h-14","rounded-2xl",3,"click"]],template:function(t,r){t&1&&(G(0,"nav",0)(1,"h1",1),Me(2,"HEchat"),Q(),_n(3,mK,2,0,"button",2),Q()),t&2&&(ze(3),Et("ngIf",r.isLoggedIn))},dependencies:[Ln,Mi]})};var rm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pt({type:n,selectors:[["app-footer"]],standalone:!0,features:[gt],decls:5,vars:0,consts:[[1,"w-full","h-64","mt-20","bg-black","bg-opacity-50"],[1,"pt-32","text-3xl","text-center"],[1,"text-4xl","font-semibold"]],template:function(t,r){t&1&&(G(0,"div",0)(1,"p",1),Me(2,"This web-app is developed by "),G(3,"span",2),Me(4,"Jacob jabakumar S"),Q()()())}})};var im=class n{title="HEchat";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pt({type:n,selectors:[["app-root"]],standalone:!0,features:[gt],decls:3,vars:0,template:function(t,r){t&1&&Bt(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},dependencies:[nm,rm,Au]})};wN(im,k1).catch(n=>console.error(n));
